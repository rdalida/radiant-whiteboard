function mS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function H0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q0={exports:{}},Hc={},G0={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),gS=Symbol.for("react.portal"),yS=Symbol.for("react.fragment"),vS=Symbol.for("react.strict_mode"),_S=Symbol.for("react.profiler"),wS=Symbol.for("react.provider"),ES=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),IS=Symbol.for("react.suspense"),SS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),Og=Symbol.iterator;function AS(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var K0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y0=Object.assign,X0={};function ko(t,e,n){this.props=t,this.context=e,this.refs=X0,this.updater=n||K0}ko.prototype.isReactComponent={};ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Q0(){}Q0.prototype=ko.prototype;function fp(t,e,n){this.props=t,this.context=e,this.refs=X0,this.updater=n||K0}var pp=fp.prototype=new Q0;pp.constructor=fp;Y0(pp,ko.prototype);pp.isPureReactComponent=!0;var Vg=Array.isArray,J0=Object.prototype.hasOwnProperty,mp={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function e_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)J0.call(e,r)&&!Z0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:dl,type:t,key:s,ref:o,props:i,_owner:mp.current}}function kS(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function xS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lg=/\/+/g;function Gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xS(""+t.key):e.toString(36)}function Ru(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dl:case gS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gd(o,0):r,Vg(i)?(n="",t!=null&&(n=t.replace(Lg,"$&/")+"/"),Ru(i,e,n,"",function(c){return c})):i!=null&&(gp(i)&&(i=kS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Lg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Vg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Gd(s,l);o+=Ru(s,e,n,u,i)}else if(u=AS(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Gd(s,l++),o+=Ru(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jl(t,e,n){if(t==null)return t;var r=[],i=0;return Ru(t,r,"","",function(s){return e.call(n,s,i++)}),r}function RS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Pu={transition:null},PS={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Pu,ReactCurrentOwner:mp};function t_(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Jl,forEach:function(t,e,n){Jl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jl(t,function(){e++}),e},toArray:function(t){return Jl(t,function(e){return e})||[]},only:function(t){if(!gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=ko;Te.Fragment=yS;Te.Profiler=_S;Te.PureComponent=fp;Te.StrictMode=vS;Te.Suspense=IS;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PS;Te.act=t_;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Y0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)J0.call(e,u)&&!Z0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:dl,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:ES,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wS,_context:t},t.Consumer=t};Te.createElement=e_;Te.createFactory=function(t){var e=e_.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:TS,render:t}};Te.isValidElement=gp;Te.lazy=function(t){return{$$typeof:CS,_payload:{_status:-1,_result:t},_init:RS}};Te.memo=function(t,e){return{$$typeof:SS,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Pu.transition;Pu.transition={};try{t()}finally{Pu.transition=e}};Te.unstable_act=t_;Te.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Te.useContext=function(t){return Wt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Te.useId=function(){return Wt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Te.useRef=function(t){return Wt.current.useRef(t)};Te.useState=function(t){return Wt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Wt.current.useTransition()};Te.version="18.3.1";G0.exports=Te;var x=G0.exports;const Os=H0(x),n_=mS({__proto__:null,default:Os},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=x,NS=Symbol.for("react.element"),DS=Symbol.for("react.fragment"),MS=Object.prototype.hasOwnProperty,OS=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VS={key:!0,ref:!0,__self:!0,__source:!0};function r_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MS.call(e,r)&&!VS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:NS,type:t,key:s,ref:o,props:i,_owner:OS.current}}Hc.Fragment=DS;Hc.jsx=r_;Hc.jsxs=r_;q0.exports=Hc;var T=q0.exports,i_={exports:{}},dn={},s_={exports:{}},o_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,K){var te=j.length;j.push(K);e:for(;0<te;){var ve=te-1>>>1,pe=j[ve];if(0<i(pe,K))j[ve]=K,j[te]=pe,te=ve;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var K=j[0],te=j.pop();if(te!==K){j[0]=te;e:for(var ve=0,pe=j.length,he=pe>>>1;ve<he;){var ne=2*(ve+1)-1,ae=j[ne],ge=ne+1,H=j[ge];if(0>i(ae,te))ge<pe&&0>i(H,ae)?(j[ve]=H,j[ge]=te,ve=ge):(j[ve]=ae,j[ne]=te,ve=ne);else if(ge<pe&&0>i(H,te))j[ve]=H,j[ge]=te,ve=ge;else break e}}return K}function i(j,K){var te=j.sortIndex-K.sortIndex;return te!==0?te:j.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,m=null,f=3,y=!1,C=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(j){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=j)r(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(c)}}function N(j){if(I=!1,A(j),!C)if(n(u)!==null)C=!0,ce(L);else{var K=n(c);K!==null&&Ae(N,K.startTime-j)}}function L(j,K){C=!1,I&&(I=!1,w(g),g=-1),y=!0;var te=f;try{for(A(K),m=n(u);m!==null&&(!(m.expirationTime>K)||j&&!D());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,f=m.priorityLevel;var pe=ve(m.expirationTime<=K);K=t.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(u)&&r(u),A(K)}else r(u);m=n(u)}if(m!==null)var he=!0;else{var ne=n(c);ne!==null&&Ae(N,ne.startTime-K),he=!1}return he}finally{m=null,f=te,y=!1}}var U=!1,v=null,g=-1,R=5,S=-1;function D(){return!(t.unstable_now()-S<R)}function M(){if(v!==null){var j=t.unstable_now();S=j;var K=!0;try{K=v(!0,j)}finally{K?P():(U=!1,v=null)}}else U=!1}var P;if(typeof _=="function")P=function(){_(M)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Le=be.port2;be.port1.onmessage=M,P=function(){Le.postMessage(null)}}else P=function(){k(M,0)};function ce(j){v=j,U||(U=!0,P())}function Ae(j,K){g=k(function(){j(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){C||y||(C=!0,ce(L))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var te=f;f=K;try{return j()}finally{f=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=f;f=j;try{return K()}finally{f=te}},t.unstable_scheduleCallback=function(j,K,te){var ve=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ve+te:ve):te=ve,j){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=te+pe,j={id:h++,callback:K,priorityLevel:j,startTime:te,expirationTime:pe,sortIndex:-1},te>ve?(j.sortIndex=te,e(c,j),n(u)===null&&j===n(c)&&(I?(w(g),g=-1):I=!0,Ae(N,te-ve))):(j.sortIndex=pe,e(u,j),C||y||(C=!0,ce(L))),j},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(j){var K=f;return function(){var te=f;f=K;try{return j.apply(this,arguments)}finally{f=te}}}})(o_);s_.exports=o_;var LS=s_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=x,cn=LS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a_=new Set,Fa={};function fs(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(Fa[t]=e,t=0;t<e.length;t++)a_.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=Object.prototype.hasOwnProperty,jS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fg={},jg={};function US(t){return Bh.call(jg,t)?!0:Bh.call(Fg,t)?!1:jS.test(t)?jg[t]=!0:(Fg[t]=!0,!1)}function zS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BS(t,e,n,r){if(e===null||typeof e>"u"||zS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var yp=/[\-:]([a-z])/g;function vp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yp,vp);kt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yp,vp);kt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yp,vp);kt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function _p(t,e,n,r){var i=kt.hasOwnProperty(e)?kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BS(e,n,i,r)&&(n=null),r||i===null?US(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var br=FS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Us=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),wp=Symbol.for("react.strict_mode"),$h=Symbol.for("react.profiler"),l_=Symbol.for("react.provider"),u_=Symbol.for("react.context"),Ep=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),c_=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function na(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Kd;function ha(t){if(Kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kd=e&&e[1]||""}return`
`+Kd+t}var Yd=!1;function Xd(t,e){if(!t||Yd)return"";Yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function $S(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=Xd(t.type,!1),t;case 11:return t=Xd(t.type.render,!1),t;case 1:return t=Xd(t.type,!0),t;default:return""}}function qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zs:return"Fragment";case Us:return"Portal";case $h:return"Profiler";case wp:return"StrictMode";case Wh:return"Suspense";case Hh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u_:return(t.displayName||"Context")+".Consumer";case l_:return(t._context.displayName||"Context")+".Provider";case Ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tp:return e=t.displayName||null,e!==null?e:qh(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return qh(t(e))}catch{}}return null}function WS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qh(e);case 8:return e===wp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HS(t){var e=d_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eu(t){t._valueTracker||(t._valueTracker=HS(t))}function h_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gh(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f_(t,e){e=e.checked,e!=null&&_p(t,"checked",e,!1)}function Kh(t,e){f_(t,e);var n=_i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yh(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yh(t,e,n){(e!=="number"||Zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $g(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(fa(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function p_(t,e){var n=_i(e.value),r=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tu,g_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tu=tu||document.createElement("div"),tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qS=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){qS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function y_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function v_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GS=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jh(t,e){if(e){if(GS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Zh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function Ip(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tf=null,Zs=null,eo=null;function Hg(t){if(t=pl(t)){if(typeof tf!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Xc(e),tf(t.stateNode,t.type,e))}}function __(t){Zs?eo?eo.push(t):eo=[t]:Zs=t}function w_(){if(Zs){var t=Zs,e=eo;if(eo=Zs=null,Hg(t),e)for(t=0;t<e.length;t++)Hg(e[t])}}function E_(t,e){return t(e)}function T_(){}var Qd=!1;function I_(t,e,n){if(Qd)return t(e,n);Qd=!0;try{return E_(t,e,n)}finally{Qd=!1,(Zs!==null||eo!==null)&&(T_(),w_())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var nf=!1;if(Tr)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){nf=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{nf=!1}function KS(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Sa=!1,ec=null,tc=!1,rf=null,YS={onError:function(t){Sa=!0,ec=t}};function XS(t,e,n,r,i,s,o,l,u){Sa=!1,ec=null,KS.apply(YS,arguments)}function QS(t,e,n,r,i,s,o,l,u){if(XS.apply(this,arguments),Sa){if(Sa){var c=ec;Sa=!1,ec=null}else throw Error(W(198));tc||(tc=!0,rf=c)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qg(t){if(ps(t)!==t)throw Error(W(188))}function JS(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qg(i),t;if(s===r)return qg(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function C_(t){return t=JS(t),t!==null?A_(t):null}function A_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A_(t);if(e!==null)return e;t=t.sibling}return null}var k_=cn.unstable_scheduleCallback,Gg=cn.unstable_cancelCallback,ZS=cn.unstable_shouldYield,eC=cn.unstable_requestPaint,st=cn.unstable_now,tC=cn.unstable_getCurrentPriorityLevel,Sp=cn.unstable_ImmediatePriority,x_=cn.unstable_UserBlockingPriority,nc=cn.unstable_NormalPriority,nC=cn.unstable_LowPriority,R_=cn.unstable_IdlePriority,qc=null,Gn=null;function rC(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(qc,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:oC,iC=Math.log,sC=Math.LN2;function oC(t){return t>>>=0,t===0?32:31-(iC(t)/sC|0)|0}var nu=64,ru=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=pa(l):(s&=o,s!==0&&(r=pa(s)))}else o=n&~i,o!==0?r=pa(o):s!==0&&(r=pa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),i=1<<n,r|=t[n],e&=~i;return r}function aC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=aC(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function sf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P_(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function uC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function b_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var N_,Ap,D_,M_,O_,of=!1,iu=[],oi=null,ai=null,li=null,za=new Map,Ba=new Map,Jr=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kg(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function ia(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&Ap(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dC(t,e,n,r,i){switch(e){case"focusin":return oi=ia(oi,t,e,n,r,i),!0;case"dragenter":return ai=ia(ai,t,e,n,r,i),!0;case"mouseover":return li=ia(li,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return za.set(s,ia(za.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ba.set(s,ia(Ba.get(s)||null,t,e,n,r,i)),!0}return!1}function V_(t){var e=Gi(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=S_(n),e!==null){t.blockedOn=e,O_(t.priority,function(){D_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=af(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ef=r,n.target.dispatchEvent(r),ef=null}else return e=pl(n),e!==null&&Ap(e),t.blockedOn=n,!1;e.shift()}return!0}function Yg(t,e,n){bu(t)&&n.delete(e)}function hC(){of=!1,oi!==null&&bu(oi)&&(oi=null),ai!==null&&bu(ai)&&(ai=null),li!==null&&bu(li)&&(li=null),za.forEach(Yg),Ba.forEach(Yg)}function sa(t,e){t.blockedOn===e&&(t.blockedOn=null,of||(of=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,hC)))}function $a(t){function e(i){return sa(i,t)}if(0<iu.length){sa(iu[0],t);for(var n=1;n<iu.length;n++){var r=iu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oi!==null&&sa(oi,t),ai!==null&&sa(ai,t),li!==null&&sa(li,t),za.forEach(e),Ba.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)V_(n),n.blockedOn===null&&Jr.shift()}var to=br.ReactCurrentBatchConfig,ic=!0;function fC(t,e,n,r){var i=Me,s=to.transition;to.transition=null;try{Me=1,kp(t,e,n,r)}finally{Me=i,to.transition=s}}function pC(t,e,n,r){var i=Me,s=to.transition;to.transition=null;try{Me=4,kp(t,e,n,r)}finally{Me=i,to.transition=s}}function kp(t,e,n,r){if(ic){var i=af(t,e,n,r);if(i===null)lh(t,e,r,sc,n),Kg(t,r);else if(dC(i,t,e,n,r))r.stopPropagation();else if(Kg(t,r),e&4&&-1<cC.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&N_(s),s=af(t,e,n,r),s===null&&lh(t,e,r,sc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lh(t,e,r,null,n)}}var sc=null;function af(t,e,n,r){if(sc=null,t=Ip(r),t=Gi(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function L_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tC()){case Sp:return 1;case x_:return 4;case nc:case nC:return 16;case R_:return 536870912;default:return 16}default:return 16}}var ri=null,xp=null,Nu=null;function F_(){if(Nu)return Nu;var t,e=xp,n=e.length,r,i="value"in ri?ri.value:ri.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Nu=i.slice(t,1<r?1-r:void 0)}function Du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function Xg(){return!1}function hn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:Xg,this.isPropagationStopped=Xg,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rp=hn(xo),fl=et({},xo,{view:0,detail:0}),mC=hn(fl),Zd,eh,oa,Gc=et({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(Zd=t.screenX-oa.screenX,eh=t.screenY-oa.screenY):eh=Zd=0,oa=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),Qg=hn(Gc),gC=et({},Gc,{dataTransfer:0}),yC=hn(gC),vC=et({},fl,{relatedTarget:0}),th=hn(vC),_C=et({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),wC=hn(_C),EC=et({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TC=hn(EC),IC=et({},xo,{data:0}),Jg=hn(IC),SC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AC[t])?!!e[t]:!1}function Pp(){return kC}var xC=et({},fl,{key:function(t){if(t.key){var e=SC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pp,charCode:function(t){return t.type==="keypress"?Du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RC=hn(xC),PC=et({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zg=hn(PC),bC=et({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pp}),NC=hn(bC),DC=et({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),MC=hn(DC),OC=et({},Gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VC=hn(OC),LC=[9,13,27,32],bp=Tr&&"CompositionEvent"in window,Ca=null;Tr&&"documentMode"in document&&(Ca=document.documentMode);var FC=Tr&&"TextEvent"in window&&!Ca,j_=Tr&&(!bp||Ca&&8<Ca&&11>=Ca),ey=" ",ty=!1;function U_(t,e){switch(t){case"keyup":return LC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function jC(t,e){switch(t){case"compositionend":return z_(e);case"keypress":return e.which!==32?null:(ty=!0,ey);case"textInput":return t=e.data,t===ey&&ty?null:t;default:return null}}function UC(t,e){if(Bs)return t==="compositionend"||!bp&&U_(t,e)?(t=F_(),Nu=xp=ri=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j_&&e.locale!=="ko"?null:e.data;default:return null}}var zC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zC[t.type]:e==="textarea"}function B_(t,e,n,r){__(r),e=oc(e,"onChange"),0<e.length&&(n=new Rp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Aa=null,Wa=null;function BC(t){Z_(t,0)}function Kc(t){var e=Hs(t);if(h_(e))return t}function $C(t,e){if(t==="change")return e}var $_=!1;if(Tr){var nh;if(Tr){var rh="oninput"in document;if(!rh){var ry=document.createElement("div");ry.setAttribute("oninput","return;"),rh=typeof ry.oninput=="function"}nh=rh}else nh=!1;$_=nh&&(!document.documentMode||9<document.documentMode)}function iy(){Aa&&(Aa.detachEvent("onpropertychange",W_),Wa=Aa=null)}function W_(t){if(t.propertyName==="value"&&Kc(Wa)){var e=[];B_(e,Wa,t,Ip(t)),I_(BC,e)}}function WC(t,e,n){t==="focusin"?(iy(),Aa=e,Wa=n,Aa.attachEvent("onpropertychange",W_)):t==="focusout"&&iy()}function HC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kc(Wa)}function qC(t,e){if(t==="click")return Kc(e)}function GC(t,e){if(t==="input"||t==="change")return Kc(e)}function KC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:KC;function Ha(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bh.call(e,i)||!Dn(t[i],e[i]))return!1}return!0}function sy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oy(t,e){var n=sy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sy(n)}}function H_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q_(){for(var t=window,e=Zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zu(t.document)}return e}function Np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YC(t){var e=q_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H_(n.ownerDocument.documentElement,n)){if(r!==null&&Np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=oy(n,s);var o=oy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XC=Tr&&"documentMode"in document&&11>=document.documentMode,$s=null,lf=null,ka=null,uf=!1;function ay(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||$s==null||$s!==Zu(r)||(r=$s,"selectionStart"in r&&Np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ka&&Ha(ka,r)||(ka=r,r=oc(lf,"onSelect"),0<r.length&&(e=new Rp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionend:ou("Transition","TransitionEnd")},ih={},G_={};Tr&&(G_=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Yc(t){if(ih[t])return ih[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G_)return ih[t]=e[n];return t}var K_=Yc("animationend"),Y_=Yc("animationiteration"),X_=Yc("animationstart"),Q_=Yc("transitionend"),J_=new Map,ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){J_.set(t,e),fs(e,[t])}for(var sh=0;sh<ly.length;sh++){var oh=ly[sh],QC=oh.toLowerCase(),JC=oh[0].toUpperCase()+oh.slice(1);ki(QC,"on"+JC)}ki(K_,"onAnimationEnd");ki(Y_,"onAnimationIteration");ki(X_,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(Q_,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QS(r,e,void 0,t),t.currentTarget=null}function Z_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;uy(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;uy(i,l,c),s=u}}}if(tc)throw t=rf,tc=!1,rf=null,t}function qe(t,e){var n=e[pf];n===void 0&&(n=e[pf]=new Set);var r=t+"__bubble";n.has(r)||(ew(e,t,2,!1),n.add(r))}function ah(t,e,n){var r=0;e&&(r|=4),ew(n,t,r,e)}var au="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[au]){t[au]=!0,a_.forEach(function(n){n!=="selectionchange"&&(ZC.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[au]||(e[au]=!0,ah("selectionchange",!1,e))}}function ew(t,e,n,r){switch(L_(e)){case 1:var i=fC;break;case 4:i=pC;break;default:i=kp}n=i.bind(null,e,n,t),i=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Gi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}I_(function(){var c=s,h=Ip(n),m=[];e:{var f=J_.get(t);if(f!==void 0){var y=Rp,C=t;switch(t){case"keypress":if(Du(n)===0)break e;case"keydown":case"keyup":y=RC;break;case"focusin":C="focus",y=th;break;case"focusout":C="blur",y=th;break;case"beforeblur":case"afterblur":y=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=yC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=NC;break;case K_:case Y_:case X_:y=wC;break;case Q_:y=MC;break;case"scroll":y=mC;break;case"wheel":y=VC;break;case"copy":case"cut":case"paste":y=TC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Zg}var I=(e&4)!==0,k=!I&&t==="scroll",w=I?f!==null?f+"Capture":null:f;I=[];for(var _=c,A;_!==null;){A=_;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,w!==null&&(N=Ua(_,w),N!=null&&I.push(Ga(_,N,A)))),k)break;_=_.return}0<I.length&&(f=new y(f,C,null,n,h),m.push({event:f,listeners:I}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==ef&&(C=n.relatedTarget||n.fromElement)&&(Gi(C)||C[Ir]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(C=n.relatedTarget||n.toElement,y=c,C=C?Gi(C):null,C!==null&&(k=ps(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(y=null,C=c),y!==C)){if(I=Qg,N="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Zg,N="onPointerLeave",w="onPointerEnter",_="pointer"),k=y==null?f:Hs(y),A=C==null?f:Hs(C),f=new I(N,_+"leave",y,n,h),f.target=k,f.relatedTarget=A,N=null,Gi(h)===c&&(I=new I(w,_+"enter",C,n,h),I.target=A,I.relatedTarget=k,N=I),k=N,y&&C)t:{for(I=y,w=C,_=0,A=I;A;A=Rs(A))_++;for(A=0,N=w;N;N=Rs(N))A++;for(;0<_-A;)I=Rs(I),_--;for(;0<A-_;)w=Rs(w),A--;for(;_--;){if(I===w||w!==null&&I===w.alternate)break t;I=Rs(I),w=Rs(w)}I=null}else I=null;y!==null&&cy(m,f,y,I,!1),C!==null&&k!==null&&cy(m,k,C,I,!0)}}e:{if(f=c?Hs(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var L=$C;else if(ny(f))if($_)L=GC;else{L=HC;var U=WC}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=qC);if(L&&(L=L(t,c))){B_(m,L,n,h);break e}U&&U(t,f,c),t==="focusout"&&(U=f._wrapperState)&&U.controlled&&f.type==="number"&&Yh(f,"number",f.value)}switch(U=c?Hs(c):window,t){case"focusin":(ny(U)||U.contentEditable==="true")&&($s=U,lf=c,ka=null);break;case"focusout":ka=lf=$s=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,ay(m,n,h);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":ay(m,n,h)}var v;if(bp)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Bs?U_(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(j_&&n.locale!=="ko"&&(Bs||g!=="onCompositionStart"?g==="onCompositionEnd"&&Bs&&(v=F_()):(ri=h,xp="value"in ri?ri.value:ri.textContent,Bs=!0)),U=oc(c,g),0<U.length&&(g=new Jg(g,t,null,n,h),m.push({event:g,listeners:U}),v?g.data=v:(v=z_(n),v!==null&&(g.data=v)))),(v=FC?jC(t,n):UC(t,n))&&(c=oc(c,"onBeforeInput"),0<c.length&&(h=new Jg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=v))}Z_(m,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ua(t,n),s!=null&&r.unshift(Ga(t,s,i)),s=Ua(t,e),s!=null&&r.push(Ga(t,s,i))),t=t.return}return r}function Rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ua(n,s),u!=null&&o.unshift(Ga(n,u,l))):i||(u=Ua(n,s),u!=null&&o.push(Ga(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function dy(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function lu(t,e,n){if(e=dy(e),dy(t)!==e&&n)throw Error(W(425))}function ac(){}var cf=null,df=null;function hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ff=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(t){return hy.resolve(null).then(t).catch(iA)}:ff;function iA(t){setTimeout(function(){throw t})}function uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$a(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ro,Ka="__reactProps$"+Ro,Ir="__reactContainer$"+Ro,pf="__reactEvents$"+Ro,sA="__reactListeners$"+Ro,oA="__reactHandles$"+Ro;function Gi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fy(t);t!==null;){if(n=t[Hn])return n;t=fy(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[Hn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Xc(t){return t[Ka]||null}var mf=[],qs=-1;function xi(t){return{current:t}}function Ge(t){0>qs||(t.current=mf[qs],mf[qs]=null,qs--)}function $e(t,e){qs++,mf[qs]=t.current,t.current=e}var wi={},Lt=xi(wi),Qt=xi(!1),ts=wi;function fo(t,e){var n=t.type.contextTypes;if(!n)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function lc(){Ge(Qt),Ge(Lt)}function py(t,e,n){if(Lt.current!==wi)throw Error(W(168));$e(Lt,e),$e(Qt,n)}function tw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,WS(t)||"Unknown",i));return et({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,ts=Lt.current,$e(Lt,t),$e(Qt,Qt.current),!0}function my(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=tw(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,Ge(Qt),Ge(Lt),$e(Lt,t)):Ge(Qt),$e(Qt,n)}var hr=null,Qc=!1,ch=!1;function nw(t){hr===null?hr=[t]:hr.push(t)}function aA(t){Qc=!0,nw(t)}function Ri(){if(!ch&&hr!==null){ch=!0;var t=0,e=Me;try{var n=hr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,Qc=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),k_(Sp,Ri),i}finally{Me=e,ch=!1}}return null}var Gs=[],Ks=0,cc=null,dc=0,mn=[],gn=0,ns=null,pr=1,mr="";function Wi(t,e){Gs[Ks++]=dc,Gs[Ks++]=cc,cc=t,dc=e}function rw(t,e,n){mn[gn++]=pr,mn[gn++]=mr,mn[gn++]=ns,ns=t;var r=pr;t=mr;var i=32-Rn(r)-1;r&=~(1<<i),n+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pr=1<<32-Rn(e)+i|n<<i|r,mr=s+t}else pr=1<<s|n<<i|r,mr=t}function Dp(t){t.return!==null&&(Wi(t,1),rw(t,1,0))}function Mp(t){for(;t===cc;)cc=Gs[--Ks],Gs[Ks]=null,dc=Gs[--Ks],Gs[Ks]=null;for(;t===ns;)ns=mn[--gn],mn[gn]=null,mr=mn[--gn],mn[gn]=null,pr=mn[--gn],mn[gn]=null}var un=null,an=null,Xe=!1,kn=null;function iw(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,an=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,an=null,!0):!1;default:return!1}}function gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yf(t){if(Xe){var e=an;if(e){var n=e;if(!gy(t,e)){if(gf(t))throw Error(W(418));e=ui(n.nextSibling);var r=un;e&&gy(t,e)?iw(r,n):(t.flags=t.flags&-4097|2,Xe=!1,un=t)}}else{if(gf(t))throw Error(W(418));t.flags=t.flags&-4097|2,Xe=!1,un=t}}}function yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function uu(t){if(t!==un)return!1;if(!Xe)return yy(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hf(t.type,t.memoizedProps)),e&&(e=an)){if(gf(t))throw sw(),Error(W(418));for(;e;)iw(t,e),e=ui(e.nextSibling)}if(yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=un?ui(t.stateNode.nextSibling):null;return!0}function sw(){for(var t=an;t;)t=ui(t.nextSibling)}function po(){an=un=null,Xe=!1}function Op(t){kn===null?kn=[t]:kn.push(t)}var lA=br.ReactCurrentBatchConfig;function aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function cu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function ow(t){function e(w,_){if(t){var A=w.deletions;A===null?(w.deletions=[_],w.flags|=16):A.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=fi(w,_),w.index=0,w.sibling=null,w}function s(w,_,A){return w.index=A,t?(A=w.alternate,A!==null?(A=A.index,A<_?(w.flags|=2,_):A):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,_,A,N){return _===null||_.tag!==6?(_=yh(A,w.mode,N),_.return=w,_):(_=i(_,A),_.return=w,_)}function u(w,_,A,N){var L=A.type;return L===zs?h(w,_,A.props.children,N,A.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xr&&vy(L)===_.type)?(N=i(_,A.props),N.ref=aa(w,_,A),N.return=w,N):(N=Uu(A.type,A.key,A.props,null,w.mode,N),N.ref=aa(w,_,A),N.return=w,N)}function c(w,_,A,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=vh(A,w.mode,N),_.return=w,_):(_=i(_,A.children||[]),_.return=w,_)}function h(w,_,A,N,L){return _===null||_.tag!==7?(_=Zi(A,w.mode,N,L),_.return=w,_):(_=i(_,A),_.return=w,_)}function m(w,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=yh(""+_,w.mode,A),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zl:return A=Uu(_.type,_.key,_.props,null,w.mode,A),A.ref=aa(w,null,_),A.return=w,A;case Us:return _=vh(_,w.mode,A),_.return=w,_;case Xr:var N=_._init;return m(w,N(_._payload),A)}if(fa(_)||na(_))return _=Zi(_,w.mode,A,null),_.return=w,_;cu(w,_)}return null}function f(w,_,A,N){var L=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return L!==null?null:l(w,_,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zl:return A.key===L?u(w,_,A,N):null;case Us:return A.key===L?c(w,_,A,N):null;case Xr:return L=A._init,f(w,_,L(A._payload),N)}if(fa(A)||na(A))return L!==null?null:h(w,_,A,N,null);cu(w,A)}return null}function y(w,_,A,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(A)||null,l(_,w,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Zl:return w=w.get(N.key===null?A:N.key)||null,u(_,w,N,L);case Us:return w=w.get(N.key===null?A:N.key)||null,c(_,w,N,L);case Xr:var U=N._init;return y(w,_,A,U(N._payload),L)}if(fa(N)||na(N))return w=w.get(A)||null,h(_,w,N,L,null);cu(_,N)}return null}function C(w,_,A,N){for(var L=null,U=null,v=_,g=_=0,R=null;v!==null&&g<A.length;g++){v.index>g?(R=v,v=null):R=v.sibling;var S=f(w,v,A[g],N);if(S===null){v===null&&(v=R);break}t&&v&&S.alternate===null&&e(w,v),_=s(S,_,g),U===null?L=S:U.sibling=S,U=S,v=R}if(g===A.length)return n(w,v),Xe&&Wi(w,g),L;if(v===null){for(;g<A.length;g++)v=m(w,A[g],N),v!==null&&(_=s(v,_,g),U===null?L=v:U.sibling=v,U=v);return Xe&&Wi(w,g),L}for(v=r(w,v);g<A.length;g++)R=y(v,w,g,A[g],N),R!==null&&(t&&R.alternate!==null&&v.delete(R.key===null?g:R.key),_=s(R,_,g),U===null?L=R:U.sibling=R,U=R);return t&&v.forEach(function(D){return e(w,D)}),Xe&&Wi(w,g),L}function I(w,_,A,N){var L=na(A);if(typeof L!="function")throw Error(W(150));if(A=L.call(A),A==null)throw Error(W(151));for(var U=L=null,v=_,g=_=0,R=null,S=A.next();v!==null&&!S.done;g++,S=A.next()){v.index>g?(R=v,v=null):R=v.sibling;var D=f(w,v,S.value,N);if(D===null){v===null&&(v=R);break}t&&v&&D.alternate===null&&e(w,v),_=s(D,_,g),U===null?L=D:U.sibling=D,U=D,v=R}if(S.done)return n(w,v),Xe&&Wi(w,g),L;if(v===null){for(;!S.done;g++,S=A.next())S=m(w,S.value,N),S!==null&&(_=s(S,_,g),U===null?L=S:U.sibling=S,U=S);return Xe&&Wi(w,g),L}for(v=r(w,v);!S.done;g++,S=A.next())S=y(v,w,g,S.value,N),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?g:S.key),_=s(S,_,g),U===null?L=S:U.sibling=S,U=S);return t&&v.forEach(function(M){return e(w,M)}),Xe&&Wi(w,g),L}function k(w,_,A,N){if(typeof A=="object"&&A!==null&&A.type===zs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Zl:e:{for(var L=A.key,U=_;U!==null;){if(U.key===L){if(L=A.type,L===zs){if(U.tag===7){n(w,U.sibling),_=i(U,A.props.children),_.return=w,w=_;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xr&&vy(L)===U.type){n(w,U.sibling),_=i(U,A.props),_.ref=aa(w,U,A),_.return=w,w=_;break e}n(w,U);break}else e(w,U);U=U.sibling}A.type===zs?(_=Zi(A.props.children,w.mode,N,A.key),_.return=w,w=_):(N=Uu(A.type,A.key,A.props,null,w.mode,N),N.ref=aa(w,_,A),N.return=w,w=N)}return o(w);case Us:e:{for(U=A.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(w,_.sibling),_=i(_,A.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=vh(A,w.mode,N),_.return=w,w=_}return o(w);case Xr:return U=A._init,k(w,_,U(A._payload),N)}if(fa(A))return C(w,_,A,N);if(na(A))return I(w,_,A,N);cu(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,A),_.return=w,w=_):(n(w,_),_=yh(A,w.mode,N),_.return=w,w=_),o(w)):n(w,_)}return k}var mo=ow(!0),aw=ow(!1),hc=xi(null),fc=null,Ys=null,Vp=null;function Lp(){Vp=Ys=fc=null}function Fp(t){var e=hc.current;Ge(hc),t._currentValue=e}function vf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function no(t,e){fc=t,Vp=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Vp!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(fc===null)throw Error(W(308));Ys=t,fc.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var Ki=null;function jp(t){Ki===null?Ki=[t]:Ki.push(t)}function lw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qr=!1;function Up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ci(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(t,n)}return i=r.interleaved,i===null?(e.next=e,jp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(t,n)}function Mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cp(t,n)}}function _y(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var i=t.updateQueue;Qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=c=u=null,l=s;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,I=l;switch(f=e,y=n,I.tag){case 1:if(C=I.payload,typeof C=="function"){m=C.call(y,m,f);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=I.payload,f=typeof C=="function"?C.call(y,m,f):C,f==null)break e;m=et({},m,f);break e;case 2:Qr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=y,u=m):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);is|=o,t.lanes=o,t.memoizedState=m}}function wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var ml={},Kn=xi(ml),Ya=xi(ml),Xa=xi(ml);function Yi(t){if(t===ml)throw Error(W(174));return t}function zp(t,e){switch($e(Xa,e),$e(Ya,t),$e(Kn,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qh(e,t)}Ge(Kn),$e(Kn,e)}function go(){Ge(Kn),Ge(Ya),Ge(Xa)}function cw(t){Yi(Xa.current);var e=Yi(Kn.current),n=Qh(e,t.type);e!==n&&($e(Ya,t),$e(Kn,n))}function Bp(t){Ya.current===t&&(Ge(Kn),Ge(Ya))}var Je=xi(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dh=[];function $p(){for(var t=0;t<dh.length;t++)dh[t]._workInProgressVersionPrimary=null;dh.length=0}var Ou=br.ReactCurrentDispatcher,hh=br.ReactCurrentBatchConfig,rs=0,Ze=null,pt=null,wt=null,gc=!1,xa=!1,Qa=0,uA=0;function bt(){throw Error(W(321))}function Wp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function Hp(t,e,n,r,i,s){if(rs=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ou.current=t===null||t.memoizedState===null?fA:pA,t=n(r,i),xa){s=0;do{if(xa=!1,Qa=0,25<=s)throw Error(W(301));s+=1,wt=pt=null,e.updateQueue=null,Ou.current=mA,t=n(r,i)}while(xa)}if(Ou.current=yc,e=pt!==null&&pt.next!==null,rs=0,wt=pt=Ze=null,gc=!1,e)throw Error(W(300));return t}function qp(){var t=Qa!==0;return Qa=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ze.memoizedState=wt=t:wt=wt.next=t,wt}function En(){if(pt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Ze.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(W(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Ze.memoizedState=wt=t:wt=wt.next=t}return wt}function Ja(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((rs&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ze.lanes|=h,is|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Dn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ze.lanes|=s,is|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dn(s,e.memoizedState)||(Xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dw(){}function hw(t,e){var n=Ze,r=En(),i=e(),s=!Dn(r.memoizedState,i);if(s&&(r.memoizedState=i,Xt=!0),r=r.queue,Gp(mw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Za(9,pw.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(W(349));rs&30||fw(n,e,i)}return i}function fw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pw(t,e,n,r){e.value=n,e.getSnapshot=r,gw(e)&&yw(t)}function mw(t,e,n){return n(function(){gw(e)&&yw(t)})}function gw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function yw(t){var e=Sr(t,1);e!==null&&Pn(e,t,1,-1)}function Ey(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=hA.bind(null,Ze,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vw(){return En().memoizedState}function Vu(t,e,n,r){var i=$n();Ze.flags|=t,i.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function Jc(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(pt!==null){var o=pt.memoizedState;if(s=o.destroy,r!==null&&Wp(r,o.deps)){i.memoizedState=Za(e,n,s,r);return}}Ze.flags|=t,i.memoizedState=Za(1|e,n,s,r)}function Ty(t,e){return Vu(8390656,8,t,e)}function Gp(t,e){return Jc(2048,8,t,e)}function _w(t,e){return Jc(4,2,t,e)}function ww(t,e){return Jc(4,4,t,e)}function Ew(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tw(t,e,n){return n=n!=null?n.concat([t]):null,Jc(4,4,Ew.bind(null,e,t),n)}function Kp(){}function Iw(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sw(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cw(t,e,n){return rs&21?(Dn(n,e)||(n=P_(),Ze.lanes|=n,is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function cA(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=hh.transition;hh.transition={};try{t(!1),e()}finally{Me=n,hh.transition=r}}function Aw(){return En().memoizedState}function dA(t,e,n){var r=hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kw(t))xw(e,n);else if(n=lw(t,e,n,r),n!==null){var i=$t();Pn(n,t,r,i),Rw(n,e,r)}}function hA(t,e,n){var r=hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kw(t))xw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Dn(l,o)){var u=e.interleaved;u===null?(i.next=i,jp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=lw(t,e,i,r),n!==null&&(i=$t(),Pn(n,t,r,i),Rw(n,e,r))}}function kw(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function xw(t,e){xa=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cp(t,n)}}var yc={readContext:wn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},fA={readContext:wn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:Ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,Ew.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dA.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:Ey,useDebugValue:Kp,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=Ey(!1),e=t[0];return t=cA.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,i=$n();if(Xe){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Et===null)throw Error(W(349));rs&30||fw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ty(mw.bind(null,r,s,t),[t]),r.flags|=2048,Za(9,pw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$n(),e=Et.identifierPrefix;if(Xe){var n=mr,r=pr;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pA={readContext:wn,useCallback:Iw,useContext:wn,useEffect:Gp,useImperativeHandle:Tw,useInsertionEffect:_w,useLayoutEffect:ww,useMemo:Sw,useReducer:fh,useRef:vw,useState:function(){return fh(Ja)},useDebugValue:Kp,useDeferredValue:function(t){var e=En();return Cw(e,pt.memoizedState,t)},useTransition:function(){var t=fh(Ja)[0],e=En().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:hw,useId:Aw,unstable_isNewReconciler:!1},mA={readContext:wn,useCallback:Iw,useContext:wn,useEffect:Gp,useImperativeHandle:Tw,useInsertionEffect:_w,useLayoutEffect:ww,useMemo:Sw,useReducer:ph,useRef:vw,useState:function(){return ph(Ja)},useDebugValue:Kp,useDeferredValue:function(t){var e=En();return pt===null?e.memoizedState=t:Cw(e,pt.memoizedState,t)},useTransition:function(){var t=ph(Ja)[0],e=En().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:hw,useId:Aw,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _f(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zc={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=hi(t),s=vr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ci(t,s,i),e!==null&&(Pn(e,t,i,r),Mu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=hi(t),s=vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ci(t,s,i),e!==null&&(Pn(e,t,i,r),Mu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=hi(t),i=vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ci(t,i,r),e!==null&&(Pn(e,t,r,n),Mu(e,t,r))}};function Iy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ha(n,r)||!Ha(i,s):!0}function Pw(t,e,n){var r=!1,i=wi,s=e.contextType;return typeof s=="object"&&s!==null?s=wn(s):(i=Jt(e)?ts:Lt.current,r=e.contextTypes,s=(r=r!=null)?fo(t,i):wi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zc.enqueueReplaceState(e,e.state,null)}function wf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Up(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wn(s):(s=Jt(e)?ts:Lt.current,i.context=fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_f(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zc.enqueueReplaceState(i,i.state,null),pc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e){try{var n="",r=e;do n+=$S(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ef(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gA=typeof WeakMap=="function"?WeakMap:Map;function bw(t,e,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,bf=r),Ef(t,e)},n}function Nw(t,e,n){n=vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ef(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ef(t,e),typeof r!="function"&&(di===null?di=new Set([this]):di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PA.bind(null,t,e,n),e.then(t,t))}function Ay(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vr(-1,1),e.tag=2,ci(n,e,1))),n.lanes|=1),t)}var yA=br.ReactCurrentOwner,Xt=!1;function Bt(t,e,n,r){e.child=t===null?aw(e,null,n,r):mo(e,t.child,n,r)}function xy(t,e,n,r,i){n=n.render;var s=e.ref;return no(e,i),r=Hp(t,e,n,r,s,i),n=qp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(Xe&&n&&Dp(e),e.flags|=1,Bt(t,e,r,i),e.child)}function Ry(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!nm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dw(t,e,s,r,i)):(t=Uu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(o,r)&&t.ref===e.ref)return Cr(t,e,i)}return e.flags|=1,t=fi(s,r),t.ref=e.ref,t.return=e,e.child=t}function Dw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ha(s,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Cr(t,e,i)}return Tf(t,e,n,r,i)}function Mw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Qs,sn),sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Qs,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(Qs,sn),sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,$e(Qs,sn),sn|=r;return Bt(t,e,i,n),e.child}function Ow(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tf(t,e,n,r,i){var s=Jt(n)?ts:Lt.current;return s=fo(e,s),no(e,i),n=Hp(t,e,n,r,s,i),r=qp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(Xe&&r&&Dp(e),e.flags|=1,Bt(t,e,n,i),e.child)}function Py(t,e,n,r,i){if(Jt(n)){var s=!0;uc(e)}else s=!1;if(no(e,i),e.stateNode===null)Lu(t,e),Pw(e,n,r),wf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=wn(c):(c=Jt(n)?ts:Lt.current,c=fo(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Sy(e,o,r,c),Qr=!1;var f=e.memoizedState;o.state=f,pc(e,r,o,i),u=e.memoizedState,l!==r||f!==u||Qt.current||Qr?(typeof h=="function"&&(_f(e,n,h,r),u=e.memoizedState),(l=Qr||Iy(e,n,l,r,f,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Cn(e.type,l),o.props=c,m=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=wn(u):(u=Jt(n)?ts:Lt.current,u=fo(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==u)&&Sy(e,o,r,u),Qr=!1,f=e.memoizedState,o.state=f,pc(e,r,o,i);var C=e.memoizedState;l!==m||f!==C||Qt.current||Qr?(typeof y=="function"&&(_f(e,n,y,r),C=e.memoizedState),(c=Qr||Iy(e,n,c,r,f,C,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return If(t,e,n,r,s,i)}function If(t,e,n,r,i,s){Ow(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&my(e,n,!1),Cr(t,e,s);r=e.stateNode,yA.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,s),e.child=mo(e,null,l,s)):Bt(t,e,l,s),e.memoizedState=r.state,i&&my(e,n,!0),e.child}function Vw(t){var e=t.stateNode;e.pendingContext?py(t,e.pendingContext,e.pendingContext!==e.context):e.context&&py(t,e.context,!1),zp(t,e.containerInfo)}function by(t,e,n,r,i){return po(),Op(i),e.flags|=256,Bt(t,e,n,r),e.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lw(t,e,n){var r=e.pendingProps,i=Je.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(Je,i&1),t===null)return yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nd(o,r,0,null),t=Zi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Cf(n),e.memoizedState=Sf,t):Yp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return vA(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=fi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=fi(l,s):(s=Zi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sf,r}return s=t.child,t=s.sibling,r=fi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yp(t,e){return e=nd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function du(t,e,n,r){return r!==null&&Op(r),mo(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(W(422))),du(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nd({mode:"visible",children:r.children},i,0,null),s=Zi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=Cf(o),e.memoizedState=Sf,s);if(!(e.mode&1))return du(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=mh(s,r,void 0),du(t,e,o,r)}if(l=(o&t.childLanes)!==0,Xt||l){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(t,i),Pn(r,t,i,-1))}return tm(),r=mh(Error(W(421))),du(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,an=ui(i.nextSibling),un=e,Xe=!0,kn=null,t!==null&&(mn[gn++]=pr,mn[gn++]=mr,mn[gn++]=ns,pr=t.id,mr=t.overflow,ns=e),e=Yp(e,r.children),e.flags|=4096,e)}function Ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vf(t.return,e,n)}function gh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Fw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,n,e);else if(t.tag===19)Ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gh(e,!0,n,null,s);break;case"together":gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _A(t,e,n){switch(e.tag){case 3:Vw(e),po();break;case 5:cw(e);break;case 1:Jt(e.type)&&uc(e);break;case 4:zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(hc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?Lw(t,e,n):($e(Je,Je.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,Mw(t,e,n)}return Cr(t,e,n)}var jw,Af,Uw,zw;jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Af=function(){};Uw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yi(Kn.current);var s=null;switch(n){case"input":i=Gh(t,i),r=Gh(t,r),s=[];break;case"select":i=et({},i,{value:void 0}),r=et({},r,{value:void 0}),s=[];break;case"textarea":i=Xh(t,i),r=Xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}Jh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&qe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zw=function(t,e,n,r){n!==r&&(e.flags|=4)};function la(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wA(t,e,n){var r=e.pendingProps;switch(Mp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Jt(e.type)&&lc(),Nt(e),null;case 3:return r=e.stateNode,go(),Ge(Qt),Ge(Lt),$p(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(Mf(kn),kn=null))),Af(t,e),Nt(e),null;case 5:Bp(e);var i=Yi(Xa.current);if(n=e.type,t!==null&&e.stateNode!=null)Uw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Nt(e),null}if(t=Yi(Kn.current),uu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Ka]=s,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<ma.length;i++)qe(ma[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":zg(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":$g(r,s),qe("invalid",r)}Jh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,l,t),i=["children",""+l]):Fa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":eu(r),Bg(r,s,!0);break;case"textarea":eu(r),Wg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[Ka]=r,jw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zh(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ma.length;i++)qe(ma[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":zg(t,r),i=Gh(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=et({},r,{value:void 0}),qe("invalid",t);break;case"textarea":$g(t,r),i=Xh(t,r),qe("invalid",t);break;default:i=r}Jh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?v_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&g_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ja(t,u):typeof u=="number"&&ja(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&qe("scroll",t):u!=null&&_p(t,s,u,o))}switch(n){case"input":eu(t),Bg(t,r,!1);break;case"textarea":eu(t),Wg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_i(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Js(t,!!r.multiple,s,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)zw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Yi(Xa.current),Yi(Kn.current),uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Nt(e),null;case 13:if(Ge(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&an!==null&&e.mode&1&&!(e.flags&128))sw(),po(),e.flags|=98560,s=!1;else if(s=uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Hn]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),s=!1}else kn!==null&&(Mf(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?mt===0&&(mt=3):tm())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return go(),Af(t,e),t===null&&qa(e.stateNode.containerInfo),Nt(e),null;case 10:return Fp(e.type._context),Nt(e),null;case 17:return Jt(e.type)&&lc(),Nt(e),null;case 19:if(Ge(Je),s=e.memoizedState,s===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)la(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mc(t),o!==null){for(e.flags|=128,la(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Je,Je.current&1|2),e.child}t=t.sibling}s.tail!==null&&st()>vo&&(e.flags|=128,r=!0,la(s,!1),e.lanes=4194304)}else{if(!r)if(t=mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),la(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xe)return Nt(e),null}else 2*st()-s.renderingStartTime>vo&&n!==1073741824&&(e.flags|=128,r=!0,la(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,n=Je.current,$e(Je,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return em(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?sn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function EA(t,e){switch(Mp(e),e.tag){case 1:return Jt(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),Ge(Qt),Ge(Lt),$p(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bp(e),null;case 13:if(Ge(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Je),null;case 4:return go(),null;case 10:return Fp(e.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var hu=!1,Ot=!1,TA=typeof WeakSet=="function"?WeakSet:Set,J=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function kf(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Dy=!1;function IA(t,e){if(cf=ic,t=q_(),Np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,m=t,f=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++h===r&&(u=o),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(df={focusedElem:t,selectionRange:n},ic=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var I=C.memoizedProps,k=C.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:Cn(e.type,I),k);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(N){rt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return C=Dy,Dy=!1,C}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kf(e,n,s)}i=i.next}while(i!==r)}}function ed(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bw(t){var e=t.alternate;e!==null&&(t.alternate=null,Bw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Ka],delete e[pf],delete e[sA],delete e[oA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $w(t){return t.tag===5||t.tag===3||t.tag===4}function My(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$w(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}function Pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}var It=null,An=!1;function qr(t,e,n){for(n=n.child;n!==null;)Ww(t,e,n),n=n.sibling}function Ww(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 5:Ot||Xs(n,e);case 6:var r=It,i=An;It=null,qr(t,e,n),It=r,An=i,It!==null&&(An?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(An?(t=It,n=n.stateNode,t.nodeType===8?uh(t.parentNode,n):t.nodeType===1&&uh(t,n),$a(t)):uh(It,n.stateNode));break;case 4:r=It,i=An,It=n.stateNode.containerInfo,An=!0,qr(t,e,n),It=r,An=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kf(n,e,o),i=i.next}while(i!==r)}qr(t,e,n);break;case 1:if(!Ot&&(Xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rt(n,e,l)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,qr(t,e,n),Ot=r):qr(t,e,n);break;default:qr(t,e,n)}}function Oy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TA),e.forEach(function(r){var i=NA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,An=!1;break e;case 3:It=l.stateNode.containerInfo,An=!0;break e;case 4:It=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(It===null)throw Error(W(160));Ww(s,o,i),It=null,An=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){rt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hw(e,t),e=e.sibling}function Hw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),Bn(t),r&4){try{Ra(3,t,t.return),ed(3,t)}catch(I){rt(t,t.return,I)}try{Ra(5,t,t.return)}catch(I){rt(t,t.return,I)}}break;case 1:Sn(e,t),Bn(t),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(Sn(e,t),Bn(t),r&512&&n!==null&&Xs(n,n.return),t.flags&32){var i=t.stateNode;try{ja(i,"")}catch(I){rt(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&f_(i,s),Zh(l,o);var c=Zh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?v_(i,m):h==="dangerouslySetInnerHTML"?g_(i,m):h==="children"?ja(i,m):_p(i,h,m,c)}switch(l){case"input":Kh(i,s);break;case"textarea":p_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Js(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?Js(i,!!s.multiple,s.defaultValue,!0):Js(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ka]=s}catch(I){rt(t,t.return,I)}}break;case 6:if(Sn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){rt(t,t.return,I)}}break;case 3:if(Sn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(I){rt(t,t.return,I)}break;case 4:Sn(e,t),Bn(t);break;case 13:Sn(e,t),Bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jp=st())),r&4&&Oy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||h,Sn(e,t),Ot=c):Sn(e,t),Bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(m=J=h;J!==null;){switch(f=J,y=f.child,f.tag){case 0:case 11:case 14:case 15:Ra(4,f,f.return);break;case 1:Xs(f,f.return);var C=f.stateNode;if(typeof C.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(I){rt(r,n,I)}}break;case 5:Xs(f,f.return);break;case 22:if(f.memoizedState!==null){Ly(m);continue}}y!==null?(y.return=f,J=y):Ly(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=y_("display",o))}catch(I){rt(t,t.return,I)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(I){rt(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Sn(e,t),Bn(t),r&4&&Oy(t);break;case 21:break;default:Sn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($w(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ja(i,""),r.flags&=-33);var s=My(t);Pf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=My(t);Rf(t,l,o);break;default:throw Error(W(161))}}catch(u){rt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SA(t,e,n){J=t,qw(t)}function qw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ot;l=hu;var c=Ot;if(hu=o,(Ot=u)&&!c)for(J=i;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?Fy(i):u!==null?(u.return=o,J=u):Fy(i);for(;s!==null;)J=s,qw(s),s=s.sibling;J=i,hu=l,Ot=c}Vy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):Vy(t)}}function Vy(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||ed(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&$a(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ot||e.flags&512&&xf(e)}catch(f){rt(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Ly(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Fy(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ed(4,e)}catch(u){rt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){rt(e,i,u)}}var s=e.return;try{xf(e)}catch(u){rt(e,s,u)}break;case 5:var o=e.return;try{xf(e)}catch(u){rt(e,o,u)}}}catch(u){rt(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var CA=Math.ceil,vc=br.ReactCurrentDispatcher,Xp=br.ReactCurrentOwner,_n=br.ReactCurrentBatchConfig,Re=0,Et=null,at=null,At=0,sn=0,Qs=xi(0),mt=0,el=null,is=0,td=0,Qp=0,Pa=null,Kt=null,Jp=0,vo=1/0,dr=null,_c=!1,bf=null,di=null,fu=!1,ii=null,wc=0,ba=0,Nf=null,Fu=-1,ju=0;function $t(){return Re&6?st():Fu!==-1?Fu:Fu=st()}function hi(t){return t.mode&1?Re&2&&At!==0?At&-At:lA.transition!==null?(ju===0&&(ju=P_()),ju):(t=Me,t!==0||(t=window.event,t=t===void 0?16:L_(t.type)),t):1}function Pn(t,e,n,r){if(50<ba)throw ba=0,Nf=null,Error(W(185));hl(t,n,r),(!(Re&2)||t!==Et)&&(t===Et&&(!(Re&2)&&(td|=n),mt===4&&Zr(t,At)),Zt(t,r),n===1&&Re===0&&!(e.mode&1)&&(vo=st()+500,Qc&&Ri()))}function Zt(t,e){var n=t.callbackNode;lC(t,e);var r=rc(t,t===Et?At:0);if(r===0)n!==null&&Gg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gg(n),e===1)t.tag===0?aA(jy.bind(null,t)):nw(jy.bind(null,t)),rA(function(){!(Re&6)&&Ri()}),n=null;else{switch(b_(r)){case 1:n=Sp;break;case 4:n=x_;break;case 16:n=nc;break;case 536870912:n=R_;break;default:n=nc}n=eE(n,Gw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gw(t,e){if(Fu=-1,ju=0,Re&6)throw Error(W(327));var n=t.callbackNode;if(ro()&&t.callbackNode!==n)return null;var r=rc(t,t===Et?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ec(t,r);else{e=r;var i=Re;Re|=2;var s=Yw();(Et!==t||At!==e)&&(dr=null,vo=st()+500,Ji(t,e));do try{xA();break}catch(l){Kw(t,l)}while(!0);Lp(),vc.current=s,Re=i,at!==null?e=0:(Et=null,At=0,e=mt)}if(e!==0){if(e===2&&(i=sf(t),i!==0&&(r=i,e=Df(t,i))),e===1)throw n=el,Ji(t,0),Zr(t,r),Zt(t,st()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!AA(i)&&(e=Ec(t,r),e===2&&(s=sf(t),s!==0&&(r=s,e=Df(t,s))),e===1))throw n=el,Ji(t,0),Zr(t,r),Zt(t,st()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Hi(t,Kt,dr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=Jp+500-st(),10<e)){if(rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ff(Hi.bind(null,t,Kt,dr),e);break}Hi(t,Kt,dr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CA(r/1960))-r,10<r){t.timeoutHandle=ff(Hi.bind(null,t,Kt,dr),r);break}Hi(t,Kt,dr);break;case 5:Hi(t,Kt,dr);break;default:throw Error(W(329))}}}return Zt(t,st()),t.callbackNode===n?Gw.bind(null,t):null}function Df(t,e){var n=Pa;return t.current.memoizedState.isDehydrated&&(Ji(t,e).flags|=256),t=Ec(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Mf(e)),t}function Mf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function AA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~Qp,e&=~td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function jy(t){if(Re&6)throw Error(W(327));ro();var e=rc(t,0);if(!(e&1))return Zt(t,st()),null;var n=Ec(t,e);if(t.tag!==0&&n===2){var r=sf(t);r!==0&&(e=r,n=Df(t,r))}if(n===1)throw n=el,Ji(t,0),Zr(t,e),Zt(t,st()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,Kt,dr),Zt(t,st()),null}function Zp(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(vo=st()+500,Qc&&Ri())}}function ss(t){ii!==null&&ii.tag===0&&!(Re&6)&&ro();var e=Re;Re|=1;var n=_n.transition,r=Me;try{if(_n.transition=null,Me=1,t)return t()}finally{Me=r,_n.transition=n,Re=e,!(Re&6)&&Ri()}}function em(){sn=Qs.current,Ge(Qs)}function Ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nA(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Mp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:go(),Ge(Qt),Ge(Lt),$p();break;case 5:Bp(r);break;case 4:go();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:Fp(r.type._context);break;case 22:case 23:em()}n=n.return}if(Et=t,at=t=fi(t.current,null),At=sn=e,mt=0,el=null,Qp=td=is=0,Kt=Pa=null,Ki!==null){for(e=0;e<Ki.length;e++)if(n=Ki[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ki=null}return t}function Kw(t,e){do{var n=at;try{if(Lp(),Ou.current=yc,gc){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gc=!1}if(rs=0,wt=pt=Ze=null,xa=!1,Qa=0,Xp.current=null,n===null||n.return===null){mt=1,el=e,at=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=At,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Ay(o);if(y!==null){y.flags&=-257,ky(y,o,l,s,e),y.mode&1&&Cy(s,c,e),e=y,u=c;var C=e.updateQueue;if(C===null){var I=new Set;I.add(u),e.updateQueue=I}else C.add(u);break e}else{if(!(e&1)){Cy(s,c,e),tm();break e}u=Error(W(426))}}else if(Xe&&l.mode&1){var k=Ay(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ky(k,o,l,s,e),Op(yo(u,l));break e}}s=u=yo(u,l),mt!==4&&(mt=2),Pa===null?Pa=[s]:Pa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=bw(s,u,e);_y(s,w);break e;case 1:l=u;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(di===null||!di.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Nw(s,l,e);_y(s,N);break e}}s=s.return}while(s!==null)}Qw(n)}catch(L){e=L,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Yw(){var t=vc.current;return vc.current=yc,t===null?yc:t}function tm(){(mt===0||mt===3||mt===2)&&(mt=4),Et===null||!(is&268435455)&&!(td&268435455)||Zr(Et,At)}function Ec(t,e){var n=Re;Re|=2;var r=Yw();(Et!==t||At!==e)&&(dr=null,Ji(t,e));do try{kA();break}catch(i){Kw(t,i)}while(!0);if(Lp(),Re=n,vc.current=r,at!==null)throw Error(W(261));return Et=null,At=0,mt}function kA(){for(;at!==null;)Xw(at)}function xA(){for(;at!==null&&!ZS();)Xw(at)}function Xw(t){var e=Zw(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?Qw(t):at=e,Xp.current=null}function Qw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EA(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,at=null;return}}else if(n=wA(n,e,sn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);mt===0&&(mt=5)}function Hi(t,e,n){var r=Me,i=_n.transition;try{_n.transition=null,Me=1,RA(t,e,n,r)}finally{_n.transition=i,Me=r}return null}function RA(t,e,n,r){do ro();while(ii!==null);if(Re&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(uC(t,s),t===Et&&(at=Et=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,eE(nc,function(){return ro(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var o=Me;Me=1;var l=Re;Re|=4,Xp.current=null,IA(t,n),Hw(n,t),YC(df),ic=!!cf,df=cf=null,t.current=n,SA(n),eC(),Re=l,Me=o,_n.transition=s}else t.current=n;if(fu&&(fu=!1,ii=t,wc=i),s=t.pendingLanes,s===0&&(di=null),rC(n.stateNode),Zt(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_c)throw _c=!1,t=bf,bf=null,t;return wc&1&&t.tag!==0&&ro(),s=t.pendingLanes,s&1?t===Nf?ba++:(ba=0,Nf=t):ba=0,Ri(),null}function ro(){if(ii!==null){var t=b_(wc),e=_n.transition,n=Me;try{if(_n.transition=null,Me=16>t?16:t,ii===null)var r=!1;else{if(t=ii,ii=null,wc=0,Re&6)throw Error(W(331));var i=Re;for(Re|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(J=c;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Ra(8,h,s)}var m=h.child;if(m!==null)m.return=h,J=m;else for(;J!==null;){h=J;var f=h.sibling,y=h.return;if(Bw(h),h===c){J=null;break}if(f!==null){f.return=y,J=f;break}J=y}}}var C=s.alternate;if(C!==null){var I=C.child;if(I!==null){C.child=null;do{var k=I.sibling;I.sibling=null,I=k}while(I!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,J=w;break e}J=s.return}}var _=t.current;for(J=_;J!==null;){o=J;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,J=A;else e:for(o=_;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ed(9,l)}}catch(L){rt(l,l.return,L)}if(l===o){J=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,J=N;break e}J=l.return}}if(Re=i,Ri(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(qc,t)}catch{}r=!0}return r}finally{Me=n,_n.transition=e}}return!1}function Uy(t,e,n){e=yo(n,e),e=bw(t,e,1),t=ci(t,e,1),e=$t(),t!==null&&(hl(t,1,e),Zt(t,e))}function rt(t,e,n){if(t.tag===3)Uy(t,t,n);else for(;e!==null;){if(e.tag===3){Uy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(di===null||!di.has(r))){t=yo(n,t),t=Nw(e,t,1),e=ci(e,t,1),t=$t(),e!==null&&(hl(e,1,t),Zt(e,t));break}}e=e.return}}function PA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(At&n)===n&&(mt===4||mt===3&&(At&130023424)===At&&500>st()-Jp?Ji(t,0):Qp|=n),Zt(t,e)}function Jw(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=$t();t=Sr(t,e),t!==null&&(hl(t,e,n),Zt(t,n))}function bA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jw(t,n)}function NA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Jw(t,n)}var Zw;Zw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,_A(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,Xe&&e.flags&1048576&&rw(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lu(t,e),t=e.pendingProps;var i=fo(e,Lt.current);no(e,n),i=Hp(null,e,r,t,i,n);var s=qp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(s=!0,uc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Up(e),i.updater=Zc,e.stateNode=i,i._reactInternals=e,wf(e,r,t,n),e=If(null,e,r,!0,s,n)):(e.tag=0,Xe&&s&&Dp(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MA(r),t=Cn(r,t),i){case 0:e=Tf(null,e,r,t,n);break e;case 1:e=Py(null,e,r,t,n);break e;case 11:e=xy(null,e,r,t,n);break e;case 14:e=Ry(null,e,r,Cn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),Tf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),Py(t,e,r,i,n);case 3:e:{if(Vw(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uw(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=yo(Error(W(423)),e),e=by(t,e,r,n,i);break e}else if(r!==i){i=yo(Error(W(424)),e),e=by(t,e,r,n,i);break e}else for(an=ui(e.stateNode.containerInfo.firstChild),un=e,Xe=!0,kn=null,n=aw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),r===i){e=Cr(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return cw(e),t===null&&yf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hf(r,i)?o=null:s!==null&&hf(r,s)&&(e.flags|=32),Ow(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&yf(e),null;case 13:return Lw(t,e,n);case 4:return zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mo(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),xy(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(hc,r._currentValue),r._currentValue=o,s!==null)if(Dn(s.value,o)){if(s.children===i.children&&!Qt.current){e=Cr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=vr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),vf(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),vf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,no(e,n),i=wn(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Cn(r,e.pendingProps),i=Cn(r.type,i),Ry(t,e,r,i,n);case 15:return Dw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),Lu(t,e),e.tag=1,Jt(r)?(t=!0,uc(e)):t=!1,no(e,n),Pw(e,r,i),wf(e,r,i,n),If(null,e,r,!0,t,n);case 19:return Fw(t,e,n);case 22:return Mw(t,e,n)}throw Error(W(156,e.tag))};function eE(t,e){return k_(t,e)}function DA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new DA(t,e,n,r)}function nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MA(t){if(typeof t=="function")return nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ep)return 11;if(t===Tp)return 14}return 2}function fi(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")nm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zs:return Zi(n.children,i,s,e);case wp:o=8,i|=8;break;case $h:return t=vn(12,n,e,i|2),t.elementType=$h,t.lanes=s,t;case Wh:return t=vn(13,n,e,i),t.elementType=Wh,t.lanes=s,t;case Hh:return t=vn(19,n,e,i),t.elementType=Hh,t.lanes=s,t;case c_:return nd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l_:o=10;break e;case u_:o=9;break e;case Ep:o=11;break e;case Tp:o=14;break e;case Xr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=vn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zi(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function nd(t,e,n,r){return t=vn(22,t,r,e),t.elementType=c_,t.lanes=n,t.stateNode={isHidden:!1},t}function yh(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function vh(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rm(t,e,n,r,i,s,o,l,u){return t=new OA(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Up(s),t}function VA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tE(t){if(!t)return wi;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Jt(n))return tw(t,n,e)}return e}function nE(t,e,n,r,i,s,o,l,u){return t=rm(n,r,!0,t,i,s,o,l,u),t.context=tE(null),n=t.current,r=$t(),i=hi(n),s=vr(r,i),s.callback=e??null,ci(n,s,i),t.current.lanes=i,hl(t,i,r),Zt(t,r),t}function rd(t,e,n,r){var i=e.current,s=$t(),o=hi(i);return n=tE(n),e.context===null?e.context=n:e.pendingContext=n,e=vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ci(i,e,o),t!==null&&(Pn(t,i,o,s),Mu(t,i,o)),o}function Tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){zy(t,e),(t=t.alternate)&&zy(t,e)}function LA(){return null}var rE=typeof reportError=="function"?reportError:function(t){console.error(t)};function sm(t){this._internalRoot=t}id.prototype.render=sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));rd(t,e,null,null)};id.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){rd(null,t,null,null)}),e[Ir]=null}};function id(t){this._internalRoot=t}id.prototype.unstable_scheduleHydration=function(t){if(t){var e=M_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&V_(t)}};function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function By(){}function FA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tc(o);s.call(c)}}var o=nE(e,r,t,0,null,!1,!1,"",By);return t._reactRootContainer=o,t[Ir]=o.current,qa(t.nodeType===8?t.parentNode:t),ss(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Tc(u);l.call(c)}}var u=rm(t,0,!1,null,null,!1,!1,"",By);return t._reactRootContainer=u,t[Ir]=u.current,qa(t.nodeType===8?t.parentNode:t),ss(function(){rd(e,u,n,r)}),u}function od(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Tc(o);l.call(u)}}rd(e,o,t,i)}else o=FA(n,e,t,i,r);return Tc(o)}N_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(Cp(e,n|1),Zt(e,st()),!(Re&6)&&(vo=st()+500,Ri()))}break;case 13:ss(function(){var r=Sr(t,1);if(r!==null){var i=$t();Pn(r,t,1,i)}}),im(t,1)}};Ap=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=$t();Pn(e,t,134217728,n)}im(t,134217728)}};D_=function(t){if(t.tag===13){var e=hi(t),n=Sr(t,e);if(n!==null){var r=$t();Pn(n,t,e,r)}im(t,e)}};M_=function(){return Me};O_=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};tf=function(t,e,n){switch(e){case"input":if(Kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xc(r);if(!i)throw Error(W(90));h_(r),Kh(r,i)}}}break;case"textarea":p_(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};E_=Zp;T_=ss;var jA={usingClientEntryPoint:!1,Events:[pl,Hs,Xc,__,w_,Zp]},ua={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UA={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C_(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||LA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{qc=pu.inject(UA),Gn=pu}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jA;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!om(e))throw Error(W(200));return VA(t,e,null,n)};dn.createRoot=function(t,e){if(!om(t))throw Error(W(299));var n=!1,r="",i=rE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rm(t,1,!1,null,null,n,!1,r,i),t[Ir]=e.current,qa(t.nodeType===8?t.parentNode:t),new sm(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=C_(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return ss(t)};dn.hydrate=function(t,e,n){if(!sd(e))throw Error(W(200));return od(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!om(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nE(e,null,t,1,n??null,i,!1,s,o),t[Ir]=e.current,qa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new id(e)};dn.render=function(t,e,n){if(!sd(e))throw Error(W(200));return od(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!sd(t))throw Error(W(40));return t._reactRootContainer?(ss(function(){od(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};dn.unstable_batchedUpdates=Zp;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sd(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return od(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function iE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iE)}catch(t){console.error(t)}}iE(),i_.exports=dn;var am=i_.exports;const zA=H0(am);var sE,$y=am;sE=$y.createRoot,$y.hydrateRoot;function BA(){const[t,e]=x.useState({x:0,y:0}),[n,r]=x.useState(1),[i,s]=x.useState(!1),[o,l]=x.useState(null),u=x.useCallback((f,y)=>{var A;if(f.ctrlKey)return;f.preventDefault();const C=(A=y.current)==null?void 0:A.getBoundingClientRect();if(!C)return;const I=f.clientX-C.left,k=f.clientY-C.top,w=n;let _=n*(f.deltaY<0?1.1:.9);_=Math.max(.2,Math.min(3,_)),e(N=>({x:(N.x-I)*(_/w)+I,y:(N.y-k)*(_/w)+k})),r(_)},[n]),c=x.useCallback((f,y)=>{s(!0),l({x:f,y})},[]),h=x.useCallback((f,y)=>{e(C=>({x:C.x+(f-((o==null?void 0:o.x)??f)),y:C.y+(y-((o==null?void 0:o.y)??y))})),l({x:f,y})},[o]),m=x.useCallback(()=>{s(!1),l(null)},[]);return{pan:t,setPan:e,zoom:n,setZoom:r,isPanning:i,setIsPanning:s,panStart:o,setPanStart:l,handleWheel:u,startPan:c,movePan:h,endPan:m}}function Wy({e:t,whiteboardRef:e,pan:n,zoom:r,activeTool:i,setIsPanning:s,setPanStart:o,setMarquee:l,setIsDrawing:u,setCurrentPath:c,setIsDrawingArrow:h,setCurrentArrow:m,getRandomGradient:f}){if(t.button===2){s(!0),o({x:t.clientX,y:t.clientY});return}if(t.button===0){const y=t.target,C=y.className||"",I=typeof C=="string"?C:"",k=I.includes("cursor-se-resize"),w=y.tagName==="BUTTON"||I.includes("control");if(!k&&!w){if(!e.current)return;const _=e.current.getBoundingClientRect(),A=(t.clientX-_.left-n.x)/r,N=(t.clientY-_.top-n.y)/r;if(i==="pen"){u(!0);const L=f(),U="pen-gradient-"+Date.now().toString()+Math.random().toString(36).slice(2),v={id:Date.now().toString()+Math.random().toString(36).slice(2),points:[{x:A,y:N}],color:U,strokeWidth:2,createdAt:Date.now(),gradient:L};c(v);return}if(t.shiftKey){h(!0);const L=f();m({id:Date.now().toString()+Math.random().toString(36).slice(2),startX:A,startY:N,endX:A,endY:N,gradient:L.value,strokeStyle:"solid"});return}l({startX:A,startY:N,endX:A,endY:N})}}}function $A({e:t,whiteboardRef:e,pan:n,zoom:r,isPanning:i,panStart:s,setPan:o,setPanStart:l,isDrawing:u,currentPath:c,activeTool:h,setCurrentPath:m,isDrawingArrow:f,currentArrow:y,setCurrentArrow:C,draggingArrow:I,dragArrowStart:k,setArrows:w,selectedArrows:_,draggingImage:A,dragImageStart:N,setImages:L,resizingBox:U,resizeStart:v,setTextBoxesResize:g,resizingShape:R,setShapesResize:S,resizingImage:D,setImagesResize:M,rotatingBox:P,rotateStart:be,setTextBoxesRotate:Le,setLastMousePos:ce,marquee:Ae,setMarquee:j}){var K,te,ve,pe,he;if(i&&s){o({x:n.x+(t.clientX-s.x),y:n.y+(t.clientY-s.y)}),l({x:t.clientX,y:t.clientY});return}if(u&&c&&h==="pen"){const ne=(K=e.current)==null?void 0:K.getBoundingClientRect();if(!ne)return;const ae=(t.clientX-ne.left-n.x)/r,ge=(t.clientY-ne.top-n.y)/r;m(H=>H?{...H,points:[...H.points,{x:ae,y:ge}]}:null);return}if(f&&y){const ne=(te=e.current)==null?void 0:te.getBoundingClientRect();if(!ne)return;const ae=(t.clientX-ne.left-n.x)/r,ge=(t.clientY-ne.top-n.y)/r;C({...y,endX:ae,endY:ge});return}if(I&&k){const ne=(ve=e.current)==null?void 0:ve.getBoundingClientRect();if(!ne)return;const ae=(t.clientX-ne.left-n.x)/r,ge=(t.clientY-ne.top-n.y)/r,H=ae-k.mouseX,Ee=ge-k.mouseY;w(xe=>xe.map(me=>{if(_.includes(me.id)&&k.arrowPositions[me.id]){const Ne=k.arrowPositions[me.id];return{...me,startX:Ne.startX+H,startY:Ne.startY+Ee,endX:Ne.endX+H,endY:Ne.endY+Ee}}return me}));return}if(A&&N){const ne=(pe=e.current)==null?void 0:pe.getBoundingClientRect();if(!ne)return;const ae=(t.clientX-ne.left-n.x)/r,ge=(t.clientY-ne.top-n.y)/r;L(H=>H.map(Ee=>Ee.id===A?{...Ee,x:ae-N.offsetX,y:ge-N.offsetY}:Ee));return}if(P){const ne=(he=e.current)==null?void 0:he.getBoundingClientRect();if(!ne)return;const ae=(t.clientX-ne.left-n.x)/r,ge=(t.clientY-ne.top-n.y)/r,Ee=Math.atan2(ge-be.centerY,ae-be.centerX)-be.startAngle,xe=be.initialRotation+Ee*(180/Math.PI);Le(me=>me.map(Ne=>Ne.id===P?{...Ne,rotation:xe}:Ne));return}if(U){const ne=t.clientX-v.x,ae=t.clientY-v.y,ge=(v.width+ne)/v.width,H=(v.height+ae)/v.height,Ee=Math.max(ge,H),xe=Math.max(120,v.width*Ee),me=Math.max(30,v.height*Ee);g(Ne=>Ne.map(jt=>jt.id===U?{...jt,width:xe,height:me,fontSize:v.fontSize*Ee}:jt));return}if(R){const ne=t.clientX-v.x,ae=t.clientY-v.y,ge=Math.max(50,v.width+ne),H=Math.max(50,v.height+ae);S(Ee=>Ee.map(xe=>xe.id===R?{...xe,width:ge,height:H}:xe));return}if(D){const ne=t.clientX-v.x,ae=t.clientY-v.y,ge=Math.max(50,v.width+ne),H=Math.max(50,v.height+ae);M(Ee=>Ee.map(xe=>xe.id===D?{...xe,width:ge,height:H}:xe));return}if(e.current){const ne=e.current.getBoundingClientRect();ce({x:(t.clientX-ne.left-n.x)/r,y:(t.clientY-ne.top-n.y)/r}),Ae&&j(ae=>ae?{...ae,endX:(t.clientX-ne.left-n.x)/r,endY:(t.clientY-ne.top-n.y)/r}:null)}}function Hy({isDrawing:t,currentPath:e,setDrawingPaths:n,setCurrentPath:r,setIsDrawing:i,isDrawingArrow:s,currentArrow:o,setArrows:l,setCurrentArrow:u,setIsDrawingArrow:c,setResizingBox:h,setResizingShape:m,setResizingImage:f,setRotatingBox:y,draggingImage:C,setDraggingImage:I,setDragImageStart:k,draggingArrow:w,setDraggingArrow:_,setDragArrowStart:A,isPanning:N,setIsPanning:L,setPanStart:U,marquee:v,whiteboardRef:g,textBoxes:R,shapes:S,arrows:D,mindMapNodes:M,setSelectedBoxes:P,setSelectedShapes:be,setSelectedArrows:Le,setSelectedMindMapNodes:ce,setMarquee:Ae,endDragCallback:j}){if(t&&e&&(n(K=>[...K,e]),r(null),i(!1)),s&&o&&l&&u&&(l(K=>[...K,o]),u(null),c&&c(!1)),h(null),m(null),f(null),y(null),j&&j(),C&&(I(null),k(null)),w&&_&&A&&(_(null),A(null)),N&&(L(!1),U(null)),v&&g.current){const K=Math.min(v.startX,v.endX),te=Math.min(v.startY,v.endY),ve=Math.max(v.startX,v.endX),pe=Math.max(v.startY,v.endY),he=R.filter(H=>{const Ee=H.x,xe=H.y,me=H.x+H.width,Ne=H.y+H.height;return me>K&&Ee<ve&&Ne>te&&xe<pe}).map(H=>H.id),ne=S.filter(H=>{const Ee=H.x,xe=H.y,me=H.x+H.width,Ne=H.y+H.height;return me>K&&Ee<ve&&Ne>te&&xe<pe}).map(H=>H.id),ae=M.filter(H=>{const Ee=H.x,xe=H.y,me=H.x+H.width,Ne=H.y+H.height;return me>K&&Ee<ve&&Ne>te&&xe<pe}).map(H=>H.id),ge=D?D.filter(H=>{const Ee=Math.min(H.startX,H.endX),xe=Math.min(H.startY,H.endY),me=Math.max(H.startX,H.endX),Ne=Math.max(H.startY,H.endY);return me>K&&Ee<ve&&Ne>te&&xe<pe}).map(H=>H.id):[];P(he),be(ne),Le&&Le(ge),ce(ae),Ae(null)}}function Ic(t,e,n={}){const{fontFamily:r='system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',isBold:i=!1,isItalic:s=!1,lineHeight:o=1.1,padding:l=16}=n,c=document.createElement("canvas").getContext("2d");if(!c)return{width:0,height:0};const h=i?"bold":"normal",m=s?"italic":"normal";c.font=`${m} ${h} ${e}px ${r}`;const f=t.split(`
`),y=f.map(I=>c.measureText(I).width);return{width:(y.length>0?Math.max(...y):0)+l,height:f.length*e*o+l}}function WA(t,e){const n=x.useCallback(o=>{t(l=>l.map(u=>u.id===o?{...u,isEditing:!0}:u)),e([])},[t,e]),r=x.useCallback((o,l)=>{l.stopPropagation(),l.ctrlKey||l.metaKey?e(u=>u.includes(o)?u.filter(c=>c!==o):[...u,o]):e([o])},[e]),i=x.useCallback((o,l)=>{t(u=>u.map(c=>{if(c.id!==o)return c;const h=Ic(l,c.fontSize,{isBold:c.isBold,isItalic:c.isItalic});return{...c,text:l,width:h.width,height:h.height}}))},[t]),s=x.useCallback(o=>{t(l=>l.map(u=>u.id===o?{...u,isEditing:!1}:u))},[t]);return{handleTextDoubleClick:n,handleTextClick:r,handleTextChange:i,handleTextBlur:s}}function HA(t,e,n,r,i){const s=x.useCallback(m=>{e(f=>f.map(y=>y.id===m?{...y,isEditing:!0}:y))},[e]),o=x.useCallback(m=>{e(f=>f.map(y=>y.id===m?{...y,isEditing:!1}:y))},[e]),l=x.useCallback((m,f)=>{e(y=>y.map(C=>C.id===m?{...C,text:f}:C))},[e]),u=x.useCallback((m,f,y,C,I)=>{m.stopPropagation(),m.ctrlKey||m.metaKey?C(w=>w.includes(f)?w.filter(_=>_!==f):[...w,f]):(C(w=>w.length===1&&w[0]===f?[]:[f]),I([]))},[n,r]),c=x.useCallback(m=>{e(f=>f.filter(y=>y.id!==m))},[e]),h=x.useCallback(m=>{const f=i();e(y=>y.map(C=>C.id===m?{...C,gradient:f.value}:C))},[e,i]);return{handleTextDoubleClick:s,handleTextBlur:o,handleTextChange:l,handleShapeClick:u,handleDelete:c,handleChangeGradient:h}}function qA({images:t,setImages:e,setDraggingImage:n,setDragImageStart:r,setResizingImage:i,setResizeStart:s,setSelectedImages:o,setSelectedBoxes:l,setSelectedShapes:u,whiteboardRef:c,pan:h,zoom:m}){return{handleImageClick:(k,w)=>{k.stopPropagation(),k.ctrlKey||k.metaKey?o(_=>_.includes(w)?_.filter(A=>A!==w):[..._,w]):o([w]),l([]),u([])},handleImageMouseDown:(k,w)=>{var U;if(k.button!==0)return;k.stopPropagation();const _=(U=c.current)==null?void 0:U.getBoundingClientRect();if(!_)return;const A=t.find(v=>v.id===w);if(!A)return;const N=(k.clientX-_.left-h.x)/m,L=(k.clientY-_.top-h.y)/m;n(w),r({x:N,y:L,offsetX:N-A.x,offsetY:L-A.y})},handleImageResizeStart:(k,w)=>{var N;if(k.stopPropagation(),!((N=c.current)==null?void 0:N.getBoundingClientRect()))return;const A=t.find(L=>L.id===w);A&&(i(w),s({x:k.clientX,y:k.clientY,width:A.width,height:A.height,fontSize:0}))},handleImageDelete:k=>{e(w=>w.filter(_=>_.id!==k))}}}function GA(t,e,n){const r=x.useCallback((l,u)=>{l.stopPropagation(),l.ctrlKey||l.metaKey?e(c=>c.includes(u)?c.filter(h=>h!==u):[...c,u]):e([u])},[e]),i=x.useCallback(l=>{t(u=>u.filter(c=>c.id!==l)),e(u=>u.filter(c=>c!==l))},[t,e]),s=x.useCallback(l=>{t(u=>u.map(c=>c.id===l?{...c,strokeStyle:c.strokeStyle==="solid"?"dashed":"solid"}:c))},[t]),o=x.useCallback(l=>{const u=n();t(c=>c.map(h=>h.id===l?{...h,gradient:u.value}:h))},[t,n]);return{handleArrowClick:r,handleArrowDelete:i,handleToggleStrokeStyle:s,handleChangeArrowGradient:o}}function KA(){const[t,e]=x.useState({draggingElement:null,dragType:null,dragStartData:null,hasDragged:!1});return{universalDragState:t,startDrag:(s,o,l,u,c,h)=>{const m={};c.forEach(f=>{const y=h.find(C=>C.id===f);y&&(o==="arrow"?m[f]={x:y.startX,y:y.startY,endX:y.endX,endY:y.endY}:m[f]={x:y.x,y:y.y})}),e({draggingElement:s,dragType:o,dragStartData:{mouseX:l,mouseY:u,elementPositions:m},hasDragged:!1})},updateDrag:(s,o,l)=>{if(!t.dragStartData)return;const u=s-t.dragStartData.mouseX,c=o-t.dragStartData.mouseY;(Math.abs(u)>3||Math.abs(c)>3)&&!t.hasDragged&&e(m=>({...m,hasDragged:!0})),l(u,c,t.dragStartData.elementPositions)},endDrag:()=>{const s=t.hasDragged;return e({draggingElement:null,dragType:null,dragStartData:null,hasDragged:!1}),s}}}const YA=({drawingPaths:t,currentPath:e,currentArrow:n,gradients:r,style:i={}})=>T.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1,...i},children:[t.map(s=>{const l=(s.gradient||r[0]).preview.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g)||["#000"];return T.jsx("linearGradient",{id:s.color,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:l.map((u,c)=>T.jsx("stop",{offset:`${c/(l.length-1)*100}%`,stopColor:u},c))},s.color)}),e&&e.gradient&&(()=>{const s=e.gradient,o=e.color,l=s.preview.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g)||["#000"];return T.jsx("linearGradient",{id:o,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:l.map((u,c)=>T.jsx("stop",{offset:`${c/(l.length-1)*100}%`,stopColor:u},c))})})(),t.map(s=>{const l=Date.now()-s.createdAt,u=1e3,c=3e3;let h=1;return l>c&&(h=Math.max(0,1-(l-c)/u)),T.jsx("path",{d:s.points.length>1?`M ${s.points[0].x} ${s.points[0].y} ${s.points.slice(1).map(m=>`L ${m.x} ${m.y}`).join(" ")}`:"",stroke:`url(#${s.color})`,strokeWidth:s.strokeWidth,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:h,transition:"opacity 0.3s linear"}},s.id)}),e&&e.points.length>1&&T.jsx("path",{d:`M ${e.points[0].x} ${e.points[0].y} ${e.points.slice(1).map(s=>`L ${s.x} ${s.y}`).join(" ")}`,stroke:`url(#${e.color})`,strokeWidth:e.strokeWidth,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n&&T.jsxs(T.Fragment,{children:[T.jsx("line",{x1:n.startX,y1:n.startY,x2:n.endX,y2:n.endY,stroke:"black",strokeWidth:2,opacity:.7}),(()=>{const s=Math.atan2(n.endY-n.startY,n.endX-n.startX),o=10,l=`${n.endX},${n.endY} ${n.endX-o*Math.cos(s-Math.PI/6)},${n.endY-o*Math.sin(s-Math.PI/6)} ${n.endX-o*Math.cos(s+Math.PI/6)},${n.endY-o*Math.sin(s+Math.PI/6)}`;return T.jsx("polygon",{points:l,fill:"black",opacity:.7})})()]})]}),XA=({id:t,x:e,y:n,width:r,height:i,rotation:s,text:o,gradient:l,isEditing:u,fontSize:c,selected:h,isBold:m,isItalic:f,isUnderline:y,color:C,onTextChange:I,onTextBlur:k,onTextClick:w,onTextDoubleClick:_,onMouseDown:A,onResizeStart:N,onRotateStart:L})=>{const U=["cursor-move select-none w-full h-full flex items-center leading-tight",m?"font-bold":"font-normal",f?"italic":"",y?"underline":""].filter(Boolean).join(" "),v={fontSize:`${c}px`,whiteSpace:"pre",overflow:"hidden",textOverflow:"clip",wordBreak:"keep-all",lineHeight:"1.1",color:C||"transparent"},g=C?"":`${l} bg-clip-text text-transparent`;return T.jsx("div",{className:`absolute${h&&!u?" ring-2 ring-blue-400 z-20":""}`,style:{left:e,top:n,width:r,height:i,transform:`rotate(${s}deg)`,transformOrigin:"center"},children:u?T.jsx("textarea",{value:o,onChange:R=>I(t,R.target.value),onBlur:()=>k(t),wrap:"off",className:`w-full h-full bg-transparent border-2 border-dashed border-gray-400 rounded px-2 py-1 focus:outline-none focus:border-blue-500 resize-none ${m?"font-bold":"font-normal"} ${f?"italic":""}`,style:{fontSize:`${c}px`,whiteSpace:"pre",lineHeight:"1.1",wordBreak:"keep-all",overflow:"hidden"},autoFocus:!0}):T.jsxs("div",{className:"relative w-full h-full",children:[T.jsx("div",{className:`${U} justify-center text-center ${g}`,onClick:R=>w(t,R),onDoubleClick:()=>_(t),onMouseDown:R=>A(R,t),style:v,tabIndex:0,children:o}),h&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize border-2 border-white shadow-lg",onMouseDown:R=>N(R,t),title:"Drag to resize"}),T.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full cursor-grab border-2 border-white shadow-lg",onMouseDown:R=>L(R,t),title:"Drag to rotate"})]})]})})},QA=({id:t,x:e,y:n,src:r,width:i,height:s,selected:o,onClick:l,onMouseDown:u,onResizeStart:c})=>T.jsxs("div",{className:`absolute cursor-move${o?" ring-2 ring-blue-400 z-20":""}`,style:{left:e,top:n,width:i,height:s,zIndex:5},onClick:h=>l(h,t),onMouseDown:h=>u(h,t),children:[T.jsx("img",{src:r,alt:"Pasted",className:"w-full h-full object-contain",draggable:!1,style:{pointerEvents:"none",userSelect:"none"}}),o&&T.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize border-2 border-white shadow-lg",onMouseDown:h=>c(h,t),title:"Drag to resize"})]}),JA=({shape:t,selected:e,onClick:n,onMouseDown:r,onTextChange:i,onTextBlur:s,onTextDoubleClick:o,onResizeStart:l})=>T.jsx("div",{className:`absolute cursor-pointer${e?" ring-2 ring-blue-400 z-20":""}`,style:{left:t.x,top:t.y,width:t.width,height:t.height},onClick:u=>n(u,t.id),onMouseDown:u=>r(u,t.id),children:T.jsxs("div",{className:"relative w-full h-full",children:[t.isEditing?T.jsx("input",{type:"text",value:t.text,onChange:u=>i(t.id,u.target.value),onBlur:()=>s(t.id),onKeyDown:u=>{u.key==="Enter"&&s(t.id)},className:"absolute w-full h-full rounded-lg px-2 py-1 font-bold bg-white/80 border-2 border-dashed border-gray-400 focus:outline-none focus:border-blue-500 resize-none",style:{fontSize:`${Math.max(12,Math.min(72,t.height*.25))}px`,textAlign:"center"},autoFocus:!0}):T.jsx("div",{className:`absolute w-full h-full flex items-center select-none px-2 py-1 ${t.isBold?"font-bold":"font-normal"} ${t.isItalic?"italic":""} ${t.isUnderline?"underline":""} ${t.textAlign==="left"?"justify-start text-left":t.textAlign==="right"?"justify-end text-right":"justify-center text-center"} ${t.type==="rectangle"?"rounded-lg":""} ${t.type==="circle"?"rounded-full":""} ${t.type==="diamond"?"transform rotate-45":""} ${t.gradient}`,style:{fontSize:`${Math.max(12,Math.min(72,t.height*.25))}px`,overflow:"hidden",wordBreak:"break-word",color:t.textColor||"#374151"},onDoubleClick:()=>o(t.id),children:t.text}),e&&T.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize border-2 border-white shadow-lg",onMouseDown:u=>l(u,t.id),title:"Drag to resize"})]})}),ZA=({arrow:t,selected:e,onClick:n,onMouseDown:r,onResizeStart:i})=>{const s=Math.min(t.startX,t.endX),o=Math.min(t.startY,t.endY),l=Math.abs(t.endX-t.startX)||1,u=Math.abs(t.endY-t.startY)||1,c=t.startX-s,h=t.startY-o,m=t.endX-s,f=t.endY-o,y=Math.atan2(f-h,m-c),C=30,I=m-C*Math.cos(y)*.7,k=f-C*Math.sin(y)*.7,w=`${m},${f} ${m-C*Math.cos(y-Math.PI/6)},${f-C*Math.sin(y-Math.PI/6)} ${m-C*Math.cos(y+Math.PI/6)},${f-C*Math.sin(y+Math.PI/6)}`,A=(N=>({"bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500":{from:"#ef4444",to:"#a855f7"},"bg-gradient-to-r from-orange-400 via-red-500 to-pink-500":{from:"#fb923c",to:"#ec4899"},"bg-gradient-to-r from-blue-400 via-cyan-500 to-teal-500":{from:"#60a5fa",to:"#14b8a6"},"bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600":{from:"#4ade80",to:"#0d9488"},"bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-500":{from:"#a78bfa",to:"#6366f1"},"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600":{from:"#facc15",to:"#dc2626"},"bg-gradient-to-r from-emerald-300 via-cyan-400 to-blue-400":{from:"#6ee7b7",to:"#60a5fa"},"bg-gradient-to-r from-pink-400 via-rose-500 to-red-500":{from:"#f472b6",to:"#ef4444"},"bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-500":{from:"#6366f1",to:"#ec4899"},"bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-500":{from:"#fbbf24",to:"#f97316"}})[N]||{from:"#6b7280",to:"#374151"})(t.gradient);return T.jsx("div",{className:`absolute${e?" ring-2 ring-blue-400 ring-offset-2":""}`,style:{left:s-10,top:o-10,width:l+20,height:u+20},onClick:N=>n(N,t.id),onMouseDown:N=>r(N,t.id),children:T.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[T.jsx("defs",{children:T.jsxs("linearGradient",{id:`arrow-gradient-${t.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[T.jsx("stop",{offset:"0%",stopColor:A.from}),T.jsx("stop",{offset:"100%",stopColor:A.to})]})}),T.jsx("line",{x1:c+10,y1:h+10,x2:I+10,y2:k+10,stroke:t.strokeStyle==="dashed"?A.to:`url(#arrow-gradient-${t.id})`,strokeWidth:8,strokeDasharray:t.strokeStyle==="dashed"?"16 12":"",strokeLinecap:"round"}),T.jsx("polygon",{points:w.split(" ").map(N=>{const[L,U]=N.split(",").map(Number);return`${L+10},${U+10}`}).join(" "),fill:A.to}),e&&i&&T.jsxs(T.Fragment,{children:[T.jsx("circle",{cx:c+10,cy:h+10,r:4,fill:"white",stroke:"#3b82f6",strokeWidth:2,className:"cursor-nw-resize",onMouseDown:N=>{N.stopPropagation(),i(N,t.id,"start")}}),T.jsx("circle",{cx:m+10,cy:f+10,r:4,fill:"white",stroke:"#3b82f6",strokeWidth:2,className:"cursor-se-resize",onMouseDown:N=>{N.stopPropagation(),i(N,t.id,"end")}})]})]})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ek={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ze=(t,e)=>{const n=x.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...c},h)=>x.createElement("svg",{ref:h,...ek,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${tk(t)}`,l].join(" "),...c},[...e.map(([m,f])=>x.createElement(m,f)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=ze("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=ze("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=ze("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=ze("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=ze("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=ze("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=ze("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=ze("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=ze("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=ze("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=ze("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mu=({x:t,y:e,width:n,elementType:r,onChangeGradient:i,onDelete:s,onCopy:o,onRotate:l,textStyle:u,onToggleBold:c,onToggleItalic:h,onToggleUnderline:m,onColorChange:f,arrowStyle:y,onToggleStrokeStyle:C,onChangeArrowGradient:I})=>{const[k,w]=x.useState(!1),_=x.useRef(null);x.useEffect(()=>{const v=g=>{_.current&&!_.current.contains(g.target)&&w(!1)};if(k)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[k]);const A=t+n/2,N=e-60,L=r==="textbox"||r==="shape",U=["#000000","#374151","#6B7280","#9CA3AF","#D1D5DB","#F3F4F6","#DC2626","#EA580C","#D97706","#CA8A04","#65A30D","#16A34A","#0891B2","#0284C7","#2563EB","#4F46E5","#7C3AED","#C026D3","#DB2777","#E11D48"];return T.jsxs("div",{className:"absolute z-30 bg-white rounded-lg shadow-lg border border-gray-200 px-2 py-1.5 flex items-center space-x-1",style:{left:A,top:N,transform:"translateX(-50%)"},onClick:v=>v.stopPropagation(),onMouseDown:v=>v.stopPropagation(),children:[L&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2 space-x-1",children:[T.jsx("button",{onClick:v=>{v.stopPropagation(),c==null||c()},className:`p-1.5 rounded transition-colors ${u!=null&&u.isBold?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,title:"Bold",children:T.jsx(rk,{className:"w-4 h-4"})}),T.jsx("button",{onClick:v=>{v.stopPropagation(),h==null||h()},className:`p-1.5 rounded transition-colors ${u!=null&&u.isItalic?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,title:"Italic",children:T.jsx(ck,{className:"w-4 h-4"})}),T.jsx("button",{onClick:v=>{v.stopPropagation(),m==null||m()},className:`p-1.5 rounded transition-colors ${u!=null&&u.isUnderline?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,title:"Underline",children:T.jsx(_k,{className:"w-4 h-4"})})]}),T.jsxs("div",{className:"relative border-r border-gray-200 pr-2 mr-2",children:[T.jsx("button",{onClick:v=>{v.stopPropagation(),w(!k)},className:"p-1.5 rounded hover:bg-gray-100 transition-colors flex items-center",title:"Text color",children:T.jsxs("div",{className:"flex items-center",children:[T.jsx(vk,{className:"w-4 h-4 text-gray-600"}),T.jsx("div",{className:"w-3 h-1 ml-1 rounded",style:{backgroundColor:(u==null?void 0:u.color)||"#000000"}}),T.jsx(ok,{className:"w-3 h-3 ml-1 text-gray-400"})]})}),k&&T.jsx("div",{ref:_,className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-40",children:T.jsx("div",{className:"grid grid-cols-10 gap-1 w-48",children:U.map(v=>T.jsx("button",{onClick:g=>{g.stopPropagation(),f==null||f(v),w(!1)},className:`w-5 h-5 rounded border-2 hover:scale-110 transition-transform ${(u==null?void 0:u.color)===v?"border-blue-500":"border-gray-300"}`,style:{backgroundColor:v},title:v},v))})})]})]}),r==="arrow"&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"flex items-center border-r border-gray-200 pr-2 mr-2",children:T.jsx("button",{onClick:v=>{v.stopPropagation(),C==null||C()},className:`p-1.5 rounded transition-colors ${(y==null?void 0:y.strokeStyle)==="dashed"?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,title:(y==null?void 0:y.strokeStyle)==="dashed"?"Switch to solid line":"Switch to dashed line",children:(y==null?void 0:y.strokeStyle)==="dashed"?T.jsx(mk,{className:"w-4 h-4"}):T.jsx(pk,{className:"w-4 h-4"})})}),T.jsx("div",{className:"border-r border-gray-200 pr-2 mr-2",children:T.jsx("button",{onClick:v=>{v.stopPropagation(),I==null||I()},className:"p-1.5 rounded hover:bg-gray-100 transition-colors",title:"Change arrow color",children:T.jsx(Gy,{className:"w-4 h-4 text-gray-600"})})})]}),(r==="shape"||r==="textbox")&&i&&T.jsx("button",{onClick:v=>{v.stopPropagation(),i()},className:"p-1.5 rounded hover:bg-gray-100 transition-colors",title:"Change gradient",children:T.jsx(Gy,{className:"w-4 h-4 text-gray-600"})}),o&&T.jsx("button",{onClick:v=>{v.stopPropagation(),o()},className:"p-1.5 rounded hover:bg-gray-100 transition-colors",title:"Copy",children:T.jsx(lk,{className:"w-4 h-4 text-gray-600"})}),(r==="shape"||r==="image"||r==="textbox")&&l&&T.jsx("button",{onClick:v=>{v.stopPropagation(),l()},className:"p-1.5 rounded hover:bg-gray-100 transition-colors",title:"Rotate",children:T.jsx(gk,{className:"w-4 h-4 text-gray-600"})}),T.jsx("button",{onClick:v=>{v.stopPropagation(),s()},className:"p-1.5 rounded hover:bg-red-100 transition-colors",title:"Delete",children:T.jsx(uE,{className:"w-4 h-4 text-red-600"})})]})},Ek=({node:t,isActive:e,isSelected:n,onSelect:r,onTextChange:i,onResizeStart:s,onDelete:o,onDragStart:l})=>{const[u,c]=x.useState(!1),[h,m]=x.useState(t.text),f=x.useRef(null);x.useEffect(()=>{u&&f.current&&(f.current.focus(),f.current.select())},[u]);const y=()=>{c(!0),m(t.text)},C=()=>{i(t.id,h),c(!1)},I=k=>{k.key==="Enter"?(k.preventDefault(),C()):k.key==="Escape"&&(c(!1),m(t.text))};return T.jsxs("div",{className:`absolute border-2 rounded-lg shadow-md cursor-pointer transition-all duration-200 ${e?"border-blue-500 shadow-lg":n?"border-blue-400 shadow-md":"border-gray-300 hover:border-gray-400"} ${t.gradient}`,style:{left:t.x,top:t.y,width:t.width,height:t.height,zIndex:e?20:n?15:10},"data-mindmap-node-id":t.id,onClick:k=>{k.stopPropagation(),r(t.id,k)},onDoubleClick:y,onMouseDown:k=>{k.button===0&&(k.stopPropagation(),l(k,t.id))},children:[T.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",children:u?T.jsx("input",{ref:f,className:"w-full h-full bg-transparent outline-none text-center text-sm font-medium",value:h,onChange:k=>m(k.target.value),onBlur:C,onKeyDown:I}):T.jsx("span",{className:"text-sm font-medium text-gray-700 text-center break-words",children:t.text})}),e&&T.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-blue-500 cursor-se-resize rounded-tl-sm",onMouseDown:k=>{k.stopPropagation(),s(k,t.id)}}),e&&T.jsx("button",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600",onClick:k=>{k.stopPropagation(),o(t.id)},children:"×"})]})};function Tk({setActiveTool:t,setTextBoxes:e,setShapes:n,setArrows:r,setSelectedBoxes:i,setSelectedShapes:s,setSelectedArrows:o,lastMousePos:l,selectedBoxes:u,selectedShapes:c,selectedArrows:h,textBoxes:m,shapes:f,arrows:y,activeTool:C,getRandomGradient:I,activeMindMapNode:k,selectedMindMapNodes:w,setSelectedMindMapNodes:_,setMindMapNodes:A,addMindMapNode:N,addSiblingNode:L,addChildNode:U,handleMindMapNodeDelete:v,setSidebarOpen:g}){x.useEffect(()=>{const R=S=>{var be,Le;const D=(be=document.activeElement)==null?void 0:be.tagName,M=D==="INPUT"||D==="TEXTAREA"||((Le=document.activeElement)==null?void 0:Le.isContentEditable),P=m.some(ce=>ce.isEditing);if(!M&&!P&&(S.key==="q"||S.key==="Q"?t("rectangle"):S.key==="w"||S.key==="W"?t("circle"):S.key==="e"||S.key==="E"?t("diamond"):S.key==="r"||S.key==="R"?t("pen"):(S.key==="b"||S.key==="B")&&g(ce=>!ce)),(S.key==="t"||S.key==="T")&&!M&&!P){const ce=I();e(Ae=>{const K=Ic("Text",32);return[...Ae,{id:Date.now().toString(),x:l.x-K.width/2,y:l.y-K.height/2,text:"Text",gradient:ce.value,isEditing:!1,fontSize:32,width:K.width,height:K.height,rotation:0,isBold:!1,isItalic:!1,isUnderline:!1,textAlign:"center",color:void 0}]})}if((S.key==="d"||S.key==="D")&&!M&&!P&&(S.preventDefault(),n(ce=>[...ce,{id:Date.now().toString(),type:C==="rectangle"||C==="circle"||C==="diamond"?C:"rectangle",x:l.x-50,y:l.y-50,width:100,height:100,gradient:"bg-gray-200",text:"",isEditing:!0,isBold:!1,isItalic:!1,isUnderline:!1,textAlign:"center",textColor:void 0}])),(S.key==="Delete"||S.key==="Backspace")&&!M&&!P&&(u.length>0||c.length>0||h&&h.length>0||w.length>0)&&(S.preventDefault(),u.length>0&&(e(ce=>ce.filter(Ae=>!u.includes(Ae.id))),i([])),c.length>0&&(n(ce=>ce.filter(Ae=>!c.includes(Ae.id))),s([])),h&&h.length>0&&r&&o&&(r(ce=>ce.filter(Ae=>!h.includes(Ae.id))),o([])),w.length>0&&(w.forEach(ce=>{v(ce)}),_([]))),(S.key==="m"||S.key==="M")&&!M&&!P&&(S.preventDefault(),N("Node")),S.key==="Tab"&&k&&!M&&!P&&(S.preventDefault(),L(k)),S.key==="Enter"&&k&&!M&&!P&&(S.preventDefault(),U(k)),(S.key==="Delete"||S.key==="Backspace")&&k&&!M&&!P&&(S.preventDefault(),v(k)),(S.key==="ArrowUp"||S.key==="ArrowDown"||S.key==="ArrowLeft"||S.key==="ArrowRight")&&w.length>0&&!M&&!P){S.preventDefault();const ce=S.shiftKey?10:1;A(Ae=>Ae.map(j=>{if(w.includes(j.id)){let K=j.x,te=j.y;switch(S.key){case"ArrowUp":te-=ce;break;case"ArrowDown":te+=ce;break;case"ArrowLeft":K-=ce;break;case"ArrowRight":K+=ce;break}return{...j,x:K,y:te}}return j}))}};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[u,c,w,l,m,f,C,k])}const Ik=()=>{};var Yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Sk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let f=(l&15)<<2|c>>6,y=c&63;u||(y=64,o||(f=64)),r.push(n[h],n[m],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new Ck;const f=s<<2|l>>4;if(r.push(f),c!==64){const y=l<<4&240|c>>2;if(r.push(y),m!==64){const C=c<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ck extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ak=function(t){const e=dE(t);return hE.encodeByteArray(e,!0)},Sc=function(t){return Ak(t).replace(/\./g,"")},fE=function(t){try{return hE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=()=>kk().__FIREBASE_DEFAULTS__,Rk=()=>{if(typeof process>"u"||typeof Yy>"u")return;const t=Yy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fE(t[1]);return e&&JSON.parse(e)},ad=()=>{try{return Ik()||xk()||Rk()||Pk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pE=t=>{var e,n;return(n=(e=ad())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bk=t=>{const e=pE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mE=()=>{var t;return(t=ad())==null?void 0:t.config},gE=t=>{var e;return(e=ad())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sc(JSON.stringify(n)),Sc(JSON.stringify(o)),""].join(".")}const Na={};function Mk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Na))Na[e]?t.emulator.push(e):t.prod.push(e);return t}function Ok(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xy=!1;function vE(t,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||Na[t]===e||Na[t]||Xy)return;Na[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=Mk().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Xy=!0,o()},f}function h(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=Ok(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),k=document.getElementById(I)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const A=f.element;l(A),h(k,I);const N=c();u(_,w),A.append(_,C,k,N),document.body.appendChild(A)}s?(C.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Lk(){var e;const t=(e=ad())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Uk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zk(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Bk(){return!Lk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $k(){try{return typeof indexedDB=="object"}catch{return!1}}function Wk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Hk,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qk(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Nr(i,l,r)}}function qk(t,e){return t.replace(Gk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Gk=/\{\$([^}]+)}/g;function Kk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qy(s)&&Qy(o)){if(!os(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Yk(t,e){const n=new Xk(t,e);return n.subscribe.bind(n)}class Xk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Qk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_h),i.error===void 0&&(i.error=_h),i.complete===void 0&&(i.complete=_h);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _h(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class as{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Nk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ex(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zk(t){return t===qi?void 0:t}function ex(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Jk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const nx={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},rx=Ie.INFO,ix={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},sx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ix[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=rx,this._logHandler=sx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const ox=(t,e)=>e.some(n=>t instanceof n);let Jy,Zy;function ax(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lx(){return Zy||(Zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,Of=new WeakMap,wE=new WeakMap,wh=new WeakMap,um=new WeakMap;function ux(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(pi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_E.set(n,t)}).catch(()=>{}),um.set(e,t),e}function cx(t){if(Of.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Of.set(t,e)}let Vf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Of.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dx(t){Vf=t(Vf)}function hx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eh(this),e,...n);return wE.set(r,e.sort?e.sort():[e]),pi(r)}:lx().includes(t)?function(...e){return t.apply(Eh(this),e),pi(_E.get(this))}:function(...e){return pi(t.apply(Eh(this),e))}}function fx(t){return typeof t=="function"?hx(t):(t instanceof IDBTransaction&&cx(t),ox(t,ax())?new Proxy(t,Vf):t)}function pi(t){if(t instanceof IDBRequest)return ux(t);if(wh.has(t))return wh.get(t);const e=fx(t);return e!==t&&(wh.set(t,e),um.set(e,t)),e}const Eh=t=>um.get(t);function px(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=pi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(pi(o.result),u.oldVersion,u.newVersion,pi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const mx=["get","getKey","getAll","getAllKeys","count"],gx=["put","add","delete","clear"],Th=new Map;function ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mx.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return Th.set(e,s),s}dx(t=>({...t,get:(e,n,r)=>ev(e,n)||t.get(e,n,r),has:(e,n)=>!!ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",tv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new lm("@firebase/app"),_x="@firebase/app-compat",wx="@firebase/analytics-compat",Ex="@firebase/analytics",Tx="@firebase/app-check-compat",Ix="@firebase/app-check",Sx="@firebase/auth",Cx="@firebase/auth-compat",Ax="@firebase/database",kx="@firebase/data-connect",xx="@firebase/database-compat",Rx="@firebase/functions",Px="@firebase/functions-compat",bx="@firebase/installations",Nx="@firebase/installations-compat",Dx="@firebase/messaging",Mx="@firebase/messaging-compat",Ox="@firebase/performance",Vx="@firebase/performance-compat",Lx="@firebase/remote-config",Fx="@firebase/remote-config-compat",jx="@firebase/storage",Ux="@firebase/storage-compat",zx="@firebase/firestore",Bx="@firebase/ai",$x="@firebase/firestore-compat",Wx="firebase",Hx="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="[DEFAULT]",qx={[Lf]:"fire-core",[_x]:"fire-core-compat",[Ex]:"fire-analytics",[wx]:"fire-analytics-compat",[Ix]:"fire-app-check",[Tx]:"fire-app-check-compat",[Sx]:"fire-auth",[Cx]:"fire-auth-compat",[Ax]:"fire-rtdb",[kx]:"fire-data-connect",[xx]:"fire-rtdb-compat",[Rx]:"fire-fn",[Px]:"fire-fn-compat",[bx]:"fire-iid",[Nx]:"fire-iid-compat",[Dx]:"fire-fcm",[Mx]:"fire-fcm-compat",[Ox]:"fire-perf",[Vx]:"fire-perf-compat",[Lx]:"fire-rc",[Fx]:"fire-rc-compat",[jx]:"fire-gcs",[Ux]:"fire-gcs-compat",[zx]:"fire-fst",[$x]:"fire-fst-compat",[Bx]:"fire-vertex","fire-js":"fire-js",[Wx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,Gx=new Map,jf=new Map;function nv(t,e){try{t.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _o(t){const e=t.name;if(jf.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,t);for(const n of Cc.values())nv(n,t);for(const n of Gx.values())nv(n,t);return!0}function cm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new gl("app","Firebase",Kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=Hx;function EE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ff,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw mi.create("bad-app-name",{appName:String(i)});if(n||(n=mE()),!n)throw mi.create("no-options");const s=Cc.get(i);if(s){if(os(n,s.options)&&os(r,s.config))return s;throw mi.create("duplicate-app",{appName:i})}const o=new tx(i);for(const u of jf.values())o.addComponent(u);const l=new Yx(n,r,o);return Cc.set(i,l),l}function TE(t=Ff){const e=Cc.get(t);if(!e&&t===Ff&&mE())return EE();if(!e)throw mi.create("no-app",{appName:t});return e}function gi(t,e,n){let r=qx[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(o.join(" "));return}_o(new as(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebase-heartbeat-database",Qx=1,tl="firebase-heartbeat-store";let Ih=null;function IE(){return Ih||(Ih=px(Xx,Qx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw mi.create("idb-open",{originalErrorMessage:t.message})})),Ih}async function Jx(t){try{const n=(await IE()).transaction(tl),r=await n.objectStore(tl).get(SE(t));return await n.done,r}catch(e){if(e instanceof Nr)Ar.warn(e.message);else{const n=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function rv(t,e){try{const r=(await IE()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,SE(t)),await r.done}catch(n){if(n instanceof Nr)Ar.warn(n.message);else{const r=mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(r.message)}}}function SE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=1024,eR=30;class tR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=iv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>eR){const o=iR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iv(),{heartbeatsToSend:r,unsentEntries:i}=nR(this._heartbeatsCache.heartbeats),s=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ar.warn(n),""}}}function iv(){return new Date().toISOString().substring(0,10)}function nR(t,e=Zx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $k()?Wk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sv(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}function iR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){_o(new as("platform-logger",e=>new yx(e),"PRIVATE")),_o(new as("heartbeat",e=>new tR(e),"PRIVATE")),gi(Lf,tv,t),gi(Lf,tv,"esm2020"),gi("fire-js","")}sR("");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,CE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,g){function R(){}R.prototype=g.prototype,v.D=g.prototype,v.prototype=new R,v.prototype.constructor=v,v.C=function(S,D,M){for(var P=Array(arguments.length-2),be=2;be<arguments.length;be++)P[be-2]=arguments[be];return g.prototype[D].apply(S,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,g,R){R||(R=0);var S=Array(16);if(typeof g=="string")for(var D=0;16>D;++D)S[D]=g.charCodeAt(R++)|g.charCodeAt(R++)<<8|g.charCodeAt(R++)<<16|g.charCodeAt(R++)<<24;else for(D=0;16>D;++D)S[D]=g[R++]|g[R++]<<8|g[R++]<<16|g[R++]<<24;g=v.g[0],R=v.g[1],D=v.g[2];var M=v.g[3],P=g+(M^R&(D^M))+S[0]+3614090360&4294967295;g=R+(P<<7&4294967295|P>>>25),P=M+(D^g&(R^D))+S[1]+3905402710&4294967295,M=g+(P<<12&4294967295|P>>>20),P=D+(R^M&(g^R))+S[2]+606105819&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(g^D&(M^g))+S[3]+3250441966&4294967295,R=D+(P<<22&4294967295|P>>>10),P=g+(M^R&(D^M))+S[4]+4118548399&4294967295,g=R+(P<<7&4294967295|P>>>25),P=M+(D^g&(R^D))+S[5]+1200080426&4294967295,M=g+(P<<12&4294967295|P>>>20),P=D+(R^M&(g^R))+S[6]+2821735955&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(g^D&(M^g))+S[7]+4249261313&4294967295,R=D+(P<<22&4294967295|P>>>10),P=g+(M^R&(D^M))+S[8]+1770035416&4294967295,g=R+(P<<7&4294967295|P>>>25),P=M+(D^g&(R^D))+S[9]+2336552879&4294967295,M=g+(P<<12&4294967295|P>>>20),P=D+(R^M&(g^R))+S[10]+4294925233&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(g^D&(M^g))+S[11]+2304563134&4294967295,R=D+(P<<22&4294967295|P>>>10),P=g+(M^R&(D^M))+S[12]+1804603682&4294967295,g=R+(P<<7&4294967295|P>>>25),P=M+(D^g&(R^D))+S[13]+4254626195&4294967295,M=g+(P<<12&4294967295|P>>>20),P=D+(R^M&(g^R))+S[14]+2792965006&4294967295,D=M+(P<<17&4294967295|P>>>15),P=R+(g^D&(M^g))+S[15]+1236535329&4294967295,R=D+(P<<22&4294967295|P>>>10),P=g+(D^M&(R^D))+S[1]+4129170786&4294967295,g=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(g^R))+S[6]+3225465664&4294967295,M=g+(P<<9&4294967295|P>>>23),P=D+(g^R&(M^g))+S[11]+643717713&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^g&(D^M))+S[0]+3921069994&4294967295,R=D+(P<<20&4294967295|P>>>12),P=g+(D^M&(R^D))+S[5]+3593408605&4294967295,g=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(g^R))+S[10]+38016083&4294967295,M=g+(P<<9&4294967295|P>>>23),P=D+(g^R&(M^g))+S[15]+3634488961&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^g&(D^M))+S[4]+3889429448&4294967295,R=D+(P<<20&4294967295|P>>>12),P=g+(D^M&(R^D))+S[9]+568446438&4294967295,g=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(g^R))+S[14]+3275163606&4294967295,M=g+(P<<9&4294967295|P>>>23),P=D+(g^R&(M^g))+S[3]+4107603335&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^g&(D^M))+S[8]+1163531501&4294967295,R=D+(P<<20&4294967295|P>>>12),P=g+(D^M&(R^D))+S[13]+2850285829&4294967295,g=R+(P<<5&4294967295|P>>>27),P=M+(R^D&(g^R))+S[2]+4243563512&4294967295,M=g+(P<<9&4294967295|P>>>23),P=D+(g^R&(M^g))+S[7]+1735328473&4294967295,D=M+(P<<14&4294967295|P>>>18),P=R+(M^g&(D^M))+S[12]+2368359562&4294967295,R=D+(P<<20&4294967295|P>>>12),P=g+(R^D^M)+S[5]+4294588738&4294967295,g=R+(P<<4&4294967295|P>>>28),P=M+(g^R^D)+S[8]+2272392833&4294967295,M=g+(P<<11&4294967295|P>>>21),P=D+(M^g^R)+S[11]+1839030562&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^g)+S[14]+4259657740&4294967295,R=D+(P<<23&4294967295|P>>>9),P=g+(R^D^M)+S[1]+2763975236&4294967295,g=R+(P<<4&4294967295|P>>>28),P=M+(g^R^D)+S[4]+1272893353&4294967295,M=g+(P<<11&4294967295|P>>>21),P=D+(M^g^R)+S[7]+4139469664&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^g)+S[10]+3200236656&4294967295,R=D+(P<<23&4294967295|P>>>9),P=g+(R^D^M)+S[13]+681279174&4294967295,g=R+(P<<4&4294967295|P>>>28),P=M+(g^R^D)+S[0]+3936430074&4294967295,M=g+(P<<11&4294967295|P>>>21),P=D+(M^g^R)+S[3]+3572445317&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^g)+S[6]+76029189&4294967295,R=D+(P<<23&4294967295|P>>>9),P=g+(R^D^M)+S[9]+3654602809&4294967295,g=R+(P<<4&4294967295|P>>>28),P=M+(g^R^D)+S[12]+3873151461&4294967295,M=g+(P<<11&4294967295|P>>>21),P=D+(M^g^R)+S[15]+530742520&4294967295,D=M+(P<<16&4294967295|P>>>16),P=R+(D^M^g)+S[2]+3299628645&4294967295,R=D+(P<<23&4294967295|P>>>9),P=g+(D^(R|~M))+S[0]+4096336452&4294967295,g=R+(P<<6&4294967295|P>>>26),P=M+(R^(g|~D))+S[7]+1126891415&4294967295,M=g+(P<<10&4294967295|P>>>22),P=D+(g^(M|~R))+S[14]+2878612391&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~g))+S[5]+4237533241&4294967295,R=D+(P<<21&4294967295|P>>>11),P=g+(D^(R|~M))+S[12]+1700485571&4294967295,g=R+(P<<6&4294967295|P>>>26),P=M+(R^(g|~D))+S[3]+2399980690&4294967295,M=g+(P<<10&4294967295|P>>>22),P=D+(g^(M|~R))+S[10]+4293915773&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~g))+S[1]+2240044497&4294967295,R=D+(P<<21&4294967295|P>>>11),P=g+(D^(R|~M))+S[8]+1873313359&4294967295,g=R+(P<<6&4294967295|P>>>26),P=M+(R^(g|~D))+S[15]+4264355552&4294967295,M=g+(P<<10&4294967295|P>>>22),P=D+(g^(M|~R))+S[6]+2734768916&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~g))+S[13]+1309151649&4294967295,R=D+(P<<21&4294967295|P>>>11),P=g+(D^(R|~M))+S[4]+4149444226&4294967295,g=R+(P<<6&4294967295|P>>>26),P=M+(R^(g|~D))+S[11]+3174756917&4294967295,M=g+(P<<10&4294967295|P>>>22),P=D+(g^(M|~R))+S[2]+718787259&4294967295,D=M+(P<<15&4294967295|P>>>17),P=R+(M^(D|~g))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+g&4294967295,v.g[1]=v.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,v.g[2]=v.g[2]+D&4294967295,v.g[3]=v.g[3]+M&4294967295}r.prototype.u=function(v,g){g===void 0&&(g=v.length);for(var R=g-this.blockSize,S=this.B,D=this.h,M=0;M<g;){if(D==0)for(;M<=R;)i(this,v,M),M+=this.blockSize;if(typeof v=="string"){for(;M<g;)if(S[D++]=v.charCodeAt(M++),D==this.blockSize){i(this,S),D=0;break}}else for(;M<g;)if(S[D++]=v[M++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=g},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var g=1;g<v.length-8;++g)v[g]=0;var R=8*this.o;for(g=v.length-8;g<v.length;++g)v[g]=R&255,R/=256;for(this.u(v),v=Array(16),g=R=0;4>g;++g)for(var S=0;32>S;S+=8)v[R++]=this.g[g]>>>S&255;return v};function s(v,g){var R=l;return Object.prototype.hasOwnProperty.call(R,v)?R[v]:R[v]=g(v)}function o(v,g){this.h=g;for(var R=[],S=!0,D=v.length-1;0<=D;D--){var M=v[D]|0;S&&M==g||(R[D]=M,S=!1)}this.g=R}var l={};function u(v){return-128<=v&&128>v?s(v,function(g){return new o([g|0],0>g?-1:0)}):new o([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return k(c(-v));for(var g=[],R=1,S=0;v>=R;S++)g[S]=v/R|0,R*=4294967296;return new o(g,0)}function h(v,g){if(v.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(v.charAt(0)=="-")return k(h(v.substring(1),g));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(g,8)),S=m,D=0;D<v.length;D+=8){var M=Math.min(8,v.length-D),P=parseInt(v.substring(D,D+M),g);8>M?(M=c(Math.pow(g,M)),S=S.j(M).add(c(P))):(S=S.j(R),S=S.add(c(P)))}return S}var m=u(0),f=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-k(this).m();for(var v=0,g=1,R=0;R<this.g.length;R++){var S=this.i(R);v+=(0<=S?S:4294967296+S)*g,g*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C(this))return"0";if(I(this))return"-"+k(this).toString(v);for(var g=c(Math.pow(v,6)),R=this,S="";;){var D=N(R,g).g;R=w(R,D.j(g));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(v);if(R=D,C(R))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function C(v){if(v.h!=0)return!1;for(var g=0;g<v.g.length;g++)if(v.g[g]!=0)return!1;return!0}function I(v){return v.h==-1}t.l=function(v){return v=w(this,v),I(v)?-1:C(v)?0:1};function k(v){for(var g=v.g.length,R=[],S=0;S<g;S++)R[S]=~v.g[S];return new o(R,~v.h).add(f)}t.abs=function(){return I(this)?k(this):this},t.add=function(v){for(var g=Math.max(this.g.length,v.g.length),R=[],S=0,D=0;D<=g;D++){var M=S+(this.i(D)&65535)+(v.i(D)&65535),P=(M>>>16)+(this.i(D)>>>16)+(v.i(D)>>>16);S=P>>>16,M&=65535,P&=65535,R[D]=P<<16|M}return new o(R,R[R.length-1]&-2147483648?-1:0)};function w(v,g){return v.add(k(g))}t.j=function(v){if(C(this)||C(v))return m;if(I(this))return I(v)?k(this).j(k(v)):k(k(this).j(v));if(I(v))return k(this.j(k(v)));if(0>this.l(y)&&0>v.l(y))return c(this.m()*v.m());for(var g=this.g.length+v.g.length,R=[],S=0;S<2*g;S++)R[S]=0;for(S=0;S<this.g.length;S++)for(var D=0;D<v.g.length;D++){var M=this.i(S)>>>16,P=this.i(S)&65535,be=v.i(D)>>>16,Le=v.i(D)&65535;R[2*S+2*D]+=P*Le,_(R,2*S+2*D),R[2*S+2*D+1]+=M*Le,_(R,2*S+2*D+1),R[2*S+2*D+1]+=P*be,_(R,2*S+2*D+1),R[2*S+2*D+2]+=M*be,_(R,2*S+2*D+2)}for(S=0;S<g;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=g;S<2*g;S++)R[S]=0;return new o(R,0)};function _(v,g){for(;(v[g]&65535)!=v[g];)v[g+1]+=v[g]>>>16,v[g]&=65535,g++}function A(v,g){this.g=v,this.h=g}function N(v,g){if(C(g))throw Error("division by zero");if(C(v))return new A(m,m);if(I(v))return g=N(k(v),g),new A(k(g.g),k(g.h));if(I(g))return g=N(v,k(g)),new A(k(g.g),g.h);if(30<v.g.length){if(I(v)||I(g))throw Error("slowDivide_ only works with positive integers.");for(var R=f,S=g;0>=S.l(v);)R=L(R),S=L(S);var D=U(R,1),M=U(S,1);for(S=U(S,2),R=U(R,2);!C(S);){var P=M.add(S);0>=P.l(v)&&(D=D.add(R),M=P),S=U(S,1),R=U(R,1)}return g=w(v,D.j(g)),new A(D,g)}for(D=m;0<=v.l(g);){for(R=Math.max(1,Math.floor(v.m()/g.m())),S=Math.ceil(Math.log(R)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=c(R),P=M.j(g);I(P)||0<P.l(v);)R-=S,M=c(R),P=M.j(g);C(M)&&(M=f),D=D.add(M),v=w(v,P)}return new A(D,v)}t.A=function(v){return N(this,v).h},t.and=function(v){for(var g=Math.max(this.g.length,v.g.length),R=[],S=0;S<g;S++)R[S]=this.i(S)&v.i(S);return new o(R,this.h&v.h)},t.or=function(v){for(var g=Math.max(this.g.length,v.g.length),R=[],S=0;S<g;S++)R[S]=this.i(S)|v.i(S);return new o(R,this.h|v.h)},t.xor=function(v){for(var g=Math.max(this.g.length,v.g.length),R=[],S=0;S<g;S++)R[S]=this.i(S)^v.i(S);return new o(R,this.h^v.h)};function L(v){for(var g=v.g.length+1,R=[],S=0;S<g;S++)R[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(R,v.h)}function U(v,g){var R=g>>5;g%=32;for(var S=v.g.length-R,D=[],M=0;M<S;M++)D[M]=0<g?v.i(M+R)>>>g|v.i(M+R+1)<<32-g:v.i(M+R);return new o(D,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,yi=o}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,va,kE,zu,Uf,xE,RE,PE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var O=a[E];if(!(O in p))break e;p=p[O]}a=a[a.length-1],E=p[a],d=d(E),d!=E&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,E=!1,O={next:function(){if(!E&&p<a.length){var F=p++;return{value:d(F,a[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function m(a,d,p){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),a.apply(d,O)}}return function(){return a.apply(d,arguments)}}function f(a,d,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,f.apply(null,arguments)}function y(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function C(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(E,O,F){for(var q=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)q[Ue-2]=arguments[Ue];return d.prototype[O].apply(E,q)}}function I(a){const d=a.length;if(0<d){const p=Array(d);for(let E=0;E<d;E++)p[E]=a[E];return p}return[]}function k(a,d){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const O=a.length||0,F=E.length||0;a.length=O+F;for(let q=0;q<F;q++)a[O+q]=E[q]}else a.push(E)}}class w{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var L=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function U(a,d,p){for(const E in a)d.call(p,a[E],E,a)}function v(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function g(a){const d={};for(const p in a)d[p]=a[p];return d}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)a[p]=E[p];for(let F=0;F<R.length;F++)p=R[F],Object.prototype.hasOwnProperty.call(E,p)&&(a[p]=E[p])}}function D(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function M(a){l.setTimeout(()=>{throw a},0)}function P(){var a=K;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class be{constructor(){this.h=this.g=null}add(d,p){const E=Le.get();E.set(d,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Le=new w(()=>new ce,a=>a.reset());class ce{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,j=!1,K=new be,te=()=>{const a=l.Promise.resolve(void 0);Ae=()=>{a.then(ve)}};var ve=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(p){M(p)}var d=Le;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}j=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function ae(a,d){if(he.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{N(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ge[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ae.aa.h.call(this)}}C(ae,he);var ge={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function xe(a,d,p,E,O){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!E,this.ha=O,this.key=++Ee,this.da=this.fa=!1}function me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ne(a){this.src=a,this.g={},this.h=0}Ne.prototype.add=function(a,d,p,E,O){var F=a.toString();a=this.g[F],a||(a=this.g[F]=[],this.h++);var q=tr(a,d,E,O);return-1<q?(d=a[q],p||(d.fa=!1)):(d=new xe(d,this.src,F,!!E,O),d.fa=p,a.push(d)),d};function jt(a,d){var p=d.type;if(p in a.g){var E=a.g[p],O=Array.prototype.indexOf.call(E,d,void 0),F;(F=0<=O)&&Array.prototype.splice.call(E,O,1),F&&(me(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function tr(a,d,p,E){for(var O=0;O<a.length;++O){var F=a[O];if(!F.da&&F.listener==d&&F.capture==!!p&&F.ha==E)return O}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Lr={};function ys(a,d,p,E,O){if(Array.isArray(d)){for(var F=0;F<d.length;F++)ys(a,d[F],p,E,O);return null}return p=Vn(p),a&&a[H]?a.K(d,p,c(E)?!!E.capture:!!E,O):Oi(a,d,p,!1,E,O)}function Oi(a,d,p,E,O,F){if(!d)throw Error("Invalid event type");var q=c(O)?!!O.capture:!!O,Ue=Fr(a);if(Ue||(a[Mi]=Ue=new Ne(a)),p=Ue.add(d,p,E,q,F),p.proxy)return p;if(E=zo(),p.proxy=E,E.src=a,E.listener=p,a.addEventListener)ne||(O=q),O===void 0&&(O=!1),a.addEventListener(d.toString(),E,O);else if(a.attachEvent)a.attachEvent(rr(d.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function zo(){function a(p){return d.call(a.src,a.listener,p)}const d=Ut;return a}function nr(a,d,p,E,O){if(Array.isArray(d))for(var F=0;F<d.length;F++)nr(a,d[F],p,E,O);else E=c(E)?!!E.capture:!!E,p=Vn(p),a&&a[H]?(a=a.i,d=String(d).toString(),d in a.g&&(F=a.g[d],p=tr(F,p,E,O),-1<p&&(me(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete a.g[d],a.h--)))):a&&(a=Fr(a))&&(d=a.g[d.toString()],a=-1,d&&(a=tr(d,p,E,O)),(p=-1<a?d[a]:null)&&vt(p))}function vt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[H])jt(d.i,a);else{var p=a.type,E=a.proxy;d.removeEventListener?d.removeEventListener(p,E,a.capture):d.detachEvent?d.detachEvent(rr(p),E):d.addListener&&d.removeListener&&d.removeListener(E),(p=Fr(d))?(jt(p,a),p.h==0&&(p.src=null,d[Mi]=null)):me(a)}}}function rr(a){return a in Lr?Lr[a]:Lr[a]="on"+a}function Ut(a,d){if(a.da)a=!0;else{d=new ae(d,this);var p=a.listener,E=a.ha||a.src;a.fa&&vt(a),a=p.call(E,d)}return a}function Fr(a){return a=a[Mi],a instanceof Ne?a:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vn(a){return typeof a=="function"?a:(a[fn]||(a[fn]=function(d){return a.handleEvent(d)}),a[fn])}function Oe(){pe.call(this),this.i=new Ne(this),this.M=this,this.F=null}C(Oe,pe),Oe.prototype[H]=!0,Oe.prototype.removeEventListener=function(a,d,p,E){nr(this,a,d,p,E)};function nt(a,d){var p,E=a.F;if(E)for(p=[];E;E=E.F)p.push(E);if(a=a.M,E=d.type||d,typeof d=="string")d=new he(d,a);else if(d instanceof he)d.target=d.target||a;else{var O=d;d=new he(E,a),S(d,O)}if(O=!0,p)for(var F=p.length-1;0<=F;F--){var q=d.g=p[F];O=vs(q,E,!0,d)&&O}if(q=d.g=a,O=vs(q,E,!0,d)&&O,O=vs(q,E,!1,d)&&O,p)for(F=0;F<p.length;F++)q=d.g=p[F],O=vs(q,E,!1,d)&&O}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],E=0;E<p.length;E++)me(p[E]);delete a.g[d],a.h--}}this.F=null},Oe.prototype.K=function(a,d,p,E){return this.i.add(String(a),d,!1,p,E)},Oe.prototype.L=function(a,d,p,E){return this.i.add(String(a),d,!0,p,E)};function vs(a,d,p,E){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,F=0;F<d.length;++F){var q=d[F];if(q&&!q.da&&q.capture==p){var Ue=q.listener,Tt=q.ha||q.src;q.fa&&jt(a.i,q),O=Ue.call(Tt,E)!==!1&&O}}return O&&!E.defaultPrevented}function zt(a,d,p){if(typeof a=="function")p&&(a=f(a,p));else if(a&&typeof a.handleEvent=="function")a=f(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function jr(a){a.g=zt(()=>{a.g=null,a.i&&(a.i=!1,jr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Vi extends pe{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(a){pe.call(this),this.h=a,this.g={}}C(Ur,pe);var We=[];function Pl(a){U(a.g,function(d,p){this.g.hasOwnProperty(p)&&vt(d)},a),a.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Pl(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=l.JSON.stringify,Ln=l.JSON.parse,_s=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Bo(){}Bo.prototype.h=null;function zr(a){return a.h||(a.h=a.i())}function bl(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ws(){he.call(this,"d")}C(ws,he);function $o(){he.call(this,"c")}C($o,he);var Fn={},Br=null;function $r(){return Br=Br||new Oe}Fn.La="serverreachability";function Wr(a){he.call(this,Fn.La,a)}C(Wr,he);function ir(a){const d=$r();nt(d,new Wr(d))}Fn.STAT_EVENT="statevent";function Wo(a,d){he.call(this,Fn.STAT_EVENT,a),this.stat=d}C(Wo,he);function dt(a){const d=$r();nt(d,new Wo(d,a))}Fn.Ma="timingevent";function sr(a,d){he.call(this,Fn.Ma,a),this.size=d}C(sr,he);function or(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function Ho(a,d,p,E,O,F){a.info(function(){if(a.g)if(F)for(var q="",Ue=F.split("&"),Tt=0;Tt<Ue.length;Tt++){var Pe=Ue[Tt].split("=");if(1<Pe.length){var Rt=Pe[0];Pe=Pe[1];var Pt=Rt.split("_");q=2<=Pt.length&&Pt[1]=="type"?q+(Rt+"="+Pe+"&"):q+(Rt+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+d+`
`+p+`
`+q})}function Pd(a,d,p,E,O,F,q){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+d+`
`+p+`
`+F+" "+q})}function jn(a,d,p,E){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Nd(a,p)+(E?" "+E:"")})}function bd(a,d){a.info(function(){return"TIMEOUT: "+d})}Li.prototype.info=function(){};function Nd(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var E=p[a];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return He(p)}catch{return d}}var Ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Es={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qo;function Ts(){}C(Ts,Bo),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},qo=new Ts;function Un(a,d,p,E){this.j=a,this.i=d,this.l=p,this.R=E||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var Dl={},Go={};function Ko(a,d,p){a.L=1,a.v=Cs(nn(d)),a.m=p,a.P=!0,Ml(a,null)}function Ml(a,d){a.F=Date.now(),qt(a),a.A=nn(a.v);var p=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),V(p.i,"t",E),a.C=0,p=a.j.J,a.h=new Nl,a.g=bg(a.j,p?d:null,!a.m),0<a.O&&(a.M=new Vi(f(a.Y,a,a.g),a.O)),d=a.U,p=a.g,E=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(We[0]=O.toString()),O=We);for(var F=0;F<O.length;F++){var q=ys(p,O[F],E||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ir(),Ho(a.i,a.u,a.A,a.l,a.R,a.m)}Un.prototype.ca=function(a){a=a.target;const d=this.M;d&&ur(a)==3?d.j():this.Y(a)},Un.prototype.Y=function(a){try{if(a==this.g)e:{const Pt=ur(this.g);var d=this.g.Ba();const xs=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||wg(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=xs?ir(3):ir(2)),Yo(this);var p=this.g.Z();this.X=p;t:if(Ol(this)){var E=wg(this.g);a="";var O=E.length,F=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),Fi(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,a+=this.h.i.decode(E[d],{stream:!(F&&d==O-1)});E.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,Pd(this.i,this.u,this.A,this.l,this.R,Pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Tt=this.g;if((Ue=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ue)){var Pe=Ue;break t}}Pe=null}if(p=Pe)jn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xo(this,p);else{this.o=!1,this.s=3,dt(12),ar(this),Fi(this);break e}}if(this.P){p=!0;let In;for(;!this.J&&this.C<q.length;)if(In=Dd(this,q),In==Go){Pt==4&&(this.s=4,dt(14),p=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Dl){this.s=4,dt(15),jn(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else jn(this.i,this.l,In,null),Xo(this,In);if(Ol(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||q.length!=0||this.h.h||(this.s=1,dt(16),p=!1),this.o=this.o&&p,!p)jn(this.i,this.l,q,"[Invalid Chunked Response]"),ar(this),Fi(this);else if(0<q.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Hd(Rt),Rt.M=!0,dt(11))}}else jn(this.i,this.l,q,null),Xo(this,q);Pt==4&&ar(this),this.o&&!this.J&&(Pt==4?kg(this.j,this):(this.o=!1,qt(this)))}else fS(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),ar(this),Fi(this)}}}catch{}finally{}};function Ol(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Dd(a,d){var p=a.C,E=d.indexOf(`
`,p);return E==-1?Go:(p=Number(d.substring(p,E)),isNaN(p)?Dl:(E+=1,E+p>d.length?Go:(d=d.slice(E,E+p),a.C=E+p,d)))}Un.prototype.cancel=function(){this.J=!0,ar(this)};function qt(a){a.S=Date.now()+a.I,Vl(a,a.I)}function Vl(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=or(f(a.ba,a),d)}function Yo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Un.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(bd(this.i,this.A),this.L!=2&&(ir(),dt(17)),ar(this),this.s=2,Fi(this)):Vl(this,this.S-a)};function Fi(a){a.j.G==0||a.J||kg(a.j,a)}function ar(a){Yo(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Pl(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Xo(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||Qo(p.h,a))){if(!a.K&&Qo(p.h,a)&&p.G==3){try{var E=p.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Yl(p),Gl(p);else break e;Wd(p),dt(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=or(f(p.Za,p),6e3));if(1>=jl(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Bi(p,11)}else if((a.K||p.g==a)&&Yl(p),!_(d))for(O=p.Da.g.parse(d),d=0;d<O.length;d++){let Pe=O[d];if(p.T=Pe[0],Pe=Pe[1],p.G==2)if(Pe[0]=="c"){p.K=Pe[1],p.ia=Pe[2];const Rt=Pe[3];Rt!=null&&(p.la=Rt,p.j.info("VER="+p.la));const Pt=Pe[4];Pt!=null&&(p.Aa=Pt,p.j.info("SVER="+p.Aa));const xs=Pe[5];xs!=null&&typeof xs=="number"&&0<xs&&(E=1.5*xs,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const In=a.g;if(In){const Ql=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ql){var F=E.h;F.g||Ql.indexOf("spdy")==-1&&Ql.indexOf("quic")==-1&&Ql.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Jo(F,F.h),F.h=null))}if(E.D){const qd=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;qd&&(E.ya=qd,Fe(E.I,E.D,qd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var q=a;if(E.qa=Pg(E,E.J?E.ia:null,E.W),q.K){Ul(E.h,q);var Ue=q,Tt=E.L;Tt&&(Ue.I=Tt),Ue.B&&(Yo(Ue),qt(Ue)),E.g=q}else Cg(E);0<p.i.length&&Kl(p)}else Pe[0]!="stop"&&Pe[0]!="close"||Bi(p,7);else p.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Bi(p,7):$d(p):Pe[0]!="noop"&&p.l&&p.l.ta(Pe),p.v=0)}}ir(4)}catch{}}var Md=class{constructor(a,d){this.g=a,this.map=d}};function Ll(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jl(a){return a.h?1:a.g?a.g.size:0}function Qo(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Jo(a,d){a.g?a.g.add(d):a.h=d}function Ul(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ll.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return I(a.i)}function Od(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,E=0;E<p;E++)d.push(a[E]);return d}d=[],p=0;for(E in a)d[p++]=a[E];return d}function Vd(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const E in a)d[p++]=E;return d}}}function Bl(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=Vd(a),E=Od(a),O=E.length,F=0;F<O;F++)d.call(void 0,E[F],p&&p[F],a)}var Zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var E=a[p].indexOf("="),O=null;if(0<=E){var F=a[p].substring(0,E);O=a[p].substring(E+1)}else F=a[p];d(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function lr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof lr){this.h=a.h,Is(this,a.j),this.o=a.o,this.g=a.g,Ss(this,a.s),this.l=a.l;var d=a.i,p=new Hr;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),$l(this,p),this.m=a.m}else a&&(d=String(a).match(Zo))?(this.h=!1,Is(this,d[1]||"",!0),this.o=ji(d[2]||""),this.g=ji(d[3]||"",!0),Ss(this,d[4]),this.l=ji(d[5]||"",!0),$l(this,d[6]||"",!0),this.m=ji(d[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}lr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ui(d,Wl,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ui(d,Wl,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ui(p,p.charAt(0)=="/"?Ud:jd,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ui(p,Bd)),a.join("")};function nn(a){return new lr(a)}function Is(a,d,p){a.j=p?ji(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ss(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function $l(a,d,p){d instanceof Hr?(a.i=d,G(a.i,a.h)):(p||(d=Ui(d,zd)),a.i=new Hr(d,a.h))}function Fe(a,d,p){a.i.set(d,p)}function Cs(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ji(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,Fd),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Fd(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Wl=/[#\/\?@]/g,jd=/[#\?:]/g,Ud=/[#\?]/g,zd=/[#\?@]/g,Bd=/#/g;function Hr(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function pn(a){a.g||(a.g=new Map,a.h=0,a.i&&Ld(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Hr.prototype,t.add=function(a,d){pn(this),this.i=null,a=$(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function Hl(a,d){pn(a),d=$(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function b(a,d){return pn(a),d=$(a,d),a.g.has(d)}t.forEach=function(a,d){pn(this),this.g.forEach(function(p,E){p.forEach(function(O){a.call(d,O,E,this)},this)},this)},t.na=function(){pn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let E=0;E<d.length;E++){const O=a[E];for(let F=0;F<O.length;F++)p.push(d[E])}return p},t.V=function(a){pn(this);let d=[];if(typeof a=="string")b(this,a)&&(d=d.concat(this.g.get($(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return pn(this),this.i=null,a=$(this,a),b(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function V(a,d,p){Hl(a,d),0<p.length&&(a.i=null,a.g.set($(a,d),I(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var E=d[p];const F=encodeURIComponent(String(E)),q=this.V(E);for(E=0;E<q.length;E++){var O=F;q[E]!==""&&(O+="="+encodeURIComponent(String(q[E]))),a.push(O)}}return this.i=a.join("&")};function $(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function G(a,d){d&&!a.j&&(pn(a),a.i=null,a.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(Hl(this,E),V(this,O,p))},a)),a.j=d}function re(a,d){const p=new Li;if(l.Image){const E=new Image;E.onload=y(oe,p,"TestLoadImage: loaded",!0,d,E),E.onerror=y(oe,p,"TestLoadImage: error",!1,d,E),E.onabort=y(oe,p,"TestLoadImage: abort",!1,d,E),E.ontimeout=y(oe,p,"TestLoadImage: timeout",!1,d,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else d(!1)}function ie(a,d){const p=new Li,E=new AbortController,O=setTimeout(()=>{E.abort(),oe(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:E.signal}).then(F=>{clearTimeout(O),F.ok?oe(p,"TestPingServer: ok",!0,d):oe(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),oe(p,"TestPingServer: error",!1,d)})}function oe(a,d,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function _e(){this.g=new _s}function je(a,d,p){const E=p||"";try{Bl(a,function(O,F){let q=O;c(O)&&(q=He(O)),d.push(E+F+"="+encodeURIComponent(q))})}catch(O){throw d.push(E+"type="+encodeURIComponent("_badmap")),O}}function X(a){this.l=a.Ub||null,this.j=a.eb||!1}C(X,Bo),X.prototype.g=function(){return new we(this.l,this.j)},X.prototype.i=function(a){return function(){return a}}({});function we(a,d){Oe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(we,Oe),t=we.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,zn(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ht(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qe(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qe(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ht(this):zn(this),this.readyState==3&&Qe(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ht(this))},t.Qa=function(a){this.g&&(this.response=a,ht(this))},t.ga=function(){this.g&&ht(this)};function ht(a){a.readyState=4,a.l=null,a.j=null,a.v=null,zn(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function zn(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(we.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function As(a){let d="";return U(a,function(p,E){d+=E,d+=":",d+=p,d+=`\r
`}),d}function zi(a,d,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=As(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Fe(a,d,p))}function Ye(a){Oe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ye,Oe);var mg=/^https?$/i,hS=["POST","PUT"];t=Ye.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qo.g(),this.v=this.o?zr(this.o):zr(qo),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(F){gg(this,F);return}if(a=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())p.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hS,d,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of p)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_g(this),this.u=!0,this.g.send(a),this.u=!1}catch(F){gg(this,F)}};function gg(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,yg(a),ql(a)}function yg(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vg(this):this.bb())},t.bb=function(){vg(this)};function vg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||ur(a)!=4||a.Z()!=2)){if(a.u&&ur(a)==4)zt(a.Ea,0,a);else if(nt(a,"readystatechange"),ur(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var E;if(E=q===0){var O=String(a.D).match(Zo)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),E=!mg.test(O?O.toLowerCase():"")}p=E}if(p)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var F=2<ur(a)?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.Z()+"]",yg(a)}}finally{ql(a)}}}}function ql(a,d){if(a.g){_g(a);const p=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||nt(a,"ready");try{p.onreadystatechange=E}catch{}}}function _g(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function ur(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Ln(d)}};function wg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fS(a){const d={};a=(a.g&&2<=ur(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(_(a[E]))continue;var p=D(a[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=d[O]||[];d[O]=F,F.push(p)}v(d,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function Eg(a){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,a),this.cb=ea("retryDelaySeedMs",1e4,a),this.Wa=ea("forwardChannelMaxRetries",2,a),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ll(a&&a.concurrentRequestLimit),this.Da=new _e,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Eg.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,E){dt(0),this.W=a,this.H=d||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=Pg(this,null,this.W),Kl(this)};function $d(a){if(Tg(a),a.G==3){var d=a.U++,p=nn(a.I);if(Fe(p,"SID",a.K),Fe(p,"RID",d),Fe(p,"TYPE","terminate"),ta(a,p),d=new Un(a,a.j,d),d.L=2,d.v=Cs(nn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=bg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),qt(d)}Rg(a)}function Gl(a){a.g&&(Hd(a),a.g.cancel(),a.g=null)}function Tg(a){Gl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Yl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Kl(a){if(!Fl(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ae||te(),j||(Ae(),j=!0),K.add(d,a),a.B=0}}function pS(a,d){return jl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=or(f(a.Ga,a,d),xg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Un(this,this.j,a);let F=this.o;if(this.S&&(F?(F=g(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Sg(this,O,d),p=nn(this.I),Fe(p,"RID",a),Fe(p,"CVER",22),this.D&&Fe(p,"X-HTTP-Session-Id",this.D),ta(this,p),F&&(this.O?d="headers="+encodeURIComponent(String(As(F)))+"&"+d:this.m&&zi(p,this.m,F)),Jo(this.h,O),this.Ua&&Fe(p,"TYPE","init"),this.P?(Fe(p,"$req",d),Fe(p,"SID","null"),O.T=!0,Ko(O,p,null)):Ko(O,p,d),this.G=2}}else this.G==3&&(a?Ig(this,a):this.i.length==0||Fl(this.h)||Ig(this))};function Ig(a,d){var p;d?p=d.l:p=a.U++;const E=nn(a.I);Fe(E,"SID",a.K),Fe(E,"RID",p),Fe(E,"AID",a.T),ta(a,E),a.m&&a.o&&zi(E,a.m,a.o),p=new Un(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Sg(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Jo(a.h,p),Ko(p,E,d)}function ta(a,d){a.H&&U(a.H,function(p,E){Fe(d,E,p)}),a.l&&Bl({},function(p,E){Fe(d,E,p)})}function Sg(a,d,p){p=Math.min(a.i.length,p);var E=a.l?f(a.l.Na,a.l,a):null;e:{var O=a.i;let F=-1;for(;;){const q=["count="+p];F==-1?0<p?(F=O[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let Ue=!0;for(let Tt=0;Tt<p;Tt++){let Pe=O[Tt].g;const Rt=O[Tt].map;if(Pe-=F,0>Pe)F=Math.max(0,O[Tt].g-100),Ue=!1;else try{je(Rt,q,"req"+Pe+"_")}catch{E&&E(Rt)}}if(Ue){E=q.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,E}function Cg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ae||te(),j||(Ae(),j=!0),K.add(d,a),a.v=0}}function Wd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=or(f(a.Fa,a),xg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=or(f(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Gl(this),Ag(this))};function Hd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ag(a){a.g=new Un(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=nn(a.qa);Fe(d,"RID","rpc"),Fe(d,"SID",a.K),Fe(d,"AID",a.T),Fe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(d,"TO",a.ja),Fe(d,"TYPE","xmlhttp"),ta(a,d),a.m&&a.o&&zi(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Cs(nn(d)),p.m=null,p.P=!0,Ml(p,a)}t.Za=function(){this.C!=null&&(this.C=null,Gl(this),Wd(this),dt(19))};function Yl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function kg(a,d){var p=null;if(a.g==d){Yl(a),Hd(a),a.g=null;var E=2}else if(Qo(a.h,d))p=d.D,Ul(a.h,d),E=1;else return;if(a.G!=0){if(d.o)if(E==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var O=a.B;E=$r(),nt(E,new sr(E,p)),Kl(a)}else Cg(a);else if(O=d.s,O==3||O==0&&0<d.X||!(E==1&&pS(a,d)||E==2&&Wd(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),O){case 1:Bi(a,5);break;case 4:Bi(a,10);break;case 3:Bi(a,6);break;default:Bi(a,2)}}}function xg(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function Bi(a,d){if(a.j.info("Error code "+d),d==2){var p=f(a.fb,a),E=a.Xa;const O=!E;E=new lr(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Is(E,"https"),Cs(E),O?re(E.toString(),p):ie(E.toString(),p)}else dt(2);a.G=0,a.l&&a.l.sa(d),Rg(a),Tg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Rg(a){if(a.G=0,a.ka=[],a.l){const d=zl(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ka,d),k(a.ka,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.ra()}}function Pg(a,d,p){var E=p instanceof lr?nn(p):new lr(p);if(E.g!="")d&&(E.g=d+"."+E.g),Ss(E,E.s);else{var O=l.location;E=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var F=new lr(null);E&&Is(F,E),d&&(F.g=d),O&&Ss(F,O),p&&(F.l=p),E=F}return p=a.D,d=a.ya,p&&d&&Fe(E,p,d),Fe(E,"VER",a.la),ta(a,E),E}function bg(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ye(new X({eb:p})):new Ye(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ng(){}t=Ng.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xl(){}Xl.prototype.g=function(a,d){return new rn(a,d)};function rn(a,d){Oe.call(this),this.g=new Eg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ks(this)}C(rn,Oe),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){$d(this.g)},rn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=He(a),a=p);d.i.push(new Md(d.Ya++,a)),d.G==3&&Kl(d)},rn.prototype.N=function(){this.g.l=null,delete this.j,$d(this.g),delete this.g,rn.aa.N.call(this)};function Dg(a){ws.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(Dg,ws);function Mg(){$o.call(this),this.status=1}C(Mg,$o);function ks(a){this.g=a}C(ks,Ng),ks.prototype.ua=function(){nt(this.g,"a")},ks.prototype.ta=function(a){nt(this.g,new Dg(a))},ks.prototype.sa=function(a){nt(this.g,new Mg)},ks.prototype.ra=function(){nt(this.g,"b")},Xl.prototype.createWebChannel=Xl.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,PE=function(){return new Xl},RE=function(){return $r()},xE=Fn,Uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ke.NO_ERROR=0,Ke.TIMEOUT=8,Ke.HTTP_ERROR=6,zu=Ke,Es.COMPLETE="complete",kE=Es,bl.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,va=bl,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,AE=Ye}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore",lv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new lm("@firebase/firestore");function Vs(){return ls.logLevel}function Q(t,...e){if(ls.logLevel<=Ie.DEBUG){const n=e.map(dm);ls.debug(`Firestore (${No}): ${t}`,...n)}}function kr(t,...e){if(ls.logLevel<=Ie.ERROR){const n=e.map(dm);ls.error(`Firestore (${No}): ${t}`,...n)}}function wo(t,...e){if(ls.logLevel<=Ie.WARN){const n=e.map(dm);ls.warn(`Firestore (${No}): ${t}`,...n)}}function dm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bE(t,r,n)}function bE(t,e,n){let r=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kr(r),new Error(r)}function De(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bE(e,i,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class uR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new uR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=hR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function zf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Sh(i)===Sh(s)?Se(i,s):Sh(i)?1:-1}return Se(t.length,e.length)}const fR=55296,pR=57343;function Sh(t){const e=t.charCodeAt(0);return e>=fR&&e<=pR}function Eo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__name__";class Wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Wn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Se(e.length,n.length)}static compareSegments(e,n){const r=Wn.isNumericId(e),i=Wn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Wn.extractNumericId(e).compare(Wn.extractNumericId(n)):zf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class Be extends Wn{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Wn{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cv}static keyField(){return new Ct([cv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Be.fromString(e))}static fromName(e){return new se(Be.fromString(e).popFirst(5))}static empty(){return new se(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gR(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dv(t){if(!se.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hv(t){if(se.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ME(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ld(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function vl(t,e){if(!ME(t))throw new Y(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-62135596800,pv=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pv);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fv)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pv}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:ut("string",Ve._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Ve(0,0))}static max(){return new de(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function yR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Ei(i,se.empty(),e)}function vR(t){return new Ei(t.readTime,t.key,nl)}class Ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ei(de.min(),se.empty(),nl)}static max(){return new Ei(de.max(),se.empty(),nl)}}function _R(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ER{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==wR)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function TR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=-1;function cd(t){return t==null}function Ac(t){return t===0&&1/t==-1/0}function IR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="";function SR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mv(e)),e=CR(t.get(n),e);return mv(e)}function CR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case OE:n+="";break;default:n+=s}}return n}function mv(t){return t+OE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??St.RED,this.left=i??St.EMPTY,this.right=s??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new St(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yv(this.data.getIterator())}getIteratorFrom(e){return new yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new ln([])}unionWith(e){let n=new gt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new LE("Invalid base64 string: "+s):s}}(e);return new xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=AR.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="server_timestamp",jE="__type__",UE="__previous_value__",zE="__local_write_time__";function pm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jE])==null?void 0:r.stringValue)===FE}function dd(t){const e=t.mapValue.fields[UE];return pm(e)?dd(e):e}function rl(t){const e=Ti(t.mapValue.fields[zE].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,i,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const kc="(default)";class il{constructor(e,n){this.projectId=e,this.database=n||kc}static empty(){return new il("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="__type__",$E="__max__",vu={mapValue:{fields:{__type__:{stringValue:$E}}}},WE="__vector__",xc="value";function Si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:RR(t)?9007199254740991:xR(t)?10:11:ue(28295,{value:t})}function er(t,e){if(t===e)return!0;const n=Si(t);if(n!==Si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ti(i.timestampValue),l=Ti(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ii(i.bytesValue).isEqual(Ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return it(i.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(i.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return it(i.integerValue)===it(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=it(i.doubleValue),l=it(s.doubleValue);return o===l?Ac(o)===Ac(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(gv(o)!==gv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!er(o[u],l[u])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function sl(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function To(t,e){if(t===e)return 0;const n=Si(t),r=Si(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=it(s.integerValue||s.doubleValue),u=it(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return vv(t.timestampValue,e.timestampValue);case 4:return vv(rl(t),rl(e));case 5:return zf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Ii(s),u=Ii(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Se(l[c],u[c]);if(h!==0)return h}return Se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Se(it(s.latitude),it(o.latitude));return l!==0?l:Se(it(s.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _v(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,y,C,I;const l=s.fields||{},u=o.fields||{},c=(f=l[xc])==null?void 0:f.arrayValue,h=(y=u[xc])==null?void 0:y.arrayValue,m=Se(((C=c==null?void 0:c.values)==null?void 0:C.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return m!==0?m:_v(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===vu.mapValue&&o===vu.mapValue)return 0;if(s===vu.mapValue)return 1;if(o===vu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const f=zf(u[m],h[m]);if(f!==0)return f;const y=To(l[u[m]],c[h[m]]);if(y!==0)return y}return Se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ti(t),r=Ti(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function _v(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=To(n[i],r[i]);if(s)return s}return Se(n.length,r.length)}function Io(t){return Bf(t)}function Bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ti(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Bf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Bf(n.fields[o])}`;return i+"}"}(t.mapValue):ue(61005,{value:t})}function Bu(t){switch(Si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(t);return e?16+Bu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Bu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Pi(r.fields,(s,o)=>{i+=s.length+Bu(o)}),i}(t.mapValue);default:throw ue(13486,{value:t})}}function wv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $f(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function Ev(t){return!!t&&"nullValue"in t}function Tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $u(t){return!!t&&"mapValue"in t}function xR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BE])==null?void 0:r.stringValue)===WE}function Da(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Da(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Da(t.arrayValue.values[n]);return e}return{...t}}function RR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Da(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Da(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$u(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(Da(this.value))}}function HE(t){const e=[];return Pi(t.fields,(n,r)=>{const i=new Ct([n]);if($u(r)){const s=HE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,de.min(),de.min(),de.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new Vt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Vt(e,2,n,de.min(),de.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,de.min(),de.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.position=e,this.inclusive=n}}function Iv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=To(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function PR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class lt extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NR(e,n,r):n==="array-contains"?new OR(e,r):n==="in"?new VR(e,r):n==="not-in"?new LR(e,r):n==="array-contains-any"?new FR(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DR(e,r):new MR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(To(n,this.value)):n!==null&&Si(this.value)===Si(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Mn(e,n)}matches(e){return GE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GE(t){return t.op==="and"}function KE(t){return bR(t)&&GE(t)}function bR(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function Wf(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Io(t.value);if(KE(t))return t.filters.map(e=>Wf(e)).join(",");{const e=t.filters.map(n=>Wf(n)).join(",");return`${t.op}(${e})`}}function YE(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(t,e):t instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&YE(o,i.filters[l]),!0):!1}(t,e):void ue(19439)}function XE(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(XE).join(" ,")+"}"}(t):"Filter"}class NR extends lt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class DR extends lt{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MR extends lt{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class OR extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&sl(n.arrayValue,this.value)}}class VR extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class LR extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sl(this.value.arrayValue,n)}}class FR extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Cv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jR(t,e,n,r,i,s,o)}function gm(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Io(r)).join(",")),e.Te=n}return e.Te}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sv(t.startAt,e.startAt)&&Sv(t.endAt,e.endAt)}function Hf(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UR(t,e,n,r,i,s,o,l){return new _l(t,e,n,r,i,s,o,l)}function vm(t){return new _l(t)}function Av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JE(t){return t.collectionGroup!==null}function Ma(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new gt(Ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Pc(s,r))}),n.has(Ct.keyField().canonicalString())||e.Ie.push(new Pc(Ct.keyField(),r))}return e.Ie}function Yn(t){const e=fe(t);return e.Ee||(e.Ee=zR(e,Ma(t))),e.Ee}function zR(t,e){if(t.limitType==="F")return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pc(i.field,s)});const n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qf(t,e){const n=t.filters.concat([e]);return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gf(t,e,n){return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hd(t,e){return ym(Yn(t),Yn(e))&&t.limitType===e.limitType}function ZE(t){return`${gm(Yn(t))}|lt:${t.limitType}`}function Ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XE(i)).join(", ")}]`),cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Io(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Io(i)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function fd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ma(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Iv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Ma(r),i)||r.endAt&&!function(o,l,u){const c=Iv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Ma(r),i))}(t,e)}function BR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function e1(t){return(e,n)=>{let r=!1;for(const i of Ma(t)){const s=$R(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $R(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?To(u,c):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return VE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new tt(se.comparator);function Rr(){return WR}const t1=new tt(se.comparator);function _a(...t){let e=t1;for(const n of t)e=e.insert(n.key,n);return e}function n1(t){let e=t1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xi(){return Oa()}function r1(){return Oa()}function Oa(){return new ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const HR=new tt(se.comparator),qR=new gt(se.comparator);function Ce(...t){let e=qR;for(const n of t)e=e.add(n);return e}const GR=new gt(Se);function KR(){return GR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(e)?"-0":e}}function i1(t){return{integerValue:""+t}}function YR(t,e){return IR(e)?i1(e):_m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function XR(t,e,n){return t instanceof bc?function(i,s){const o={fields:{[jE]:{stringValue:FE},[zE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pm(s)&&(s=dd(s)),s&&(o.fields[UE]=s),{mapValue:o}}(n,e):t instanceof ol?o1(t,e):t instanceof al?a1(t,e):function(i,s){const o=s1(i,s),l=kv(o)+kv(i.Ae);return $f(o)&&$f(i.Ae)?i1(l):_m(i.serializer,l)}(t,e)}function QR(t,e,n){return t instanceof ol?o1(t,e):t instanceof al?a1(t,e):n}function s1(t,e){return t instanceof Nc?function(r){return $f(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class bc extends pd{}class ol extends pd{constructor(e){super(),this.elements=e}}function o1(t,e){const n=l1(e);for(const r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}class al extends pd{constructor(e){super(),this.elements=e}}function a1(t,e){let n=l1(e);for(const r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}class Nc extends pd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kv(t){return it(t.integerValue||t.doubleValue)}function l1(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ol&&i instanceof ol||r instanceof al&&i instanceof al?Eo(r.elements,i.elements,er):r instanceof Nc&&i instanceof Nc?er(r.Ae,i.Ae):r instanceof bc&&i instanceof bc}(t.transform,e.transform)}class ZR{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class md{}function u1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wm(t.key,bn.none()):new wl(t.key,t.data,bn.none());{const n=t.data,r=Yt.empty();let i=new gt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bi(t.key,r,new ln(i.toArray()),bn.none())}}function eP(t,e,n){t instanceof wl?function(i,s,o){const l=i.value.clone(),u=Rv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof bi?function(i,s,o){if(!Wu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Rv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(c1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof wl?function(s,o,l,u){if(!Wu(s.precondition,o))return l;const c=s.value.clone(),h=Pv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof bi?function(s,o,l,u){if(!Wu(s.precondition,o))return l;const c=Pv(s.fieldTransforms,u,o),h=o.data;return h.setAll(c1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Wu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function tP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=s1(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function xv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Eo(r,i,(s,o)=>JR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wl extends md{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bi extends md{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function c1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rv(t,e,n){const r=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,QR(o,l,n[i]))}return r}function Pv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,XR(s,o,e))}return r}class wm extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nP extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=r1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=u1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(n,r)=>xv(n,r))&&Eo(this.baseMutations,e.baseMutations,(n,r)=>xv(n,r))}}class Em{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return HR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Em(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iP=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,ke;function oP(t){switch(t){case z.OK:return ue(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function d1(t){if(t===void 0)return kr("GRPC error has no .code"),z.UNKNOWN;switch(t){case ot.OK:return z.OK;case ot.CANCELLED:return z.CANCELLED;case ot.UNKNOWN:return z.UNKNOWN;case ot.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ot.INTERNAL:return z.INTERNAL;case ot.UNAVAILABLE:return z.UNAVAILABLE;case ot.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ot.NOT_FOUND:return z.NOT_FOUND;case ot.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ot.ABORTED:return z.ABORTED;case ot.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ot.DATA_LOSS:return z.DATA_LOSS;default:return ue(39323,{code:t})}}(ke=ot||(ot={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new yi([4294967295,4294967295],0);function bv(t){const e=aP().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function Nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yi([n,r],0),new yi([i,s],0)]}class Tm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wa(`Invalid padding: ${n}`);if(r<0)throw new wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(yi.fromNumber(r)));return i.compare(lP)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=bv(e),[r,i]=Nv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Tm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=bv(e),[r,i]=Nv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gd(de.min(),i,new tt(Se),Rr(),Ce())}}class El{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new El(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class h1{constructor(e,n){this.targetId=e,this.Ce=n}}class f1{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Dv{constructor(){this.ve=0,this.Fe=Mv(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),r=Ce();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:s})}}),new El(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rr(),this.Je=_u(),this.He=_u(),this.Ye=new tt(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Hf(s))if(r===0){const o=new se(s.path);this.et(n,o,Vt.newNoDocument(o,de.min()))}else De(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Ii(r).toUint8Array()}catch(u){if(u instanceof LE)return wo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tm(o,i,s)}catch(u){return wo(u instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Hf(l.target)){const u=new se(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Vt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=Ce();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new gd(e,n,this.Ye,this.je,r);return this.je=Rr(),this.Je=_u(),this.He=_u(),this.Ye=new tt(Se),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _u(){return new tt(se.comparator)}function Mv(){return new tt(se.comparator)}const cP={asc:"ASCENDING",desc:"DESCENDING"},dP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hP={and:"AND",or:"OR"};class fP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kf(t,e){return t.useProto3Json||cd(e)?e:{value:e}}function Dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pP(t,e){return Dc(t,e.toTimestamp())}function Xn(t){return De(!!t,49232),de.fromTimestamp(function(n){const r=Ti(n);return new Ve(r.seconds,r.nanos)}(t))}function Im(t,e){return Yf(t,e).canonicalString()}function Yf(t,e){const n=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function m1(t){const e=Be.fromString(t);return De(w1(e),10190,{key:e.toString()}),e}function Xf(t,e){return Im(t.databaseId,e.path)}function Ch(t,e){const n=m1(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(y1(n))}function g1(t,e){return Im(t.databaseId,e)}function mP(t){const e=m1(t);return e.length===4?Be.emptyPath():y1(e)}function Qf(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y1(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ov(t,e,n){return{name:Xf(t,e),fields:n.value.mapValue.fields}}function gP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string",58123),xt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),xt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?z.UNKNOWN:d1(c.code);return new Y(h,c.message||"")}(o);n=new f1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ch(t,r.document.name),s=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):de.min(),l=new Yt({mapValue:{fields:r.document.fields}}),u=Vt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Hu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ch(t,r.document),s=r.readTime?Xn(r.readTime):de.min(),o=Vt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Hu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ch(t,r.document),s=r.removedTargetIds||[];n=new Hu([],s,i,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new sP(i,s),l=r.targetId;n=new h1(l,o)}}return n}function yP(t,e){let n;if(e instanceof wl)n={update:Ov(t,e.key,e.value)};else if(e instanceof wm)n={delete:Xf(t,e.key)};else if(e instanceof bi)n={update:Ov(t,e.key,e.data),updateMask:AP(e.fieldMask)};else{if(!(e instanceof nP))return ue(16599,{Vt:e.type});n={verify:Xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof bc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue(27497)}(t,e.precondition)),n}function vP(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Xn(i.updateTime):Xn(s);return o.isEqual(de.min())&&(o=Xn(s)),new ZR(o,i.transformResults||[])}(n,e))):[]}function _P(t,e){return{documents:[g1(t,e.path)]}}function wP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=g1(t,i);const s=function(c){if(c.length!==0)return _1(Mn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Fs(f.field),direction:IP(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Kf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function EP(t){let e=mP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const f=v1(m);return f instanceof Mn&&KE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(f=>function(C){return new Pc(js(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(m){let f;return f=typeof m=="object"?m.value:m,cd(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(m){const f=!!m.before,y=m.values||[];return new Rc(y,f)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const f=!m.before,y=m.values||[];return new Rc(y,f)}(n.endAt)),UR(e,i,o,s,l,"F",u,c)}function TP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function v1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=js(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=js(n.unaryFilter.field);return lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return lt.create(js(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>v1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function IP(t){return cP[t]}function SP(t){return dP[t]}function CP(t){return hP[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function js(t){return Ct.fromServerFormat(t.fieldPath)}function _1(t){return t instanceof lt?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:SP(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(i=>_1(i));return r.length===1?r[0]:{compositeFilter:{op:CP(n.op),filters:r}}}(t):ue(54877,{filter:t})}function AP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function w1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r,i,s=de.min(),o=de.min(),l=xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.yt=e}}function xP(t){const e=EP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.Cn=new PP}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ei.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class PP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gt(Be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E1=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(E1,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LruGarbageCollector",bP=1048576;function Fv([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class NP{constructor(e){this.Ir=e,this.buffer=new gt(Fv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Lv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?Q(Lv,"Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.Vr(3e5)})}}class MP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(ud.ce);const r=new NP(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Vv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Vs()<=Ie.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function OP(t,e){return new MP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.changes=new ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,ln.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=Xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_a();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Rr();const o=Oa(),l=function(){return Oa()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof bi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Va(h.mutation,c,h.mutation.getFieldMask(),Ve.now())):o.set(c.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>l.set(c,new LP(h,o.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oa();let i=new tt((o,l)=>o-l),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||ln.empty();h=l.applyToLocalView(c,h),r.set(u,h);const m=(i.get(l.batchId)||Ce()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,m=r1();h.forEach(f=>{if(!s.has(f)){const y=u1(n.get(f),r.get(f));y!==null&&m.set(f,y),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Xi());let l=nl,u=s;return o.next(c=>B.forEach(c,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{u=u.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ce())).next(h=>({batchId:l,changes:n1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=_a();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=_a();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,u=>{const c=function(m,f){return new _l(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,f)=>{o=o.insert(m,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Vt.newInvalidDocument(h)))});let l=_a();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Va(h.mutation,c,ln.empty(),Ve.now()),fd(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:xP(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.overlays=new tt(se.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xi();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Xi(),s=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new tt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Xi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Xi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return B.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iP(n,r));let s=this.qr.get(n);s===void 0&&(s=Ce(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.Qr=new gt(_t.$r),this.Ur=new gt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new se(new Be([])),r=new _t(n,e),i=new _t(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new Be([])),r=new _t(n,e),i=new _t(n,e+1);let s=Ce();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(_t.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rP(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new _t(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?fm:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Se);return n.forEach(i=>{const s=new _t(i,0),o=new _t(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new _t(new se(s),0);let l=new gt(Se);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Yr)),!0)},o),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const s=new _t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new _t(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.ri=e,this.docs=function(){return new tt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=Rr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rr();const o=n.path,l=new se(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_R(vR(h),r)<=0||(i.has(h.key)||fd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ue(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WP(this)}getSize(e){return B.resolve(this.size)}}class WP extends VP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.persistence=e,this.si=new ms(n=>gm(n),ym),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new Sm,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.ui={},this.overlays={},this.ci=new ud(0),this.li=!1,this.li=!0,this.hi=new zP,this.referenceDelegate=e(this),this.Pi=new HP(this),this.indexManager=new RP,this.remoteDocumentCache=function(i){return new $P(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new kP(n),this.Ii=new jP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new qP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class qP extends ER{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ri=new Sm,this.Vi=null}static mi(e){return new Cm(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=se.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mc{constructor(e,n){this.persistence=e,this.pi=new ms(r=>SR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=OP(this,n)}static mi(e,n){return new Mc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Am(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Bk()?8:TR(Ft())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new GP;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Vs()<=Ie.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Vs()<=Ie.DEBUG&&Q("QueryEngine","Query:",Ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Vs()<=Ie.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):B.resolve())}ys(e,n){if(Av(n))return B.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gf(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,o,u.readTime)?this.ys(e,Gf(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return Av(n)||i.isEqual(de.min())?B.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?B.resolve(null):(Vs()<=Ie.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(n)),this.vs(e,o,n,yR(i,nl)).next(l=>l))})}Ds(e,n){let r=new gt(e1(e));return n.forEach((i,s)=>{fd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Vs()<=Ie.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.ps.getDocumentsMatchingQuery(e,n,Ei.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="LocalStore",YP=3e8;class XP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new tt(Se),this.xs=new ms(s=>gm(s),ym),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function QP(t,e,n,r){return new XP(t,e,n,r)}async function I1(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:l}))})})}function JP(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const m=c.batch,f=m.keys();let y=B.resolve();return f.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(I=>{const k=c.docVersions.get(C);De(k!==null,48541),I.version.compareTo(k)<0&&(m.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ce();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S1(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ZP(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const f=i.get(m);if(!f)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,m)));let y=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(xt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),function(I,k,w){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=YP?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,y,h)&&l.push(n.Pi.updateTargetData(s,y))});let u=Rr(),c=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(eb(s,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(de.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=i,s))}function eb(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Q(km,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:i}})}function tb(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nb(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new si(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Jf(t,e,n){const r=fe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Mo(o))throw o;Q(km,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function jv(t,e,n){const r=fe(t);let i=de.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const m=fe(u),f=m.xs.get(h);return f!==void 0?B.resolve(m.Ms.get(f)):m.Pi.getTargetData(c,h)}(r,o,Yn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Ce())).next(l=>(rb(r,BR(e),l),{documents:l,Qs:s})))}function rb(t,e,n){let r=t.Os.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Uv{constructor(){this.activeTargetIds=KR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ib{constructor(){this.Mo=new Uv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="ConnectivityMonitor";class Bv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(zv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(zv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu=null;function Zf(){return wu===null?wu=function(){return 268435456+Math.round(2147483648*Math.random())}():wu++,"0x"+wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="RestConnection",ob={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ab{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===kc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Zf(),l=this.zo(e,n.toUriEncodedString());Q(Ah,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:c}=new URL(l),h=Po(c);return this.Jo(e,l,u,r,h).then(m=>(Q(Ah,`Received RPC '${e}' ${o}: `,m),m),m=>{throw wo(Ah,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=ob[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class ub extends ab{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Zf();return new Promise((l,u)=>{const c=new AE;c.setWithCredentials(!0),c.listenOnce(kE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zu.NO_ERROR:const m=c.getResponseJson();Q(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case zu.TIMEOUT:Q(Dt,`RPC '${e}' ${o} timed out`),u(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const f=c.getStatus();if(Q(Dt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const C=y==null?void 0:y.error;if(C&&C.status&&C.message){const I=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(C.status);u(new Y(I,C.message))}else u(new Y(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(z.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Q(Dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);Q(Dt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Zf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PE(),l=RE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Q(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);this.I_(m);let f=!1,y=!1;const C=new lb({Yo:k=>{y?Q(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(f||(Q(Dt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),f=!0),Q(Dt,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},Zo:()=>m.close()}),I=(k,w,_)=>{k.listen(w,A=>{try{_(A)}catch(N){setTimeout(()=>{throw N},0)}})};return I(m,va.EventType.OPEN,()=>{y||(Q(Dt,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),I(m,va.EventType.CLOSE,()=>{y||(y=!0,Q(Dt,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(m))}),I(m,va.EventType.ERROR,k=>{y||(y=!0,wo(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),C.a_(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),I(m,va.EventType.MESSAGE,k=>{var w;if(!y){const _=k.data[0];De(!!_,16349);const A=_,N=(A==null?void 0:A.error)||((w=A[0])==null?void 0:w.error);if(N){Q(Dt,`RPC '${e}' stream ${i} received error:`,N);const L=N.status;let U=function(R){const S=ot[R];if(S!==void 0)return d1(S)}(L),v=N.message;U===void 0&&(U=z.INTERNAL,v="Unknown error status: "+L+" with message "+N.message),y=!0,C.a_(new Y(U,v)),m.close()}else Q(Dt,`RPC '${e}' stream ${i} received:`,_),C.u_(_)}}),I(l,xE.STAT_EVENT,k=>{k.stat===Uf.PROXY?Q(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Uf.NOPROXY&&Q(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return new fP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="PersistentStream";class A1{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q($v,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q($v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cb extends A1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gP(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Xn(o.readTime):de.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Qf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Hf(u)?{documents:_P(s,u)}:{query:wP(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=p1(s,o.resumeToken);const c=Kf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=Dc(s,o.snapshotVersion.toTimestamp());const c=Kf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=TP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Qf(this.serializer),n.removeTarget=e,this.q_(n)}}class db extends A1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vP(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Qf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{}class fb extends hb{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Yf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Yf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="RemoteStore";class mb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{gs(this)&&(Q(us,"Restarting streams for network reachability change."),await async function(u){const c=fe(u);c.Ea.add(4),await Tl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await vd(c)}(this))})}),this.Ra=new pb(r,i)}}async function vd(t){if(gs(t))for(const e of t.da)await e(!0)}async function Tl(t){for(const e of t.da)await e(!1)}function k1(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bm(n)?Pm(n):Oo(n).O_()&&Rm(n,e))}function xm(t,e){const n=fe(t),r=Oo(n);n.Ia.delete(e),r.O_()&&x1(n,e),n.Ia.size===0&&(r.O_()?r.L_():gs(n)&&n.Ra.set("Unknown"))}function Rm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(t).Y_(e)}function x1(t,e){t.Va.Ue(e),Oo(t).Z_(e)}function Pm(t){t.Va=new uP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Oo(t).start(),t.Ra.ua()}function bm(t){return gs(t)&&!Oo(t).x_()&&t.Ia.size>0}function gs(t){return fe(t).Ea.size===0}function R1(t){t.Va=void 0}async function gb(t){t.Ra.set("Online")}async function yb(t){t.Ia.forEach((e,n)=>{Rm(t,e)})}async function vb(t,e){R1(t),bm(t)?(t.Ra.ha(e),Pm(t)):t.Ra.set("Unknown")}async function _b(t,e,n){if(t.Ra.set("Online"),e instanceof f1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){Q(us,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oc(t,r)}else if(e instanceof Hu?t.Va.Ze(e):e instanceof h1?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await S1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),x1(s,u);const m=new si(h.target,u,c,h.sequenceNumber);Rm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(us,"Failed to raise snapshot:",r),await Oc(t,r)}}async function Oc(t,e,n){if(!Mo(e))throw e;t.Ea.add(1),await Tl(t),t.Ra.set("Offline"),n||(n=()=>S1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(us,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vd(t)})}function P1(t,e){return e().catch(n=>Oc(t,n,e))}async function _d(t){const e=fe(t),n=Ci(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fm;for(;wb(e);)try{const i=await tb(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Eb(e,i)}catch(i){await Oc(e,i)}b1(e)&&N1(e)}function wb(t){return gs(t)&&t.Ta.length<10}function Eb(t,e){t.Ta.push(e);const n=Ci(t);n.O_()&&n.X_&&n.ea(e.mutations)}function b1(t){return gs(t)&&!Ci(t).x_()&&t.Ta.length>0}function N1(t){Ci(t).start()}async function Tb(t){Ci(t).ra()}async function Ib(t){const e=Ci(t);for(const n of t.Ta)e.ea(n.mutations)}async function Sb(t,e,n){const r=t.Ta.shift(),i=Em.from(r,e,n);await P1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _d(t)}async function Cb(t,e){e&&Ci(t).X_&&await async function(r,i){if(function(o){return oP(o)&&o!==z.ABORTED}(i.code)){const s=r.Ta.shift();Ci(r).B_(),await P1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _d(r)}}(t,e),b1(t)&&N1(t)}async function Wv(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Q(us,"RemoteStore received new credentials");const r=gs(n);n.Ea.add(3),await Tl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vd(n)}async function Ab(t,e){const n=fe(t);e?(n.Ea.delete(2),await vd(n)):e||(n.Ea.add(2),await Tl(n),n.Ra.set("Unknown"))}function Oo(t){return t.ma||(t.ma=function(n,r,i){const s=fe(n);return s.sa(),new cb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:gb.bind(null,t),t_:yb.bind(null,t),r_:vb.bind(null,t),H_:_b.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bm(t)?Pm(t):t.Ra.set("Unknown")):(await t.ma.stop(),R1(t))})),t.ma}function Ci(t){return t.fa||(t.fa=function(n,r,i){const s=fe(n);return s.sa(),new db(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Tb.bind(null,t),r_:Cb.bind(null,t),ta:Ib.bind(null,t),na:Sb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await _d(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(us,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Nm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(kr("AsyncQueue",`${e}: ${t}`),Mo(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=_a(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.ga=new tt(se.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Co{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Co(e,n,io.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xb{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=qv(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function qv(){return new ms(t=>ZE(t),hd)}async function D1(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new kb,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Dm(o,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Mm(n)}async function M1(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Rb(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Mm(n)}function Pb(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Mm(t){t.Ca.forEach(e=>{e.next()})}var ep,Gv;(Gv=ep||(ep={})).Ma="default",Gv.Cache="cache";class O1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.key=e}}class L1{constructor(e){this.key=e}}class bb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=e1(e),this.tu=new io(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hv,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const f=i.get(h),y=fd(this.query,m)?m:null,C=!!f&&this.mutatedKeys.has(f.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;f&&y?f.data.isEqual(y.data)?C!==I&&(r.track({type:3,doc:y}),k=!0):this.su(f,y)||(r.track({type:2,doc:y}),k=!0,(u&&this.eu(y,u)>0||c&&this.eu(y,c)<0)&&(l=!0)):!f&&y?(r.track({type:0,doc:y}),k=!0):f&&!y&&(r.track({type:1,doc:f}),k=!0,(u||c)&&(l=!0)),k&&(y?(o=o.add(y),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(y,C){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:k})}};return I(y)-I(C)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new Co(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new L1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new V1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Om="SyncEngine";class Nb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Db{constructor(e){this.key=e,this.hu=!1}}class Mb{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ms(l=>ZE(l),hd),this.Iu=new Map,this.Eu=new Set,this.du=new tt(se.comparator),this.Au=new Map,this.Ru=new Sm,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ob(t,e,n=!0){const r=$1(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await F1(r,e,n,!0),i}async function Vb(t,e){const n=$1(t);await F1(n,e,!0,!1)}async function F1(t,e,n,r){const i=await nb(t.localStore,Yn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await Lb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&k1(t.remoteStore,i),l}async function Lb(t,e,n,r,i){t.pu=(m,f,y)=>async function(I,k,w,_){let A=k.view.ru(w);A.Cs&&(A=await jv(I.localStore,k.query,!1).then(({documents:v})=>k.view.ru(v,A)));const N=_&&_.targetChanges.get(k.targetId),L=_&&_.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(A,I.isPrimaryClient,N,L);return Yv(I,k.targetId,U.au),U.snapshot}(t,m,f,y);const s=await jv(t.localStore,e,!0),o=new bb(e,s.Qs),l=o.ru(s.documents),u=El.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Yv(t,n,c.au);const h=new Nb(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Fb(t,e,n){const r=fe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!hd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xm(r.remoteStore,i.targetId),tp(r,i.targetId)}).catch(Do)):(tp(r,i.targetId),await Jf(r.localStore,i.targetId,!0))}async function jb(t,e){const n=fe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xm(n.remoteStore,r.targetId))}async function Ub(t,e,n){const r=Gb(t);try{const i=await function(o,l){const u=fe(o),c=Ve.now(),h=l.reduce((y,C)=>y.add(C.key),Ce());let m,f;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Rr(),I=Ce();return u.Ns.getEntries(y,h).next(k=>{C=k,C.forEach((w,_)=>{_.isValidDocument()||(I=I.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(k=>{m=k;const w=[];for(const _ of l){const A=tP(_,m.get(_.key).overlayedDocument);A!=null&&w.push(new bi(_.key,A,HE(A.value.mapValue),bn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,w,l)}).next(k=>{f=k;const w=k.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(y,k.batchId,w)})}).then(()=>({batchId:f.batchId,changes:n1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new tt(Se)),c=c.insert(l,u),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await Il(r,i.changes),await _d(r.remoteStore)}catch(i){const s=Dm(i,"Failed to persist write");n.reject(s)}}async function j1(t,e){const n=fe(t);try{const r=await ZP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?De(o.hu,14607):i.removedDocuments.size>0&&(De(o.hu,42227),o.hu=!1))}),await Il(n,r,e)}catch(r){await Do(r)}}function Kv(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=fe(o);u.onlineState=l;let c=!1;u.queries.forEach((h,m)=>{for(const f of m.Sa)f.va(l)&&(c=!0)}),c&&Mm(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zb(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new tt(se.comparator);o=o.insert(s,Vt.newNoDocument(s,de.min()));const l=Ce().add(s),u=new gd(de.min(),new Map,new tt(Se),o,l);await j1(r,u),r.du=r.du.remove(s),r.Au.delete(e),Vm(r)}else await Jf(r.localStore,e,!1).then(()=>tp(r,e,n)).catch(Do)}async function Bb(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await JP(n.localStore,e);z1(n,r,null),U1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Il(n,i)}catch(i){await Do(i)}}async function $b(t,e,n){const r=fe(t);try{const i=await function(o,l){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(De(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);z1(r,e,n),U1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Il(r,i)}catch(i){await Do(i)}}function U1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function z1(t,e,n){const r=fe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||B1(t,r)})}function B1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Vm(t))}function Yv(t,e,n){for(const r of n)r instanceof V1?(t.Ru.addReference(r.key,e),Wb(t,r)):r instanceof L1?(Q(Om,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||B1(t,r.key)):ue(19791,{wu:r})}function Wb(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(Om,"New document in limbo: "+n),t.Eu.add(r),Vm(t))}function Vm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se(Be.fromString(e)),r=t.fu.next();t.Au.set(r,new Db(n)),t.du=t.du.insert(n,r),k1(t.remoteStore,new si(Yn(vm(n.path)),r,"TargetPurposeLimboResolution",ud.ce))}}async function Il(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=Am.As(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,c){const h=fe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(c,f=>B.forEach(f.Es,y=>h.persistence.referenceDelegate.addReference(m,f.targetId,y)).next(()=>B.forEach(f.ds,y=>h.persistence.referenceDelegate.removeReference(m,f.targetId,y)))))}catch(m){if(!Mo(m))throw m;Q(km,"Failed to update sequence numbers: "+m)}for(const m of c){const f=m.targetId;if(!m.fromCache){const y=h.Ms.get(f),C=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(C);h.Ms=h.Ms.insert(f,I)}}}(r.localStore,s))}async function Hb(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Q(Om,"User change. New user:",e.toKey());const r=await I1(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new Y(z.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Il(n,r.Ls)}}function qb(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Ce().add(r.key);{let i=Ce();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function $1(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zb.bind(null,e),e.Pu.H_=Rb.bind(null,e.eventManager),e.Pu.yu=Pb.bind(null,e.eventManager),e}function Gb(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$b.bind(null,e),e}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QP(this.persistence,new KP,e.initialUser,this.serializer)}Cu(e){return new T1(Cm.mi,this.serializer)}Du(e){return new ib}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class Kb extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Mc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new T1(r=>Mc.mi(r,n),this.serializer)}}class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hb.bind(null,this.syncEngine),await Ab(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xb}()}createDatastore(e){const n=yd(e.databaseInfo.databaseId),r=function(s){return new ub(s)}(e.databaseInfo);return function(s,o,l,u){return new fb(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new mb(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Kv(this.syncEngine,n,0),function(){return Bv.v()?new Bv:new sb}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const m=new Mb(i,s,o,l,u,c);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);Q(us,"RemoteStore shutting down."),s.Ea.add(5),await Tl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class Yb{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q(Ai,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Ai,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xh(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Ai,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await I1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xb(t);Q(Ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Wv(e.remoteStore,i)),t._onlineComponents=e}async function Xb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Ai,"Using user provided OfflineComponentProvider");try{await xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await xh(t,new Vc)}}else Q(Ai,"Using default OfflineComponentProvider"),await xh(t,new Kb(void 0));return t._offlineComponents}async function H1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Ai,"Using user provided OnlineComponentProvider"),await Xv(t,t._uninitializedComponentsProvider._online)):(Q(Ai,"Using default OnlineComponentProvider"),await Xv(t,new np))),t._onlineComponents}function Qb(t){return H1(t).then(e=>e.syncEngine)}async function q1(t){const e=await H1(t),n=e.eventManager;return n.onListen=Ob.bind(null,e.syncEngine),n.onUnlisten=Fb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Vb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jb.bind(null,e.syncEngine),n}function Jb(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new W1({next:f=>{h.Nu(),o.enqueueAndForget(()=>M1(s,m));const y=f.docs.has(l);!y&&f.fromCache?c.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&u&&u.source==="server"?c.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),m=new O1(vm(l.path),h,{includeMetadataChanges:!0,qa:!0});return D1(s,m)}(await q1(t),t.asyncQueue,e,n,r)),r.promise}function Zb(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new W1({next:f=>{h.Nu(),o.enqueueAndForget(()=>M1(s,m)),f.fromCache&&u.source==="server"?c.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),m=new O1(l,h,{includeMetadataChanges:!0,qa:!0});return D1(s,m)}(await q1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="firestore.googleapis.com",Jv=!0;class Zv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K1,this.ssl=Jv}else this.host=e.host,this.ssl=e.ssl??Jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bP)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oR;switch(r.type){case"firstParty":return new cR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Qv.delete(n),r.terminate())}(this),Promise.resolve()}}function e2(t,e,n,r={}){var c;t=xr(t,wd);const i=Po(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(yE(`https://${l}`),vE("Firestore",!0)),s.host!==K1&&s.host!==l&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!os(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Mt.MOCK_USER;else{h=Dk(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Mt(f)}t._authCredentials=new aR(new NE(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vo(this.firestore,e,this._query)}}class ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vl(n,ct._jsonSchema))return new ct(e,r||null,new se(Be.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:ut("string",ct._jsonSchemaVersion),referencePath:ut("string")};class vi extends Vo{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new se(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function e0(t,e,...n){if(t=yt(t),DE("collection","path",e),t instanceof wd){const r=Be.fromString(e,...n);return hv(r),new vi(t,null,r)}{if(!(t instanceof ct||t instanceof vi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return hv(r),new vi(t.firestore,null,r)}}function Ea(t,e,...n){if(t=yt(t),arguments.length===1&&(e=hm.newId()),DE("doc","path",e),t instanceof wd){const r=Be.fromString(e,...n);return dv(r),new ct(t,null,new se(r))}{if(!(t instanceof ct||t instanceof vi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return dv(r),new ct(t.firestore,t instanceof vi?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="AsyncQueue";class n0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C1(this,"async_queue_retry"),this._c=()=>{const r=kh();r&&Q(t0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _r;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mo(e))throw e;Q(t0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",r0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Nm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ue(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function r0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Lo extends wd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new n0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}}function t2(t,e){const n=typeof t=="object"?t:TE(),r=typeof t=="string"?t:kc,i=cm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bk("firestore");s&&e2(i,...s)}return i}function Lm(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n2(t),t._firestoreClient}function n2(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,c,h){return new kR(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,G1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Yb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(xt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:ut("string",yn._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qn._jsonSchemaVersion}}static fromJSON(e){if(vl(e,Qn._jsonSchema))return new Qn(e.latitude,e.longitude)}}Qn._jsonSchemaVersion="firestore/geoPoint/1.0",Qn._jsonSchema={type:ut("string",Qn._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jn(e.vectorValues);throw new Y(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:ut("string",Jn._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=/^__.*__$/;class i2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new wl(e,this.data,n,this.fieldTransforms)}}class Y1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function X1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class jm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(X1(this.Ac)&&r2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yd(e)}Cc(e,n,r,i=!1){return new jm({Ac:e,methodName:n,Dc:r,path:Ct.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(t){const e=t._freezeSettings(),n=yd(t._databaseId);return new s2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function o2(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);zm("Data must be an object, but it was:",o,r);const l=Q1(r,o);let u,c;if(s.merge)u=new ln(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const f=rp(e,m,n);if(!o.contains(f))throw new Y(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Z1(h,f)||h.push(f)}u=new ln(h),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new i2(new Yt(l),u,c)}class Td extends Fm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}function a2(t,e,n,r){const i=t.Cc(1,e,n);zm("Data must be an object, but it was:",i,r);const s=[],o=Yt.empty();Pi(r,(u,c)=>{const h=Bm(e,u,n);c=yt(c);const m=i.yc(h);if(c instanceof Td)s.push(h);else{const f=Sl(c,m);f!=null&&(s.push(h),o.set(h,f))}});const l=new ln(s);return new Y1(o,l,i.fieldTransforms)}function l2(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[rp(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)l.push(rp(e,s[f])),u.push(s[f+1]);const c=[],h=Yt.empty();for(let f=l.length-1;f>=0;--f)if(!Z1(c,l[f])){const y=l[f];let C=u[f];C=yt(C);const I=o.yc(y);if(C instanceof Td)c.push(y);else{const k=Sl(C,I);k!=null&&(c.push(y),h.set(y,k))}}const m=new ln(c);return new Y1(h,m,o.fieldTransforms)}function u2(t,e,n,r=!1){return Sl(n,t.Cc(r?4:3,e))}function Sl(t,e){if(J1(t=yt(t)))return zm("Unsupported field value:",e,t),Q1(t,e);if(t instanceof Fm)return function(r,i){if(!X1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Sl(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ve.fromDate(r);return{timestampValue:Dc(i.serializer,s)}}if(r instanceof Ve){const s=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dc(i.serializer,s)}}if(r instanceof Qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:p1(i.serializer,r._byteString)};if(r instanceof ct){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Im(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jn)return function(o,l){return{mapValue:{fields:{[BE]:{stringValue:WE},[xc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return _m(l.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${ld(r)}`)}(t,e)}function Q1(t,e){const n={};return VE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(t,(r,i)=>{const s=Sl(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function J1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Qn||t instanceof yn||t instanceof ct||t instanceof Fm||t instanceof Jn)}function zm(t,e,n){if(!J1(n)||!ME(n)){const r=ld(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function rp(t,e,n){if((e=yt(e))instanceof Ed)return e._internalPath;if(typeof e=="string")return Bm(t,e);throw Lc("Field path arguments must be of type string or ",t,!1,void 0,n)}const c2=new RegExp("[~\\*/\\[\\]]");function Bm(t,e,n){if(e.search(c2)>=0)throw Lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ed(...e.split("."))._internalPath}catch{throw Lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(z.INVALID_ARGUMENT,l+t+u)}function Z1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d2 extends eT{data(){return super.data()}}function $m(t,e){return typeof e=="string"?Bm(t,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wm{}class f2 extends Wm{}function p2(t,e,...n){let r=[];e instanceof Wm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Hm).length,l=s.filter(u=>u instanceof Id).length;if(o>1||o>0&&l>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Id extends f2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Id(e,n,r)}_apply(e){const n=this._parse(e);return tT(e._query,n),new Vo(e.firestore,e.converter,qf(e._query,n))}_parse(e){const n=Um(e.firestore);return function(s,o,l,u,c,h,m){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){s0(m,h);const C=[];for(const I of m)C.push(i0(u,s,I));f={arrayValue:{values:C}}}else f=i0(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||s0(m,h),f=u2(l,o,m,h==="in"||h==="not-in");return lt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function m2(t,e,n){const r=e,i=$m("where",t);return Id._create(i,r,n)}class Hm extends Wm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)tT(o,u),o=qf(o,u)}(e._query,n),new Vo(e.firestore,e.converter,qf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function i0(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!se.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wv(t,new se(r))}if(n instanceof ct)return wv(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function s0(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g2{convertValue(e,n="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[xc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>it(o.doubleValue));return new Jn(n)}convertGeoPoint(e){return new Qn(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=Ti(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);De(w1(r),9688,{name:e});const i=new il(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class es extends eT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}es._jsonSchemaVersion="firestore/documentSnapshot/1.0",es._jsonSchema={type:ut("string",es._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class qu extends es{data(e={}){return super.data(e)}}class so{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qu(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new qu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new qu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:v2(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function v2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){t=xr(t,ct);const e=xr(t.firestore,Lo);return Jb(Lm(e),t._key).then(n=>I2(e,t,n))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:ut("string",so._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class nT extends g2{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function w2(t){t=xr(t,Vo);const e=xr(t.firestore,Lo),n=Lm(e),r=new nT(e);return h2(t._query),Zb(n,t._query).then(i=>new so(e,r,t,i))}function o0(t,e,n,...r){t=xr(t,ct);const i=xr(t.firestore,Lo),s=Um(i);let o;return o=typeof(e=yt(e))=="string"||e instanceof Ed?l2(s,"updateDoc",t._key,e,n,r):a2(s,"updateDoc",t._key,e),qm(i,[o.toMutation(t._key,bn.exists(!0))])}function E2(t){return qm(xr(t.firestore,Lo),[new wm(t._key,bn.none())])}function T2(t,e){const n=xr(t.firestore,Lo),r=Ea(t),i=y2(t.converter,e);return qm(n,[o2(Um(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function qm(t,e){return function(r,i){const s=new _r;return r.asyncQueue.enqueueAndForget(async()=>Ub(await Qb(r),i,s)),s.promise}(Lm(t),e)}function I2(t,e,n){const r=n.docs.get(e._key),i=new nT(t);return new es(t,i,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){No=i})(bo),_o(new as("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Lo(new lR(r.getProvider("auth-internal")),new dR(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),gi(av,lv,e),gi(av,lv,"esm2020")})();var S2="firebase",C2="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(S2,C2,"app");function rT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A2=rT,iT=new gl("auth","Firebase",rT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new lm("@firebase/auth");function k2(t,...e){Fc.logLevel<=Ie.WARN&&Fc.warn(`Auth (${bo}): ${t}`,...e)}function Gu(t,...e){Fc.logLevel<=Ie.ERROR&&Fc.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw Km(t,...e)}function Nn(t,...e){return Km(t,...e)}function Gm(t,e,n){const r={...A2(),[e]:n};return new gl("auth","Firebase",r).create(e,{appName:t.name})}function wr(t){return Gm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tn(t,"argument-error"),Gm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iT.create(t,...e)}function le(t,e,...n){if(!t)throw Km(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gu(e),new Error(e)}function Pr(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function R2(){return a0()==="http:"||a0()==="https:"}function a0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R2()||jk()||"connection"in navigator)?navigator.onLine:!0}function b2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=Vk()||Uk()}get(){return P2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){Pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M2=new Cl(3e4,6e4);function Ni(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Dr(t,e,n,r,i={}){return oT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=yl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return Fk()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Po(t.emulatorConfig.host)&&(c.credentials="include"),sT.fetch()(await aT(t,t.config.apiHost,n,l),c)})}async function oT(t,e,n){t._canInitEmulator=!1;const r={...N2,...e};try{const i=new V2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Eu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Eu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Eu(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gm(t,h,c);Tn(t,h)}}catch(i){if(i instanceof Nr)throw i;Tn(t,"network-request-failed",{message:String(i)})}}async function Al(t,e,n,r,i={}){const s=await Dr(t,e,n,r,i);return"mfaPendingCredential"in s&&Tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function aT(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Ym(t.config,i):`${t.config.apiScheme}://${i}`;return D2.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function O2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),M2.get())})}}function Eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nn(t,e,r);return i.customData._tokenResponse=n,i}function l0(t){return t!==void 0&&t.enterprise!==void 0}class L2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F2(t,e){return Dr(t,"GET","/v2/recaptchaConfig",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function jc(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U2(t,e=!1){const n=yt(t),r=await n.getIdToken(e),i=Xm(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:La(Rh(i.auth_time)),issuedAtTime:La(Rh(i.iat)),expirationTime:La(Rh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Rh(t){return Number(t)*1e3}function Xm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const i=fE(n);return i?JSON.parse(i):(Gu("Failed to decode base64 JWT payload"),null)}catch(i){return Gu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function u0(t){const e=Xm(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&z2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function z2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Ao(t,jc(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?lT(i.providerUserInfo):[],o=W2(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new sp(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function $2(t){const e=yt(t);await Uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){const n=await oT(t,{},async()=>{const r=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await aT(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Po(t.emulatorConfig.host)&&(u.credentials="include"),sT.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q2(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=u0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await H2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new oo;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new B2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return U2(this,e)}reload(){return $2(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await Ao(this,j2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:f,isAnonymous:y,providerData:C,stsTokenManager:I}=n;le(m&&I,e,"internal-error");const k=oo.fromJSON(this.name,I);le(typeof m=="string",e,"internal-error"),Gr(r,e.name),Gr(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof y=="boolean",e,"internal-error"),Gr(s,e.name),Gr(o,e.name),Gr(l,e.name),Gr(u,e.name),Gr(c,e.name),Gr(h,e.name);const w=new xn({uid:m,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:k,createdAt:c,lastLoginAt:h});return C&&Array.isArray(C)&&(w.providerData=C.map(_=>({..._}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new oo;i.updateFromServerResponse(n);const s=new xn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new oo;l.updateFromIdToken(r);const u=new xn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;function yr(t){Pr(t instanceof Function,"Expected a class definition");let e=c0.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uT.type="NONE";const d0=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ku(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ku("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jc(this.auth,{idToken:e}).catch(()=>{});return n?xn._fromGetAccountInfoResponse(this.auth,n,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(yr(d0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||yr(d0);const o=Ku(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){let m;if(typeof h=="string"){const f=await jc(e,{idToken:h}).catch(()=>{});if(!f)break;m=await xn._fromGetAccountInfoResponse(e,f,h)}else m=xn._fromJSON(e,h);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ao(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ao(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mT(e))return"Blackberry";if(gT(e))return"Webos";if(dT(e))return"Safari";if((e.includes("chrome/")||hT(e))&&!e.includes("edge/"))return"Chrome";if(pT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cT(t=Ft()){return/firefox\//i.test(t)}function dT(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hT(t=Ft()){return/crios\//i.test(t)}function fT(t=Ft()){return/iemobile/i.test(t)}function pT(t=Ft()){return/android/i.test(t)}function mT(t=Ft()){return/blackberry/i.test(t)}function gT(t=Ft()){return/webos/i.test(t)}function Qm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G2(t=Ft()){var e;return Qm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function K2(){return zk()&&document.documentMode===10}function yT(t=Ft()){return Qm(t)||pT(t)||gT(t)||mT(t)||/windows phone/i.test(t)||fT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e=[]){let n;switch(t){case"Browser":n=h0(Ft());break;case"Worker":n=`${h0(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",Ni(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=6;class J2{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Q2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new Y2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jc(this,{idToken:e}),r=await xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(on(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(wr(this));const n=e?yt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await X2(this),n=new J2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&k2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Di(t){return yt(t)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yk(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eN(t){Sd=t}function _T(t){return Sd.loadJS(t)}function tN(){return Sd.recaptchaEnterpriseScript}function nN(){return Sd.gapiScript}function rN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class iN{constructor(){this.enterprise=new sN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oN="recaptcha-enterprise",wT="NO_RECAPTCHA";class aN{constructor(e){this.type=oN,this.auth=Di(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{F2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new L2(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;l0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(wT)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&l0(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=tN();u.length!==0&&(u+=l),_T(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function p0(t,e,n,r=!1,i=!1){const s=new aN(t);let o;if(i)o=wT;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function op(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await p0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await p0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t,e){const n=cm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(os(s,e??{}))return i;Tn(i,"already-initialized")}return n.initialize({options:e})}function uN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cN(t,e,n){const r=Di(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ET(e),{host:o,port:l}=dN(e),u=l===null?"":`:${l}`,c={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(os(c,r.config.emulator)&&os(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Po(o)?(yE(`${s}//${o}${u}`),vE("Auth",!0)):hN()}function ET(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dN(t){const e=ET(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:m0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:m0(o)}}}function m0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function fN(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e){return Al(t,"POST","/v1/accounts:signInWithPassword",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",Ni(t,e))}async function gN(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Jm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ll(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ll(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,n,"signInWithPassword",pN);case"emailLink":return mN(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,r,"signUpPassword",fN);case"emailLink":return gN(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e){return Al(t,"POST","/v1/accounts:signInWithIdp",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="http://localhost";class cs extends Jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new cs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lo(e,n)}buildRequest(){const e={requestUri:yN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _N(t){const e=ga(ya(t)).link,n=e?ga(ya(e)).deep_link_id:null,r=ga(ya(t)).deep_link_id;return(r?ga(ya(r)).link:null)||r||n||e||t}class Zm{constructor(e){const n=ga(ya(e)),r=n.apiKey??null,i=n.oobCode??null,s=vN(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_N(e);try{return new Zm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zm.parseLink(n);return le(r,"argument-error"),ll._fromEmailAndCode(e,r.code,r.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends eg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends kl{constructor(){super("facebook.com")}static credential(e){return cs._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends kl{constructor(){super("github.com")}static credential(e){return cs._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.GITHUB_SIGN_IN_METHOD="github.com";ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends kl{constructor(){super("twitter.com")}static credential(e,n){return cs._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ni.credential(n,r)}catch{return null}}}ni.TWITTER_SIGN_IN_METHOD="twitter.com";ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){return Al(t,"POST","/v1/accounts:signUp",Ni(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xn._fromIdTokenResponse(e,r,i),o=g0(r);return new ds({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=g0(r);return new ds({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function g0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Nr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zc(e,n,r,i)}}function TT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zc._fromErrorAndOperation(t,s,e,r):s})}async function EN(t,e,n=!1){const r=await Ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(wr(r));const i="reauthenticate";try{const s=await Ao(t,TT(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Xm(s.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),ds._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(t,e,n=!1){if(on(t.app))return Promise.reject(wr(t));const r="signIn",i=await TT(t,r,e),s=await ds._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function IN(t,e){return IT(Di(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(t){const e=Di(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SN(t,e,n){if(on(t.app))return Promise.reject(wr(t));const r=Di(t),o=await op(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ST(t),u}),l=await ds._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function CN(t,e,n){return on(t.app)?Promise.reject(wr(t)):IN(yt(t),Fo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ST(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){return Dr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=yt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ao(r,AN(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function xN(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function RN(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function PN(t,e,n,r){return yt(t).onAuthStateChanged(e,n,r)}function bN(t){return yt(t).signOut()}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=1e3,DN=10;class AT extends CT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);K2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},NN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AT.type="LOCAL";const MN=AT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends CT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const xT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await ON(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=tg("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const f=m;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function LN(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function FN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function UN(){return RT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firebaseLocalStorageDb",zN=1,$c="firebaseLocalStorage",bT="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function BN(){const t=indexedDB.deleteDatabase(PT);return new xl(t).toPromise()}function ap(){const t=indexedDB.open(PT,zN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($c,{keyPath:bT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($c)?e(r):(r.close(),await BN(),e(await ap()))})})}async function y0(t,e,n){const r=Ad(t,!0).put({[bT]:e,value:n});return new xl(r).toPromise()}async function $N(t,e){const n=Ad(t,!1).get(e),r=await new xl(n).toPromise();return r===void 0?null:r.value}function v0(t,e){const n=Ad(t,!0).delete(e);return new xl(n).toPromise()}const WN=800,HN=3;class NT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(UN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await FN(),!this.activeServiceWorker)return;this.sender=new VN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await y0(e,Bc,"1"),await v0(e,Bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>y0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$N(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ad(i,!1).getAll();return new xl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NT.type="LOCAL";const qN=NT;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){return e?yr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends Jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GN(t){return IT(t.auth,new ng(t),t.bypassAuthState)}function KN(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),TN(n,new ng(t),t.bypassAuthState)}async function YN(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),EN(n,new ng(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GN;case"linkViaPopup":case"linkViaRedirect":return YN;case"reauthViaPopup":case"reauthViaRedirect":return KN;default:Tn(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Cl(2e3,1e4);async function QN(t,e,n){if(on(t.app))return Promise.reject(Nn(t,"operation-not-supported-in-this-environment"));const r=Di(t);x2(t,e,eg);const i=DT(r,n);return new Qi(r,"signInViaPopup",e,i).executeNotNull()}class Qi extends MT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XN.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="pendingRedirect",Yu=new Map;class ZN extends MT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const r=await eD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eD(t,e){const n=rD(e),r=nD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tD(t,e){Yu.set(t._key(),e)}function nD(t){return yr(t._redirectPersistence)}function rD(t){return Ku(JN,t.config.apiKey,t.name)}async function iD(t,e,n=!1){if(on(t.app))return Promise.reject(wr(t));const r=Di(t),i=DT(r,e),o=await new ZN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=10*60*1e3;class oD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!OT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sD&&this.cachedEventUids.clear(),this.cachedEventUids.has(_0(e))}saveEventToCache(e){this.cachedEventUids.add(_0(e)),this.lastProcessedEventTime=Date.now()}}function _0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cD=/^https?/;async function dD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lD(t);for(const n of e)try{if(hD(n))return}catch{}Tn(t,"unauthorized-domain")}function hD(t){const e=ip(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cD.test(n))return!1;if(uD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Cl(3e4,6e4);function w0(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pD(t){return new Promise((e,n)=>{var i,s,o;function r(){w0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w0(),n(Nn(t,"network-request-failed"))},timeout:fD.get()})}if((s=(i=Zn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Zn().gapi)!=null&&o.load)r();else{const l=rN("iframefcb");return Zn()[l]=()=>{gapi.load?r():n(Nn(t,"network-request-failed"))},_T(`${nN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function mD(t){return Xu=Xu||pD(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new Cl(5e3,15e3),yD="__/auth/iframe",vD="emulator/auth/iframe",_D={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ED(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ym(e,vD):`https://${t.config.authDomain}/${yD}`,r={apiKey:e.apiKey,appName:t.name,v:bo},i=wD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yl(r).slice(1)}`}async function TD(t){const e=await mD(t),n=Zn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:ED(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_D,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nn(t,"network-request-failed"),l=Zn().setTimeout(()=>{s(o)},gD.get());function u(){Zn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SD=500,CD=600,AD="_blank",kD="http://localhost";class E0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xD(t,e,n,r=SD,i=CD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...ID,width:r.toString(),height:i.toString(),top:s,left:o},c=Ft().toLowerCase();n&&(l=hT(c)?AD:n),cT(c)&&(e=e||kD,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[y,C])=>`${f}${y}=${C},`,"");if(G2(c)&&l!=="_self")return RD(e||"",l),new E0(null);const m=window.open(e||"",l,h);le(m,t,"popup-blocked");try{m.focus()}catch{}return new E0(m)}function RD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="__/auth/handler",bD="emulator/auth/handler",ND=encodeURIComponent("fac");async function T0(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bo,eventId:i};if(e instanceof eg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Kk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof kl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${ND}=${encodeURIComponent(u)}`:"";return`${DD(t)}?${yl(l).slice(1)}${c}`}function DD({config:t}){return t.emulator?Ym(t,bD):`https://${t.authDomain}/${PD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="webStorageSupport";class MD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xT,this._completeRedirectFn=iD,this._overrideRedirectResult=tD}async _openPopup(e,n,r,i){var o;Pr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await T0(e,n,r,ip(),i);return xD(e,s,tg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await T0(e,n,r,ip(),i);return LN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TD(e),r=new oD(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ph,{type:Ph},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Ph];s!==void 0&&n(!!s),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yT()||dT()||Qm()}}const OD=MD;var I0="@firebase/auth",S0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FD(t){_o(new as("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(t)},c=new Z2(r,i,s,u);return uN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_o(new as("auth-internal",e=>{const n=Di(e.getProvider("auth").getImmediate());return(r=>new VD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(I0,S0,LD(t)),gi(I0,S0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=5*60,UD=gE("authIdTokenMaxAge")||jD;let C0=null;const zD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UD)return;const i=n==null?void 0:n.token;C0!==i&&(C0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function BD(t=TE()){const e=cm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lN(t,{popupRedirectResolver:OD,persistence:[qN,MN,xT]}),r=gE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zD(s.toString());RN(n,o,()=>o(n.currentUser)),xN(n,l=>o(l))}}const i=pE("auth");return i&&cN(n,`http://${i}`),n}function $D(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}eN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Nn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$D().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FD("Browser");const WD={apiKey:"AIzaSyBRfKppZD9cY7y-Xu7vnQYx8av0iehk3dc",authDomain:"radiant-whiteboard.firebaseapp.com",projectId:"radiant-whiteboard",storageBucket:"radiant-whiteboard.firebasestorage.app",messagingSenderId:"842649022936",appId:"1:842649022936:web:f673f44e4586b5ea4302ad"},VT=EE(WD),Ps=t2(VT),ca=BD(VT),Rl=()=>{const[t,e]=x.useState(null),[n,r]=x.useState(!0),[i,s]=x.useState(null);return x.useEffect(()=>{const h=PN(ca,m=>{e(m?{uid:m.uid,email:m.email,displayName:m.displayName,photoURL:m.photoURL}:null),r(!1)});return()=>h()},[]),{user:t,loading:n,error:i,signInWithEmail:async(h,m)=>{try{s(null),r(!0),await CN(ca,h,m)}catch(f){throw s(f instanceof Error?f.message:"Failed to sign in"),f}finally{r(!1)}},signUpWithEmail:async(h,m,f)=>{try{s(null),r(!0);const y=await SN(ca,h,m);f&&y.user&&await kN(y.user,{displayName:f})}catch(y){throw s(y instanceof Error?y.message:"Failed to create account"),y}finally{r(!1)}},signInWithGoogle:async()=>{try{s(null),r(!0);const h=new fr;await QN(ca,h)}catch(h){throw s(h instanceof Error?h.message:"Failed to sign in with Google"),h}finally{r(!1)}},logout:async()=>{try{s(null),await bN(ca)}catch(h){throw s(h instanceof Error?h.message:"Failed to sign out"),h}},isAuthenticated:!!t}},rg=()=>{const[t,e]=x.useState(!1),[n,r]=x.useState(null),{user:i,isAuthenticated:s}=Rl();function o(y){if(Array.isArray(y))return y.map(o);if(y&&typeof y=="object"){const C={};for(const I in y)if(Object.prototype.hasOwnProperty.call(y,I)){const k=y[I];k!==void 0&&(C[I]=o(k))}return C}return y}const l=x.useCallback(async(y,C)=>{if(e(!0),r(null),!i||!s)return r("User must be authenticated to save whiteboard"),e(!1),null;try{const I=Ve.now(),k={textBoxes:o(C.textBoxes||[]),shapes:o(C.shapes||[]),images:o(C.images||[]),drawingPaths:o(C.drawingPaths||[]),arrows:o(C.arrows||[]),mindMapNodes:o(C.mindMapNodes||[])},w=await T2(e0(Ps,"whiteboards"),{title:y||"Untitled Whiteboard",...k,userId:i.uid,userName:i.displayName||i.email||"Anonymous",createdAt:I,updatedAt:I});return e(!1),w.id}catch(I){return console.error("Error saving whiteboard:",I),I instanceof Error?r(`Failed to save whiteboard: ${I.message}`):r("Failed to save whiteboard: Unknown error"),e(!1),null}},[i,s]),u=x.useCallback(async(y,C)=>{e(!0),r(null);try{const I={textBoxes:o(C.textBoxes),shapes:o(C.shapes),images:o(C.images),drawingPaths:o(C.drawingPaths),arrows:o(C.arrows),mindMapNodes:o(C.mindMapNodes),updatedAt:Ve.now()},k=Ea(Ps,"whiteboards",y);return await o0(k,I),e(!1),!0}catch(I){return console.error("Error updating whiteboard:",I),I instanceof Error&&(console.error("Error message:",I.message),console.error("Error stack:",I.stack)),I&&typeof I=="object"&&"code"in I&&console.error("Firebase error code:",I.code),r("Failed to update whiteboard"),e(!1),!1}},[]),c=x.useCallback(async(y,C)=>{e(!0),r(null);try{const I=Ea(Ps,"whiteboards",y);return await o0(I,{title:C,updatedAt:Ve.now()}),e(!1),!0}catch(I){return console.error("Error updating whiteboard title:",I),r("Failed to update whiteboard title"),e(!1),!1}},[]),h=x.useCallback(async y=>{e(!0),r(null);try{const C=Ea(Ps,"whiteboards",y),I=await _2(C);if(I.exists()){const k=I.data();return e(!1),{...k,id:I.id}}else return r("Whiteboard not found"),e(!1),null}catch(C){return console.error("Error loading whiteboard:",C),r("Failed to load whiteboard"),e(!1),null}},[]),m=async y=>{const C=y||i,I=!!(y||i&&s);if(console.log("🔍 getAllWhiteboards called",{user:i==null?void 0:i.uid,authenticatedUser:y==null?void 0:y.uid,userToUse:C==null?void 0:C.uid,isAuthenticated:s,isUserAuthenticated:I,userEmail:C==null?void 0:C.email}),e(!0),r(null),!C||!I)return console.log("❌ User not authenticated, returning empty array"),r("User must be authenticated to load whiteboards"),e(!1),[];try{const k=p2(e0(Ps,"whiteboards"),m2("userId","==",C.uid));console.log("🔍 Executing Firestore query for user:",C.uid);const w=await w2(k),_=[];return console.log("📊 Query snapshot size:",w.size),w.forEach(A=>{const N=A.data();console.log("📄 Found whiteboard:",A.id,N.title,N.userId),_.push({...N,id:A.id})}),_.sort((A,N)=>N.updatedAt.seconds-A.updatedAt.seconds),console.log("✅ Returning whiteboards:",_.length),e(!1),_}catch(k){return console.error("Error getting whiteboards:",k),r("Failed to load whiteboards"),e(!1),[]}},f=async y=>{e(!0),r(null);try{return await E2(Ea(Ps,"whiteboards",y)),e(!1),!0}catch(C){return console.error("Error deleting whiteboard:",C),r("Failed to delete whiteboard"),e(!1),!1}};return{saveWhiteboard:x.useCallback(l,[i]),updateWhiteboard:x.useCallback(u,[]),updateWhiteboardTitle:x.useCallback(c,[]),loadWhiteboard:x.useCallback(h,[]),getAllWhiteboards:x.useCallback(m,[]),deleteWhiteboard:x.useCallback(f,[]),loading:t,error:n}},HD=(t,e,n,r)=>{const{updateWhiteboard:i,saveWhiteboard:s}=rg(),[o,l]=x.useState("idle"),u=x.useRef(null),c=x.useRef(""),h=x.useRef(n),m=x.useRef(r),f=x.useRef(null);h.current=n,m.current=r;const y=x.useCallback(async()=>{if(!t||!e)return;const k=h.current,w={textBoxes:Array.isArray(k.textBoxes)?k.textBoxes:[],shapes:Array.isArray(k.shapes)?k.shapes:[],images:Array.isArray(k.images)?k.images:[],drawingPaths:Array.isArray(k.drawingPaths)?k.drawingPaths:[],arrows:Array.isArray(k.arrows)?k.arrows:[],mindMapNodes:Array.isArray(k.mindMapNodes)?k.mindMapNodes:[]},_=JSON.stringify(w);if(_!==c.current){l("saving");try{await i(t,w)?(c.current=_,console.log("💾 Auto-save successful for whiteboard:",t),l("saved"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{l("idle")},2e3)):(console.error("💥 Auto-save failed - updateWhiteboard returned false"),l("error"),console.error("Auto-save failed - updateWhiteboard returned false"))}catch(A){console.error("💥 Auto-save error:",A),l("error"),console.error("Auto-save error:",A)}}},[t,e,i]),C=x.useCallback(async()=>{if(t||!e)return;const k=h.current,w=m.current,_={textBoxes:Array.isArray(k.textBoxes)?k.textBoxes:[],shapes:Array.isArray(k.shapes)?k.shapes:[],images:Array.isArray(k.images)?k.images:[],drawingPaths:Array.isArray(k.drawingPaths)?k.drawingPaths:[],arrows:Array.isArray(k.arrows)?k.arrows:[],mindMapNodes:Array.isArray(k.mindMapNodes)?k.mindMapNodes:[]};if(_.textBoxes.length>0||_.shapes.length>0||_.images.length>0||_.drawingPaths.length>0||_.arrows.length>0||_.mindMapNodes.length>0){l("saving");try{const N=await s(w||"Untitled Whiteboard",_);if(N)return console.log("💾 New whiteboard saved successfully:",N),l("saved"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{l("idle")},2e3),N;console.error("💥 Failed to save new whiteboard - no ID returned"),l("error"),console.error("Failed to save new whiteboard - no ID returned")}catch(N){console.error("💥 Auto-save new whiteboard error:",N),l("error"),console.error("Auto-save new whiteboard error:",N)}return null}},[t,e,s]),I=x.useCallback((k=!1)=>(u.current&&clearTimeout(u.current),new Promise(w=>{u.current=setTimeout(async()=>{if(k){const _=await C();w(_||null)}else await y(),w(null);u.current=null},k?3e3:2e3)})),[y,C]);return x.useEffect(()=>()=>{u.current&&clearTimeout(u.current),f.current&&clearTimeout(f.current)},[]),{triggerAutoSave:I,saveStatus:o,cancelAutoSave:()=>{u.current&&(clearTimeout(u.current),u.current=null),f.current&&(clearTimeout(f.current),f.current=null)}}},qD=({status:t,isSignedIn:e})=>{if(!e)return null;const r=(()=>{switch(t){case"saving":return{icon:T.jsx(dk,{size:16,className:"animate-spin"}),color:"text-blue-600",title:"Saving..."};case"saved":return{icon:T.jsx(ik,{size:16,className:"animate-pulse"}),color:"text-green-600",title:"Saved"};case"error":return{icon:T.jsx(nk,{size:16,className:"animate-bounce"}),color:"text-red-600",title:"Save failed"};case"idle":default:return{icon:T.jsx(oE,{size:16}),color:"text-gray-400",title:"Auto-save enabled"}}})();return T.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ${r.color} hover:bg-gray-50`,title:r.title,children:r.icon})},GD=({currentWhiteboardTitle:t,onTitleChange:e,onShowAuthModal:n,saveStatus:r})=>{const{user:i,logout:s}=Rl(),[o,l]=x.useState(!1),[u,c]=x.useState(t),h=()=>{c(t),l(!0)},m=()=>{u.trim()&&(e(u.trim()),l(!1))},f=()=>{c(t),l(!1)},y=I=>{I.key==="Enter"?m():I.key==="Escape"&&f()},C=async()=>{try{await s()}catch(I){console.error("Error logging out:",I)}};return T.jsx("div",{className:"fixed top-0 left-0 w-full z-30 bg-white/80 backdrop-blur-sm border-b border-gray-200 p-4",children:T.jsxs("div",{className:"flex items-center justify-between w-full",children:[T.jsxs("div",{className:"flex items-center space-x-3 pl-4",children:[T.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 w-12 h-12 rounded-lg flex items-center justify-center",children:T.jsx("span",{className:"text-white text-3xl font-bold select-none",children:"R"})}),T.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:"GradientScape"})]}),T.jsx("div",{className:"flex-1 flex justify-center",children:T.jsxs("div",{className:"flex items-center space-x-4",children:[T.jsx("div",{className:"flex items-center space-x-2",children:o?T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("input",{type:"text",value:u,onChange:I=>c(I.target.value),onKeyDown:y,className:"text-xl font-semibold bg-transparent border-b-2 border-blue-500 focus:outline-none focus:border-blue-600 text-gray-800 px-1",autoFocus:!0,onBlur:m}),T.jsx("button",{onClick:m,className:"text-green-600 hover:text-green-700 p-1",title:"Save",children:T.jsx(sk,{size:16})}),T.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 p-1",title:"Cancel",children:T.jsx(cE,{size:16})})]}):T.jsxs("div",{className:"flex items-center space-x-2 group",children:[T.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t}),T.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity p-1",title:"Edit title",children:T.jsx(aE,{size:16})})]})}),T.jsx(qD,{status:r,isSignedIn:!!i})]})}),T.jsx("div",{className:"flex items-center justify-end min-w-[120px] space-x-3 pr-4",children:i?T.jsxs("div",{className:"flex items-center space-x-3",children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[i.photoURL?T.jsx("img",{src:i.photoURL,alt:i.displayName||"User",className:"w-8 h-8 rounded-full"}):T.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:T.jsx(wk,{size:16,className:"text-white"})}),T.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.displayName||i.email})]}),T.jsxs("button",{onClick:C,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-800 text-sm px-3 py-1 rounded-md hover:bg-gray-100",children:[T.jsx(hk,{size:16}),T.jsx("span",{children:"Sign out"})]})]}):T.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm font-medium",children:"Sign in"})})]})})},KD=({activeTool:t,setActiveTool:e})=>T.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl shadow-lg p-2",children:T.jsxs("div",{className:"flex items-center space-x-1",children:[T.jsxs("button",{onClick:()=>e("rectangle"),className:`flex items-center space-x-1 px-3 py-2 rounded-xl transition-colors ${t==="rectangle"?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Rectangle Tool",children:[T.jsx(yk,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Rectangle"})]}),T.jsxs("button",{onClick:()=>e("circle"),className:`flex items-center space-x-1 px-3 py-2 rounded-xl transition-colors ${t==="circle"?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Circle Tool",children:[T.jsx(ak,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Circle"})]}),T.jsxs("button",{onClick:()=>e("diamond"),className:`flex items-center space-x-1 px-3 py-2 rounded-xl transition-colors ${t==="diamond"?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Diamond Tool",children:[T.jsx(uk,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Diamond"})]}),T.jsxs("button",{onClick:()=>e("pen"),className:`flex items-center space-x-1 px-3 py-2 rounded-xl transition-colors ${t==="pen"?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Pen Tool",children:[T.jsx(aE,{className:"w-4 h-4"}),T.jsx("span",{className:"text-sm font-medium",children:"Pen"})]})]})}),bh=[{name:"Rainbow",value:"bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500",preview:"linear-gradient(to right, #ef4444, #eab308, #22c55e, #3b82f6, #a855f7)"},{name:"Sunset",value:"bg-gradient-to-r from-orange-400 via-red-500 to-pink-500",preview:"linear-gradient(to right, #fb923c, #ef4444, #ec4899)"},{name:"Ocean",value:"bg-gradient-to-r from-blue-400 via-cyan-500 to-teal-500",preview:"linear-gradient(to right, #60a5fa, #06b6d4, #14b8a6)"},{name:"Forest",value:"bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600",preview:"linear-gradient(to right, #4ade80, #10b981, #0d9488)"},{name:"Purple",value:"bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-500",preview:"linear-gradient(to right, #a78bfa, #8b5cf6, #6366f1)"},{name:"Fire",value:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600",preview:"linear-gradient(to right, #facc15, #f97316, #dc2626)"},{name:"Mint",value:"bg-gradient-to-r from-emerald-300 via-cyan-400 to-blue-400",preview:"linear-gradient(to right, #6ee7b7, #22d3ee, #60a5fa)"},{name:"Rose",value:"bg-gradient-to-r from-pink-400 via-rose-500 to-red-500",preview:"linear-gradient(to right, #f472b6, #f43f5e, #ef4444)"},{name:"Cosmic",value:"bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-500",preview:"linear-gradient(to right, #6366f1, #9333ea, #ec4899)"},{name:"Gold",value:"bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-500",preview:"linear-gradient(to right, #fbbf24, #eab308, #f97316)"}];function Er(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function A0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function LT(...t){return e=>{let n=!1;const r=t.map(i=>{const s=A0(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():A0(t[i],null)}}}}function Mr(...t){return x.useCallback(LT(...t),t)}function YD(t,e){const n=x.createContext(e),r=s=>{const{children:o,...l}=s,u=x.useMemo(()=>l,Object.values(l));return T.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(s){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function FT(t,e=[]){let n=[];function r(s,o){const l=x.createContext(o),u=n.length;n=[...n,o];const c=m=>{var w;const{scope:f,children:y,...C}=m,I=((w=f==null?void 0:f[t])==null?void 0:w[u])||l,k=x.useMemo(()=>C,Object.values(C));return T.jsx(I.Provider,{value:k,children:y})};c.displayName=s+"Provider";function h(m,f){var I;const y=((I=f==null?void 0:f[t])==null?void 0:I[u])||l,C=x.useContext(y);if(C)return C;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[c,h]}const i=()=>{const s=n.map(o=>x.createContext(o));return function(l){const u=(l==null?void 0:l[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return i.scopeName=t,[r,XD(i,...e)]}function XD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:u,scopeName:c})=>{const m=u(s)[`__scope${c}`];return{...l,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var ul=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},QD=n_[" useId ".trim().toString()]||(()=>{}),JD=0;function Nh(t){const[e,n]=x.useState(QD());return ul(()=>{t||n(r=>r??String(JD++))},[t]),t||(e?`radix-${e}`:"")}var ZD=n_[" useInsertionEffect ".trim().toString()]||ul;function eM({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=tM({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:i;{const h=x.useRef(t!==void 0);x.useEffect(()=>{const m=h.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const c=x.useCallback(h=>{var m;if(l){const f=nM(h)?h(t):h;f!==t&&((m=o.current)==null||m.call(o,f))}else s(h)},[l,t,s,o]);return[u,c]}function tM({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),s=x.useRef(e);return ZD(()=>{s.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function nM(t){return typeof t=="function"}function ig(t){const e=iM(t),n=x.forwardRef((r,i)=>{const{children:s,...o}=r,l=x.Children.toArray(s),u=l.find(oM);if(u){const c=u.props.children,h=l.map(m=>m===u?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:m);return T.jsx(e,{...o,ref:i,children:x.isValidElement(c)?x.cloneElement(c,void 0,h):null})}return T.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var rM=ig("Slot");function iM(t){const e=x.forwardRef((n,r)=>{const{children:i,...s}=n;if(x.isValidElement(i)){const o=lM(i),l=aM(s,i.props);return i.type!==x.Fragment&&(l.ref=r?LT(r,o):o),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jT=Symbol("radix.slottable");function sM(t){const e=({children:n})=>T.jsx(T.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=jT,e}function oM(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jT}function aM(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{const u=s(...l);return i(...l),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function lM(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var uM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Or=uM.reduce((t,e)=>{const n=ig(`Primitive.${e}`),r=x.forwardRef((i,s)=>{const{asChild:o,...l}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function cM(t,e){t&&am.flushSync(()=>t.dispatchEvent(e))}function cl(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function dM(t,e=globalThis==null?void 0:globalThis.document){const n=cl(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hM="DismissableLayer",lp="dismissableLayer.update",fM="dismissableLayer.pointerDownOutside",pM="dismissableLayer.focusOutside",k0,UT=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zT=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...u}=t,c=x.useContext(UT),[h,m]=x.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=x.useState({}),C=Mr(e,v=>m(v)),I=Array.from(c.layers),[k]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=I.indexOf(k),_=h?I.indexOf(h):-1,A=c.layersWithOutsidePointerEventsDisabled.size>0,N=_>=w,L=yM(v=>{const g=v.target,R=[...c.branches].some(S=>S.contains(g));!N||R||(i==null||i(v),o==null||o(v),v.defaultPrevented||l==null||l())},f),U=vM(v=>{const g=v.target;[...c.branches].some(S=>S.contains(g))||(s==null||s(v),o==null||o(v),v.defaultPrevented||l==null||l())},f);return dM(v=>{_===c.layers.size-1&&(r==null||r(v),!v.defaultPrevented&&l&&(v.preventDefault(),l()))},f),x.useEffect(()=>{if(h)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(k0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),x0(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=k0)}},[h,f,n,c]),x.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),x0())},[h,c]),x.useEffect(()=>{const v=()=>y({});return document.addEventListener(lp,v),()=>document.removeEventListener(lp,v)},[]),T.jsx(Or.div,{...u,ref:C,style:{pointerEvents:A?N?"auto":"none":void 0,...t.style},onFocusCapture:Er(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Er(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Er(t.onPointerDownCapture,L.onPointerDownCapture)})});zT.displayName=hM;var mM="DismissableLayerBranch",gM=x.forwardRef((t,e)=>{const n=x.useContext(UT),r=x.useRef(null),i=Mr(e,r);return x.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),T.jsx(Or.div,{...t,ref:i})});gM.displayName=mM;function yM(t,e=globalThis==null?void 0:globalThis.document){const n=cl(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let u=function(){BT(fM,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function vM(t,e=globalThis==null?void 0:globalThis.document){const n=cl(t),r=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!r.current&&BT(pM,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function x0(){const t=new CustomEvent(lp);document.dispatchEvent(t)}function BT(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?cM(i,s):i.dispatchEvent(s)}var Dh="focusScope.autoFocusOnMount",Mh="focusScope.autoFocusOnUnmount",R0={bubbles:!1,cancelable:!0},_M="FocusScope",$T=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,u]=x.useState(null),c=cl(i),h=cl(s),m=x.useRef(null),f=Mr(e,I=>u(I)),y=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let I=function(A){if(y.paused||!l)return;const N=A.target;l.contains(N)?m.current=N:Yr(m.current,{select:!0})},k=function(A){if(y.paused||!l)return;const N=A.relatedTarget;N!==null&&(l.contains(N)||Yr(m.current,{select:!0}))},w=function(A){if(document.activeElement===document.body)for(const L of A)L.removedNodes.length>0&&Yr(l)};document.addEventListener("focusin",I),document.addEventListener("focusout",k);const _=new MutationObserver(w);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",I),document.removeEventListener("focusout",k),_.disconnect()}}},[r,l,y.paused]),x.useEffect(()=>{if(l){b0.add(y);const I=document.activeElement;if(!l.contains(I)){const w=new CustomEvent(Dh,R0);l.addEventListener(Dh,c),l.dispatchEvent(w),w.defaultPrevented||(wM(CM(WT(l)),{select:!0}),document.activeElement===I&&Yr(l))}return()=>{l.removeEventListener(Dh,c),setTimeout(()=>{const w=new CustomEvent(Mh,R0);l.addEventListener(Mh,h),l.dispatchEvent(w),w.defaultPrevented||Yr(I??document.body,{select:!0}),l.removeEventListener(Mh,h),b0.remove(y)},0)}}},[l,c,h,y]);const C=x.useCallback(I=>{if(!n&&!r||y.paused)return;const k=I.key==="Tab"&&!I.altKey&&!I.ctrlKey&&!I.metaKey,w=document.activeElement;if(k&&w){const _=I.currentTarget,[A,N]=EM(_);A&&N?!I.shiftKey&&w===N?(I.preventDefault(),n&&Yr(A,{select:!0})):I.shiftKey&&w===A&&(I.preventDefault(),n&&Yr(N,{select:!0})):w===_&&I.preventDefault()}},[n,r,y.paused]);return T.jsx(Or.div,{tabIndex:-1,...o,ref:f,onKeyDown:C})});$T.displayName=_M;function wM(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Yr(r,{select:e}),document.activeElement!==n)return}function EM(t){const e=WT(t),n=P0(e,t),r=P0(e.reverse(),t);return[n,r]}function WT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function P0(t,e){for(const n of t)if(!TM(n,{upTo:e}))return n}function TM(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function IM(t){return t instanceof HTMLInputElement&&"select"in t}function Yr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&IM(t)&&e&&t.select()}}var b0=SM();function SM(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=N0(t,e),t.unshift(e)},remove(e){var n;t=N0(t,e),(n=t[0])==null||n.resume()}}}function N0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function CM(t){return t.filter(e=>e.tagName!=="A")}var AM="Portal",HT=x.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,s]=x.useState(!1);ul(()=>s(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?zA.createPortal(T.jsx(Or.div,{...r,ref:e}),o):null});HT.displayName=AM;function kM(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var kd=t=>{const{present:e,children:n}=t,r=xM(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),s=Mr(r.ref,RM(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:s}):null};kd.displayName="Presence";function xM(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[l,u]=kM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Tu(r.current);s.current=l==="mounted"?c:"none"},[l]),ul(()=>{const c=r.current,h=i.current;if(h!==t){const f=s.current,y=Tu(c);t?u("MOUNT"):y==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(h&&f!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),ul(()=>{if(e){let c;const h=e.ownerDocument.defaultView??window,m=y=>{const I=Tu(r.current).includes(y.animationName);if(y.target===e&&I&&(u("ANIMATION_END"),!i.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",c=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},f=y=>{y.target===e&&(s.current=Tu(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Tu(t){return(t==null?void 0:t.animationName)||"none"}function RM(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Oh=0;function PM(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??D0()),document.body.insertAdjacentElement("beforeend",t[1]??D0()),Oh++,()=>{Oh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Oh--}},[])}function D0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var qn=function(){return qn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qn.apply(this,arguments)};function qT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bM(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Qu="right-scroll-bar-position",Ju="width-before-scroll-bar",NM="with-scroll-bars-hidden",DM="--removed-body-scroll-bar-size";function Vh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function MM(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var OM=typeof window<"u"?x.useLayoutEffect:x.useEffect,M0=new WeakMap;function VM(t,e){var n=MM(null,function(r){return t.forEach(function(i){return Vh(i,r)})});return OM(function(){var r=M0.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(l){s.has(l)||Vh(l,null)}),s.forEach(function(l){i.has(l)||Vh(l,o)})}M0.set(n,t)},[t]),n}function LM(t){return t}function FM(t,e){e===void 0&&(e=LM);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var u=function(){var h=o;o=[],h.forEach(s)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(h){o.push(h),c()},filter:function(h){return o=o.filter(h),n}}}};return i}function jM(t){t===void 0&&(t={});var e=FM(null);return e.options=qn({async:!0,ssr:!1},t),e}var GT=function(t){var e=t.sideCar,n=qT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,qn({},n))};GT.isSideCarExport=!0;function UM(t,e){return t.useMedium(e),GT}var KT=jM(),Lh=function(){},xd=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:Lh,onWheelCapture:Lh,onTouchMoveCapture:Lh}),i=r[0],s=r[1],o=t.forwardProps,l=t.children,u=t.className,c=t.removeScrollBar,h=t.enabled,m=t.shards,f=t.sideCar,y=t.noRelative,C=t.noIsolation,I=t.inert,k=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,A=t.gapMode,N=qT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=f,U=VM([n,e]),v=qn(qn({},N),i);return x.createElement(x.Fragment,null,h&&x.createElement(L,{sideCar:KT,removeScrollBar:c,shards:m,noRelative:y,noIsolation:C,inert:I,setCallbacks:s,allowPinchZoom:!!k,lockRef:n,gapMode:A}),o?x.cloneElement(x.Children.only(l),qn(qn({},v),{ref:U})):x.createElement(_,qn({},v,{className:u,ref:U}),l))});xd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xd.classNames={fullWidth:Ju,zeroRight:Qu};var zM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zM();return e&&t.setAttribute("nonce",e),t}function $M(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function WM(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HM=function(){var t=0,e=null;return{add:function(n){t==0&&(e=BM())&&($M(e,n),WM(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qM=function(){var t=HM();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},YT=function(){var t=qM(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},GM={left:0,top:0,right:0,gap:0},Fh=function(t){return parseInt(t||"",10)||0},KM=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Fh(n),Fh(r),Fh(i)]},YM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return GM;var e=KM(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},XM=YT(),uo="data-scroll-locked",QM=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(NM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(uo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ju,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uo,`] {
    `).concat(DM,": ").concat(l,`px;
  }
`)},O0=function(){var t=parseInt(document.body.getAttribute(uo)||"0",10);return isFinite(t)?t:0},JM=function(){x.useEffect(function(){return document.body.setAttribute(uo,(O0()+1).toString()),function(){var t=O0()-1;t<=0?document.body.removeAttribute(uo):document.body.setAttribute(uo,t.toString())}},[])},ZM=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;JM();var s=x.useMemo(function(){return YM(i)},[i]);return x.createElement(XM,{styles:QM(s,!e,i,n?"":"!important")})},up=!1;if(typeof window<"u")try{var Iu=Object.defineProperty({},"passive",{get:function(){return up=!0,!0}});window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{up=!1}var bs=up?{passive:!1}:!1,e4=function(t){return t.tagName==="TEXTAREA"},XT=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!e4(t)&&n[e]==="visible")},t4=function(t){return XT(t,"overflowY")},n4=function(t){return XT(t,"overflowX")},V0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=QT(t,r);if(i){var s=JT(t,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},r4=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},i4=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},QT=function(t,e){return t==="v"?t4(e):n4(e)},JT=function(t,e){return t==="v"?r4(e):i4(e)},s4=function(t,e){return t==="h"&&e==="rtl"?-1:1},o4=function(t,e,n,r,i){var s=s4(t,window.getComputedStyle(e).direction),o=s*r,l=n.target,u=e.contains(l),c=!1,h=o>0,m=0,f=0;do{if(!l)break;var y=JT(t,l),C=y[0],I=y[1],k=y[2],w=I-k-s*C;(C||w)&&QT(t,l)&&(m+=w,f+=C);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(h&&(Math.abs(m)<1||!i)||!h&&(Math.abs(f)<1||!i))&&(c=!0),c},Su=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},L0=function(t){return[t.deltaX,t.deltaY]},F0=function(t){return t&&"current"in t?t.current:t},a4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},l4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},u4=0,Ns=[];function c4(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(u4++)[0],s=x.useState(YT)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var I=bM([t.lockRef.current],(t.shards||[]).map(F0),!0).filter(Boolean);return I.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),I.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=x.useCallback(function(I,k){if("touches"in I&&I.touches.length===2||I.type==="wheel"&&I.ctrlKey)return!o.current.allowPinchZoom;var w=Su(I),_=n.current,A="deltaX"in I?I.deltaX:_[0]-w[0],N="deltaY"in I?I.deltaY:_[1]-w[1],L,U=I.target,v=Math.abs(A)>Math.abs(N)?"h":"v";if("touches"in I&&v==="h"&&U.type==="range")return!1;var g=V0(v,U);if(!g)return!0;if(g?L=v:(L=v==="v"?"h":"v",g=V0(v,U)),!g)return!1;if(!r.current&&"changedTouches"in I&&(A||N)&&(r.current=L),!L)return!0;var R=r.current||L;return o4(R,k,I,R==="h"?A:N,!0)},[]),u=x.useCallback(function(I){var k=I;if(!(!Ns.length||Ns[Ns.length-1]!==s)){var w="deltaY"in k?L0(k):Su(k),_=e.current.filter(function(L){return L.name===k.type&&(L.target===k.target||k.target===L.shadowParent)&&a4(L.delta,w)})[0];if(_&&_.should){k.cancelable&&k.preventDefault();return}if(!_){var A=(o.current.shards||[]).map(F0).filter(Boolean).filter(function(L){return L.contains(k.target)}),N=A.length>0?l(k,A[0]):!o.current.noIsolation;N&&k.cancelable&&k.preventDefault()}}},[]),c=x.useCallback(function(I,k,w,_){var A={name:I,delta:k,target:w,should:_,shadowParent:d4(w)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(N){return N!==A})},1)},[]),h=x.useCallback(function(I){n.current=Su(I),r.current=void 0},[]),m=x.useCallback(function(I){c(I.type,L0(I),I.target,l(I,t.lockRef.current))},[]),f=x.useCallback(function(I){c(I.type,Su(I),I.target,l(I,t.lockRef.current))},[]);x.useEffect(function(){return Ns.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",u,bs),document.addEventListener("touchmove",u,bs),document.addEventListener("touchstart",h,bs),function(){Ns=Ns.filter(function(I){return I!==s}),document.removeEventListener("wheel",u,bs),document.removeEventListener("touchmove",u,bs),document.removeEventListener("touchstart",h,bs)}},[]);var y=t.removeScrollBar,C=t.inert;return x.createElement(x.Fragment,null,C?x.createElement(s,{styles:l4(i)}):null,y?x.createElement(ZM,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function d4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const h4=UM(KT,c4);var ZT=x.forwardRef(function(t,e){return x.createElement(xd,qn({},t,{ref:e,sideCar:h4}))});ZT.classNames=xd.classNames;var f4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ds=new WeakMap,Cu=new WeakMap,Au={},jh=0,eI=function(t){return t&&(t.host||eI(t.parentNode))},p4=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=eI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},m4=function(t,e,n,r){var i=p4(e,Array.isArray(t)?t:[t]);Au[n]||(Au[n]=new WeakMap);var s=Au[n],o=[],l=new Set,u=new Set(i),c=function(m){!m||l.has(m)||(l.add(m),c(m.parentNode))};i.forEach(c);var h=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))h(f);else try{var y=f.getAttribute(r),C=y!==null&&y!=="false",I=(Ds.get(f)||0)+1,k=(s.get(f)||0)+1;Ds.set(f,I),s.set(f,k),o.push(f),I===1&&C&&Cu.set(f,!0),k===1&&f.setAttribute(n,"true"),C||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return h(e),l.clear(),jh++,function(){o.forEach(function(m){var f=Ds.get(m)-1,y=s.get(m)-1;Ds.set(m,f),s.set(m,y),f||(Cu.has(m)||m.removeAttribute(r),Cu.delete(m)),y||m.removeAttribute(n)}),jh--,jh||(Ds=new WeakMap,Ds=new WeakMap,Cu=new WeakMap,Au={})}},g4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=f4(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),m4(r,i,n,"aria-hidden")):function(){return null}},Rd="Dialog",[tI,nI]=FT(Rd),[y4,On]=tI(Rd),rI=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,l=x.useRef(null),u=x.useRef(null),[c,h]=eM({prop:r,defaultProp:i??!1,onChange:s,caller:Rd});return T.jsx(y4,{scope:e,triggerRef:l,contentRef:u,contentId:Nh(),titleId:Nh(),descriptionId:Nh(),open:c,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};rI.displayName=Rd;var iI="DialogTrigger",sI=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=On(iI,n),s=Mr(e,i.triggerRef);return T.jsx(Or.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ag(i.open),...r,ref:s,onClick:Er(t.onClick,i.onOpenToggle)})});sI.displayName=iI;var sg="DialogPortal",[v4,oI]=tI(sg,{forceMount:void 0}),aI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=On(sg,e);return T.jsx(v4,{scope:e,forceMount:n,children:x.Children.map(r,o=>T.jsx(kd,{present:n||s.open,children:T.jsx(HT,{asChild:!0,container:i,children:o})}))})};aI.displayName=sg;var Wc="DialogOverlay",lI=x.forwardRef((t,e)=>{const n=oI(Wc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=On(Wc,t.__scopeDialog);return s.modal?T.jsx(kd,{present:r||s.open,children:T.jsx(w4,{...i,ref:e})}):null});lI.displayName=Wc;var _4=ig("DialogOverlay.RemoveScroll"),w4=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=On(Wc,n);return T.jsx(ZT,{as:_4,allowPinchZoom:!0,shards:[i.contentRef],children:T.jsx(Or.div,{"data-state":ag(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hs="DialogContent",uI=x.forwardRef((t,e)=>{const n=oI(hs,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=On(hs,t.__scopeDialog);return T.jsx(kd,{present:r||s.open,children:s.modal?T.jsx(E4,{...i,ref:e}):T.jsx(T4,{...i,ref:e})})});uI.displayName=hs;var E4=x.forwardRef((t,e)=>{const n=On(hs,t.__scopeDialog),r=x.useRef(null),i=Mr(e,n.contentRef,r);return x.useEffect(()=>{const s=r.current;if(s)return g4(s)},[]),T.jsx(cI,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Er(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Er(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Er(t.onFocusOutside,s=>s.preventDefault())})}),T4=x.forwardRef((t,e)=>{const n=On(hs,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return T.jsx(cI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var u,c;(u=t.onInteractOutside)==null||u.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),cI=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,l=On(hs,n),u=x.useRef(null),c=Mr(e,u);return PM(),T.jsxs(T.Fragment,{children:[T.jsx($T,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:T.jsx(zT,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ag(l.open),...o,ref:c,onDismiss:()=>l.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(S4,{titleId:l.titleId}),T.jsx(A4,{contentRef:u,descriptionId:l.descriptionId})]})]})}),og="DialogTitle",dI=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=On(og,n);return T.jsx(Or.h2,{id:i.titleId,...r,ref:e})});dI.displayName=og;var hI="DialogDescription",fI=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=On(hI,n);return T.jsx(Or.p,{id:i.descriptionId,...r,ref:e})});fI.displayName=hI;var pI="DialogClose",mI=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=On(pI,n);return T.jsx(Or.button,{type:"button",...r,ref:e,onClick:Er(t.onClick,()=>i.onOpenChange(!1))})});mI.displayName=pI;function ag(t){return t?"open":"closed"}var gI="DialogTitleWarning",[I4,yI]=YD(gI,{contentName:hs,titleName:og,docsSlug:"dialog"}),S4=({titleId:t})=>{const e=yI(gI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},C4="DialogDescriptionWarning",A4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yI(C4).contentName}}.`;return x.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},vI=rI,_I=sI,wI=aI,lg=lI,ug=uI,cg=dI,dg=fI,hg=mI;function EI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=EI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function TI(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=EI(t))&&(r&&(r+=" "),r+=e);return r}const j0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,U0=TI,II=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return U0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const h=n==null?void 0:n[c],m=s==null?void 0:s[c];if(h===null)return null;const f=j0(h)||j0(m);return i[c][f]}),l=n&&Object.entries(n).reduce((c,h)=>{let[m,f]=h;return f===void 0||(c[m]=f),c},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,h)=>{let{class:m,className:f,...y}=h;return Object.entries(y).every(C=>{let[I,k]=C;return Array.isArray(k)?k.includes({...s,...l}[I]):{...s,...l}[I]===k})?[...c,m,f]:c},[]);return U0(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},fg="-",k4=t=>{const e=R4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(fg);return l[0]===""&&l.length!==1&&l.shift(),SI(l,e)||x4(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},SI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?SI(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(fg);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},z0=/^\[(.+)\]$/,x4=t=>{if(z0.test(t)){const e=z0.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},R4=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)cp(n[i],r,i,e);return r},cp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:B0(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(P4(i)){cp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{cp(o,B0(e,s),n,r)})})},B0=(t,e)=>{let n=t;return e.split(fg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},P4=t=>t.isThemeGetter,b4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},dp="!",hp=":",N4=hp.length,D4=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,l=0,u=0,c;for(let C=0;C<i.length;C++){let I=i[C];if(o===0&&l===0){if(I===hp){s.push(i.slice(u,C)),u=C+N4;continue}if(I==="/"){c=C;continue}}I==="["?o++:I==="]"?o--:I==="("?l++:I===")"&&l--}const h=s.length===0?i:i.substring(u),m=M4(h),f=m!==h,y=c&&c>u?c-u:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}};if(e){const i=e+hp,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},M4=t=>t.endsWith(dp)?t.substring(0,t.length-1):t.startsWith(dp)?t.substring(1):t,O4=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},V4=t=>({cache:b4(t.cacheSize),parseClassName:D4(t),sortModifiers:O4(t),...k4(t)}),L4=/\s+/,F4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],l=t.trim().split(L4);let u="";for(let c=l.length-1;c>=0;c-=1){const h=l[c],{isExternal:m,modifiers:f,hasImportantModifier:y,baseClassName:C,maybePostfixModifierPosition:I}=n(h);if(m){u=h+(u.length>0?" "+u:u);continue}let k=!!I,w=r(k?C.substring(0,I):C);if(!w){if(!k){u=h+(u.length>0?" "+u:u);continue}if(w=r(C),!w){u=h+(u.length>0?" "+u:u);continue}k=!1}const _=s(f).join(":"),A=y?_+dp:_,N=A+w;if(o.includes(N))continue;o.push(N);const L=i(w,k);for(let U=0;U<L.length;++U){const v=L[U];o.push(A+v)}u=h+(u.length>0?" "+u:u)}return u};function j4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CI(e))&&(r&&(r+=" "),r+=n);return r}const CI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CI(t[r]))&&(n&&(n+=" "),n+=e);return n};function U4(t,...e){let n,r,i,s=o;function o(u){const c=e.reduce((h,m)=>m(h),t());return n=V4(c),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const c=r(u);if(c)return c;const h=F4(u,n);return i(u,h),h}return function(){return s(j4.apply(null,arguments))}}const ft=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},AI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,z4=/^\d+\/\d+$/,B4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,H4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,q4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ms=t=>z4.test(t),ye=t=>!!t&&!Number.isNaN(Number(t)),Kr=t=>!!t&&Number.isInteger(Number(t)),Uh=t=>t.endsWith("%")&&ye(t.slice(0,-1)),cr=t=>B4.test(t),G4=()=>!0,K4=t=>$4.test(t)&&!W4.test(t),xI=()=>!1,Y4=t=>H4.test(t),X4=t=>q4.test(t),Q4=t=>!Z(t)&&!ee(t),J4=t=>jo(t,bI,xI),Z=t=>AI.test(t),$i=t=>jo(t,NI,K4),zh=t=>jo(t,rO,ye),$0=t=>jo(t,RI,xI),Z4=t=>jo(t,PI,X4),ku=t=>jo(t,DI,Y4),ee=t=>kI.test(t),da=t=>Uo(t,NI),eO=t=>Uo(t,iO),W0=t=>Uo(t,RI),tO=t=>Uo(t,bI),nO=t=>Uo(t,PI),xu=t=>Uo(t,DI,!0),jo=(t,e,n)=>{const r=AI.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Uo=(t,e,n=!1)=>{const r=kI.exec(t);return r?r[1]?e(r[1]):n:!1},RI=t=>t==="position"||t==="percentage",PI=t=>t==="image"||t==="url",bI=t=>t==="length"||t==="size"||t==="bg-size",NI=t=>t==="length",rO=t=>t==="number",iO=t=>t==="family-name",DI=t=>t==="shadow",sO=()=>{const t=ft("color"),e=ft("font"),n=ft("text"),r=ft("font-weight"),i=ft("tracking"),s=ft("leading"),o=ft("breakpoint"),l=ft("container"),u=ft("spacing"),c=ft("radius"),h=ft("shadow"),m=ft("inset-shadow"),f=ft("text-shadow"),y=ft("drop-shadow"),C=ft("blur"),I=ft("perspective"),k=ft("aspect"),w=ft("ease"),_=ft("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...N(),ee,Z],U=()=>["auto","hidden","clip","visible","scroll"],v=()=>["auto","contain","none"],g=()=>[ee,Z,u],R=()=>[Ms,"full","auto",...g()],S=()=>[Kr,"none","subgrid",ee,Z],D=()=>["auto",{span:["full",Kr,ee,Z]},Kr,ee,Z],M=()=>[Kr,"auto",ee,Z],P=()=>["auto","min","max","fr",ee,Z],be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Le=()=>["start","end","center","stretch","center-safe","end-safe"],ce=()=>["auto",...g()],Ae=()=>[Ms,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...g()],j=()=>[t,ee,Z],K=()=>[...N(),W0,$0,{position:[ee,Z]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ve=()=>["auto","cover","contain",tO,J4,{size:[ee,Z]}],pe=()=>[Uh,da,$i],he=()=>["","none","full",c,ee,Z],ne=()=>["",ye,da,$i],ae=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>[ye,Uh,W0,$0],Ee=()=>["","none",C,ee,Z],xe=()=>["none",ye,ee,Z],me=()=>["none",ye,ee,Z],Ne=()=>[ye,ee,Z],jt=()=>[Ms,"full",...g()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cr],breakpoint:[cr],color:[G4],container:[cr],"drop-shadow":[cr],ease:["in","out","in-out"],font:[Q4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cr],shadow:[cr],spacing:["px",ye],text:[cr],"text-shadow":[cr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ms,Z,ee,k]}],container:["container"],columns:[{columns:[ye,Z,ee,l]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:v()}],"overscroll-x":[{"overscroll-x":v()}],"overscroll-y":[{"overscroll-y":v()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Kr,"auto",ee,Z]}],basis:[{basis:[Ms,"full","auto",l,...g()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ye,Ms,"auto","initial","none",Z]}],grow:[{grow:["",ye,ee,Z]}],shrink:[{shrink:["",ye,ee,Z]}],order:[{order:[Kr,"first","last","none",ee,Z]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:g()}],"gap-x":[{"gap-x":g()}],"gap-y":[{"gap-y":g()}],"justify-content":[{justify:[...be(),"normal"]}],"justify-items":[{"justify-items":[...Le(),"normal"]}],"justify-self":[{"justify-self":["auto",...Le()]}],"align-content":[{content:["normal",...be()]}],"align-items":[{items:[...Le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Le(),{baseline:["","last"]}]}],"place-content":[{"place-content":be()}],"place-items":[{"place-items":[...Le(),"baseline"]}],"place-self":[{"place-self":["auto",...Le()]}],p:[{p:g()}],px:[{px:g()}],py:[{py:g()}],ps:[{ps:g()}],pe:[{pe:g()}],pt:[{pt:g()}],pr:[{pr:g()}],pb:[{pb:g()}],pl:[{pl:g()}],m:[{m:ce()}],mx:[{mx:ce()}],my:[{my:ce()}],ms:[{ms:ce()}],me:[{me:ce()}],mt:[{mt:ce()}],mr:[{mr:ce()}],mb:[{mb:ce()}],ml:[{ml:ce()}],"space-x":[{"space-x":g()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":g()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ae()}],w:[{w:[l,"screen",...Ae()]}],"min-w":[{"min-w":[l,"screen","none",...Ae()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...Ae()]}],h:[{h:["screen","lh",...Ae()]}],"min-h":[{"min-h":["screen","lh","none",...Ae()]}],"max-h":[{"max-h":["screen","lh",...Ae()]}],"font-size":[{text:["base",n,da,$i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ee,zh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uh,Z]}],"font-family":[{font:[eO,Z,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ee,Z]}],"line-clamp":[{"line-clamp":[ye,"none",ee,zh]}],leading:[{leading:[s,...g()]}],"list-image":[{"list-image":["none",ee,Z]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ee,Z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[ye,"from-font","auto",ee,$i]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[ye,"auto",ee,Z]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:g()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee,Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee,Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:ve()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Kr,ee,Z],radial:["",ee,Z],conic:[Kr,ee,Z]},nO,Z4]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ye,ee,Z]}],"outline-w":[{outline:["",ye,da,$i]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",h,xu,ku]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",m,xu,ku]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[ye,$i]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",f,xu,ku]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[ye,ee,Z]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":H()}],"mask-image-linear-to-pos":[{"mask-linear-to":H()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":H()}],"mask-image-t-to-pos":[{"mask-t-to":H()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":H()}],"mask-image-r-to-pos":[{"mask-r-to":H()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":H()}],"mask-image-b-to-pos":[{"mask-b-to":H()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":H()}],"mask-image-l-to-pos":[{"mask-l-to":H()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":H()}],"mask-image-x-to-pos":[{"mask-x-to":H()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":H()}],"mask-image-y-to-pos":[{"mask-y-to":H()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[ee,Z]}],"mask-image-radial-from-pos":[{"mask-radial-from":H()}],"mask-image-radial-to-pos":[{"mask-radial-to":H()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":H()}],"mask-image-conic-to-pos":[{"mask-conic-to":H()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:ve()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ee,Z]}],filter:[{filter:["","none",ee,Z]}],blur:[{blur:Ee()}],brightness:[{brightness:[ye,ee,Z]}],contrast:[{contrast:[ye,ee,Z]}],"drop-shadow":[{"drop-shadow":["","none",y,xu,ku]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",ye,ee,Z]}],"hue-rotate":[{"hue-rotate":[ye,ee,Z]}],invert:[{invert:["",ye,ee,Z]}],saturate:[{saturate:[ye,ee,Z]}],sepia:[{sepia:["",ye,ee,Z]}],"backdrop-filter":[{"backdrop-filter":["","none",ee,Z]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[ye,ee,Z]}],"backdrop-contrast":[{"backdrop-contrast":[ye,ee,Z]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ye,ee,Z]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ye,ee,Z]}],"backdrop-invert":[{"backdrop-invert":["",ye,ee,Z]}],"backdrop-opacity":[{"backdrop-opacity":[ye,ee,Z]}],"backdrop-saturate":[{"backdrop-saturate":[ye,ee,Z]}],"backdrop-sepia":[{"backdrop-sepia":["",ye,ee,Z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":g()}],"border-spacing-x":[{"border-spacing-x":g()}],"border-spacing-y":[{"border-spacing-y":g()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ee,Z]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ye,"initial",ee,Z]}],ease:[{ease:["linear","initial",w,ee,Z]}],delay:[{delay:[ye,ee,Z]}],animate:[{animate:["none",_,ee,Z]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,ee,Z]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[ee,Z,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:jt()}],"translate-x":[{"translate-x":jt()}],"translate-y":[{"translate-y":jt()}],"translate-z":[{"translate-z":jt()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee,Z]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":g()}],"scroll-mx":[{"scroll-mx":g()}],"scroll-my":[{"scroll-my":g()}],"scroll-ms":[{"scroll-ms":g()}],"scroll-me":[{"scroll-me":g()}],"scroll-mt":[{"scroll-mt":g()}],"scroll-mr":[{"scroll-mr":g()}],"scroll-mb":[{"scroll-mb":g()}],"scroll-ml":[{"scroll-ml":g()}],"scroll-p":[{"scroll-p":g()}],"scroll-px":[{"scroll-px":g()}],"scroll-py":[{"scroll-py":g()}],"scroll-ps":[{"scroll-ps":g()}],"scroll-pe":[{"scroll-pe":g()}],"scroll-pt":[{"scroll-pt":g()}],"scroll-pr":[{"scroll-pr":g()}],"scroll-pb":[{"scroll-pb":g()}],"scroll-pl":[{"scroll-pl":g()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee,Z]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[ye,da,$i,zh]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},oO=U4(sO);function en(...t){return oO(TI(t))}const aO=vI,lO=_I,uO=wI,MI=x.forwardRef(({className:t,...e},n)=>T.jsx(lg,{className:en("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));MI.displayName=lg.displayName;const cO=II("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),OI=x.forwardRef(({side:t="right",className:e,children:n,...r},i)=>T.jsxs(uO,{children:[T.jsx(MI,{}),T.jsxs(ug,{ref:i,className:en(cO({side:t}),e),...r,children:[T.jsxs(hg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[T.jsx(cE,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));OI.displayName=ug.displayName;const VI=({className:t,...e})=>T.jsx("div",{className:en("flex flex-col space-y-2 text-center sm:text-left",t),...e});VI.displayName="SheetHeader";const LI=x.forwardRef(({className:t,...e},n)=>T.jsx(cg,{ref:n,className:en("text-lg font-semibold text-foreground",t),...e}));LI.displayName=cg.displayName;const dO=x.forwardRef(({className:t,...e},n)=>T.jsx(dg,{ref:n,className:en("text-sm text-muted-foreground",t),...e}));dO.displayName=dg.displayName;const pg=II("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),FI=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?rM:"button";return T.jsx(o,{className:en(pg({variant:e,size:n,className:t})),ref:s,...i})});FI.displayName="Button";var jI="AlertDialog",[hO,NO]=FT(jI,[nI]),Vr=nI(),UI=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vr(e);return T.jsx(vI,{...r,...n,modal:!0})};UI.displayName=jI;var fO="AlertDialogTrigger",zI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vr(n);return T.jsx(_I,{...i,...r,ref:e})});zI.displayName=fO;var pO="AlertDialogPortal",BI=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vr(e);return T.jsx(wI,{...r,...n})};BI.displayName=pO;var mO="AlertDialogOverlay",$I=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vr(n);return T.jsx(lg,{...i,...r,ref:e})});$I.displayName=mO;var co="AlertDialogContent",[gO,yO]=hO(co),vO=sM("AlertDialogContent"),WI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Vr(n),o=x.useRef(null),l=Mr(e,o),u=x.useRef(null);return T.jsx(I4,{contentName:co,titleName:HI,docsSlug:"alert-dialog",children:T.jsx(gO,{scope:n,cancelRef:u,children:T.jsxs(ug,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:Er(i.onOpenAutoFocus,c=>{var h;c.preventDefault(),(h=u.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[T.jsx(vO,{children:r}),T.jsx(wO,{contentRef:o})]})})})});WI.displayName=co;var HI="AlertDialogTitle",qI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vr(n);return T.jsx(cg,{...i,...r,ref:e})});qI.displayName=HI;var GI="AlertDialogDescription",KI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vr(n);return T.jsx(dg,{...i,...r,ref:e})});KI.displayName=GI;var _O="AlertDialogAction",YI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Vr(n);return T.jsx(hg,{...i,...r,ref:e})});YI.displayName=_O;var XI="AlertDialogCancel",QI=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=yO(XI,n),s=Vr(n),o=Mr(e,i);return T.jsx(hg,{...s,...r,ref:o})});QI.displayName=XI;var wO=({contentRef:t})=>{const e=`\`${co}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${co}\` by passing a \`${GI}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${co}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},EO=UI,TO=zI,IO=BI,JI=$I,ZI=WI,eS=YI,tS=QI,nS=qI,rS=KI;const SO=EO,CO=TO,AO=IO,iS=x.forwardRef(({className:t,...e},n)=>T.jsx(JI,{className:en("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));iS.displayName=JI.displayName;const sS=x.forwardRef(({className:t,...e},n)=>T.jsxs(AO,{children:[T.jsx(iS,{}),T.jsx(ZI,{ref:n,className:en("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));sS.displayName=ZI.displayName;const oS=({className:t,...e})=>T.jsx("div",{className:en("flex flex-col space-y-2 text-center sm:text-left",t),...e});oS.displayName="AlertDialogHeader";const aS=({className:t,...e})=>T.jsx("div",{className:en("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});aS.displayName="AlertDialogFooter";const lS=x.forwardRef(({className:t,...e},n)=>T.jsx(nS,{ref:n,className:en("text-lg font-semibold",t),...e}));lS.displayName=nS.displayName;const uS=x.forwardRef(({className:t,...e},n)=>T.jsx(rS,{ref:n,className:en("text-sm text-muted-foreground",t),...e}));uS.displayName=rS.displayName;const cS=x.forwardRef(({className:t,...e},n)=>T.jsx(eS,{ref:n,className:en(pg(),t),...e}));cS.displayName=eS.displayName;const dS=x.forwardRef(({className:t,...e},n)=>T.jsx(tS,{ref:n,className:en(pg({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));dS.displayName=tS.displayName;const kO=({onNewWhiteboard:t,onLoadWhiteboard:e,currentWhiteboardId:n,refreshTrigger:r,open:i,onOpenChange:s})=>{const{user:o}=Rl(),[l,u]=x.useState([]),[c,h]=x.useState(!0),[m,f]=x.useState(!1),[y,C]=x.useState(null),{getAllWhiteboards:I,deleteWhiteboard:k}=rg(),w=i!==void 0?i:m,_=s||f,A=()=>{t(),_(!1)},N=x.useCallback(S=>{w&&(S.key==="n"||S.key==="N")&&!S.repeat&&(S.preventDefault(),A())},[w,A]);x.useEffect(()=>{if(w)return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[w,N]),x.useEffect(()=>{console.log("📱 Sidebar open effect triggered:",{open:w,user:o==null?void 0:o.uid}),w&&o&&(console.log("🚀 Sidebar opened with user, loading whiteboards"),L())},[w,o]),x.useEffect(()=>{console.log("👤 User effect triggered:",{user:o==null?void 0:o.uid,userExists:!!o}),o?(console.log("🚀 User authenticated, loading whiteboards"),L()):(console.log("🧹 No user, clearing whiteboards"),u([]))},[o]),x.useEffect(()=>{console.log("🔄 Refresh trigger effect:",{user:o==null?void 0:o.uid,userExists:!!o,refreshTrigger:r}),o&&r&&r>0&&(console.log("🚀 Refresh trigger activated, loading whiteboards"),L())},[o,r]);const L=async()=>{console.log("🔄 Loading whiteboards...",{user:o==null?void 0:o.uid,userExists:!!o}),h(!0);try{const S=await I(o);console.log("✅ Loaded whiteboards:",S.length,S),u(S)}catch(S){console.error("❌ Error loading whiteboards:",S)}finally{h(!1)}},U=async()=>{y!=null&&y.id&&(await k(y.id)&&L(),C(null))},v=S=>{e(S),_(!1)},g=S=>S?(S.toDate?S.toDate():new Date(S)).toLocaleDateString():"Unknown",R=S=>S?(S.toDate?S.toDate():new Date(S)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return o?T.jsxs(aO,{open:w,onOpenChange:_,children:[T.jsx(lO,{asChild:!0,children:T.jsxs(FI,{variant:"outline",size:"sm",className:"fixed left-4 top-28 z-50 bg-blue-600 text-white border-blue-600 hover:bg-blue-700 shadow-lg",title:"Open whiteboard menu (Press B to toggle)",children:[T.jsx(fk,{className:"w-4 h-4 mr-2"}),"Whiteboards"]})}),T.jsxs(OI,{side:"left",className:"w-80 sm:w-96 p-0 flex flex-col",children:[T.jsx(VI,{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:T.jsx(LI,{className:"text-xl font-semibold text-gray-800",children:"My Whiteboards"})}),T.jsx("div",{className:"flex-1 overflow-y-auto",children:T.jsxs("div",{className:"p-6",children:[T.jsxs("button",{onClick:A,className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mb-4 shadow-sm",title:"Create a new whiteboard (Press N when sidebar is open)",children:[T.jsx(lE,{className:"w-5 h-5 mr-2"}),"New Whiteboard"]}),T.jsxs("div",{className:"mb-8",children:[T.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[T.jsx(qy,{className:"w-5 h-5 mr-2 text-blue-600"}),"Recent Whiteboards"]}),c?T.jsxs("div",{className:"text-center py-8",children:[T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),T.jsx("p",{className:"text-gray-500 mt-2",children:"Loading whiteboards..."})]}):l.length===0?T.jsxs("div",{className:"text-center py-8 text-gray-500",children:[T.jsx(qy,{className:"w-12 h-12 mx-auto mb-2 opacity-40"}),T.jsx("p",{className:"font-medium",children:"No whiteboards yet"}),T.jsx("p",{className:"text-sm",children:"Create your first whiteboard!"})]}):T.jsx("div",{className:"space-y-2",children:l.map(S=>T.jsx("div",{onClick:()=>v(S),className:`group p-3 rounded-lg cursor-pointer transition-all hover:bg-gray-100 border ${n===S.id?"bg-blue-50 border-blue-200 shadow-sm":"bg-gray-50 border-gray-200 hover:border-gray-300"}`,children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("h4",{className:"font-medium text-gray-800 truncate",children:S.title}),T.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[T.jsx(oE,{className:"w-3 h-3 mr-1"}),g(S.updatedAt),T.jsx("span",{className:"mx-1",children:"•"}),R(S.updatedAt)]})]}),T.jsxs(SO,{onOpenChange:D=>{D||C(null)},children:[T.jsx(CO,{asChild:!0,children:T.jsx("button",{onClick:D=>{D.stopPropagation();const M=l.find(P=>P.id===S.id);M&&C(M)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 rounded text-red-500 hover:text-red-700 transition-all",title:"Delete whiteboard",children:T.jsx(uE,{className:"w-4 h-4"})})}),T.jsxs(sS,{children:[T.jsxs(oS,{children:[T.jsx(lS,{children:"Delete Whiteboard"}),T.jsxs(uS,{children:['Are you sure you want to delete "',(y==null?void 0:y.title)||"this whiteboard",'"? This action cannot be undone and will permanently remove the whiteboard and all its content.']})]}),T.jsxs(aS,{children:[T.jsx(dS,{children:"Cancel"}),T.jsx(cS,{onClick:()=>U(),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})},S.id))})]}),T.jsxs("div",{children:[T.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[T.jsx(Ky,{className:"w-5 h-5 mr-2 text-green-600"}),"Shared Whiteboards"]}),T.jsxs("div",{className:"text-center py-8 text-gray-500",children:[T.jsx(Ky,{className:"w-12 h-12 mx-auto mb-2 opacity-40"}),T.jsx("p",{className:"font-medium",children:"Coming soon!"}),T.jsx("p",{className:"text-sm",children:"Collaboration features will be added here"})]})]})]})})]})]}):null},xO=({onClose:t})=>{const[e,n]=x.useState(!1),[r,i]=x.useState(""),[s,o]=x.useState(""),[l,u]=x.useState(""),{signInWithEmail:c,signUpWithEmail:h,signInWithGoogle:m,error:f,loading:y}=Rl(),C=async k=>{k.preventDefault();try{e?await h(r,s,l):await c(r,s),t()}catch{}},I=async()=>{try{await m(),t()}catch{}};return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 overflow-y-auto",children:T.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full my-8 max-h-[90vh] overflow-y-auto shadow-2xl",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h2",{className:"text-2xl font-bold",children:e?"Create Account":"Sign In"}),T.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),f&&T.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),T.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e&&T.jsxs("div",{children:[T.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),T.jsx("input",{type:"text",id:"displayName",value:l,onChange:k=>u(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your name"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),T.jsx("input",{type:"email",id:"email",value:r,onChange:k=>i(k.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),T.jsx("input",{type:"password",id:"password",value:s,onChange:k=>o(k.target.value),required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••"})]}),T.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:y?"Loading...":e?"Create Account":"Sign In"})]}),T.jsx("div",{className:"my-4 text-center text-gray-500",children:"or"}),T.jsxs("button",{onClick:I,disabled:y,className:"w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 flex items-center justify-center gap-2",children:[T.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),T.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),T.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),T.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),T.jsx("div",{className:"mt-4 text-center",children:T.jsx("button",{onClick:()=>n(!e),className:"text-blue-600 hover:text-blue-800 text-sm",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})};function RO(){const{user:t,loading:e,error:n}=Rl(),{updateWhiteboardTitle:r,getAllWhiteboards:i}=rg();Os.useEffect(()=>{console.log("🎯 App: User state changed",{user:t==null?void 0:t.uid,userEmail:t==null?void 0:t.email,authLoading:e,authError:n})},[t,e,n]);const[s,o]=x.useState(null),[l,u]=x.useState("New whiteboard"),[c,h]=x.useState(0),[m,f]=x.useState(!1),[y,C]=x.useState(!1),[I,k]=x.useState([]),[w,_]=x.useState([]),[A,N]=x.useState([]),[L,U]=x.useState([]),[v,g]=x.useState([]),[R,S]=x.useState(null),[D,M]=x.useState(!1),[P,be]=x.useState(!1),[Le,ce]=x.useState(null),[Ae,j]=x.useState(null),[K,te]=x.useState(null),[ve,pe]=x.useState(null),[he,ne]=x.useState(null),[ae,ge]=x.useState([]),[H,Ee]=x.useState(null),[xe,me]=x.useState([]),[Ne,jt]=x.useState(null),[tr,Mi]=x.useState(null),[Lr,ys]=x.useState(null),[Oi,zo]=x.useState(null),[nr,vt]=x.useState([]),[rr,Ut]=x.useState([]),[Fr,fn]=x.useState([]),[Vn,Oe]=x.useState([]),[nt,vs]=x.useState({x:200,y:200}),[zt,jr]=x.useState(null),[Vi,Ur]=x.useState("text"),{pan:We,setPan:Pl,zoom:He,isPanning:Ln,setIsPanning:_s,panStart:Bo,setPanStart:zr,handleWheel:bl}=BA(),{universalDragState:tn,startDrag:ws,updateDrag:$o,endDrag:Fn}=KA(),[Br,$r]=x.useState(null),[Wr,ir]=x.useState(null),[Wo,dt]=x.useState(null),[sr,or]=x.useState(null),[Li,Ho]=x.useState({x:0,y:0,width:0,height:0,fontSize:0}),[Pd,jn]=x.useState(null),[bd,Nd]=x.useState({centerX:0,centerY:0,startAngle:0,initialRotation:0}),Ke=x.useRef(null),{triggerAutoSave:Es,saveStatus:qo}=HD(s,t,{textBoxes:I,shapes:w,images:A,arrows:L,drawingPaths:v,mindMapNodes:ae},l),Ts=JSON.stringify({textBoxes:I,shapes:w,images:A,arrows:L,drawingPaths:v,mindMapNodes:ae});Os.useEffect(()=>{s&&t?Es(!1):!s&&t&&(I.length>0||w.length>0||A.length>0||L.length>0||v.length>0||ae.length>0)&&Es(!0).then(b=>{b&&(o(b),h(V=>V+1))})},[Ts,s,t,Es]),Os.useEffect(()=>{const b=V=>{if(Ke.current&&V.clipboardData){const $=V.clipboardData.items;for(let G=0;G<$.length;G++){const re=$[G];if(re.type.indexOf("image")!==-1){const ie=re.getAsFile();if(ie){const oe=new FileReader;oe.onload=_e=>{var X;const je=(X=_e.target)==null?void 0:X.result;N(we=>[...we,{id:Date.now().toString()+Math.random().toString(36).slice(2),x:nt.x-100,y:nt.y-100,src:je,width:200,height:200}])},oe.readAsDataURL(ie)}V.preventDefault();break}}}};return window.addEventListener("paste",b),()=>window.removeEventListener("paste",b)},[nt]);const Un=(b,V)=>{var re;if(b.stopPropagation(),!((re=Ke.current)==null?void 0:re.getBoundingClientRect()))return;const G=I.find(ie=>ie.id===V);G&&($r(V),Ho({x:b.clientX,y:b.clientY,width:G.width,height:G.height,fontSize:G.fontSize}))},Nl=(b,V)=>{var X;b.stopPropagation();const $=(X=Ke.current)==null?void 0:X.getBoundingClientRect();if(!$)return;const G=I.find(we=>we.id===V);if(!G)return;const re=G.x+G.width/2,ie=G.y+G.height/2,oe=(b.clientX-$.left-We.x)/He,_e=(b.clientY-$.top-We.y)/He,je=Math.atan2(_e-ie,oe-re);jn(V),Nd({centerX:re,centerY:ie,startAngle:je,initialRotation:G.rotation})},Dl=(b,V)=>{var re;if(b.stopPropagation(),!((re=Ke.current)==null?void 0:re.getBoundingClientRect()))return;const G=w.find(ie=>ie.id===V);G&&(ir(V),Ho({x:b.clientX,y:b.clientY,width:G.width,height:G.height,fontSize:0}))},Go=(b,V,$)=>{b.stopPropagation(),or({id:V,handle:$})},{handleImageClick:Ko,handleImageMouseDown:Ml,handleImageResizeStart:Ol,handleImageDelete:Dd}=qA({images:A,setImages:N,setDraggingImage:pe,setDragImageStart:ne,setResizingImage:dt,setResizeStart:Ho,selectedImages:Fr,setSelectedImages:fn,setSelectedBoxes:vt,setSelectedShapes:Ut,whiteboardRef:Ke,pan:We,zoom:He}),qt=()=>bh[Math.floor(Math.random()*bh.length)],Vl=b=>{!b.ctrlKey&&!b.metaKey&&(vt([]),Ut([]),fn([]),Oe([]),me([]),Ee(null))},{handleTextDoubleClick:Yo,handleTextChange:Fi,handleTextBlur:ar}=WA(k,vt),{handleTextDoubleClick:Xo,handleTextBlur:Md,handleTextChange:Ll,handleDelete:Fl,handleChangeGradient:jl}=HA(w,_,Ut,vt,qt),{handleArrowClick:Qo,handleArrowDelete:Jo,handleToggleStrokeStyle:Ul,handleChangeArrowGradient:zl}=GA(U,Oe,qt),Od=(b,V)=>{V&&(V.ctrlKey||V.metaKey)?me($=>$.includes(b)?$.filter(G=>G!==b):[...$,b]):(me([b]),Ee(b)),vt([]),Ut([]),fn([]),Oe([])},Vd=(b,V)=>{ge($=>$.map(G=>G.id===b?{...G,text:V}:G))},Bl=(b,V)=>{b.stopPropagation();const $=ae.find(G=>G.id===V);$&&(ys(V),zo({x:b.clientX,y:b.clientY,width:$.width,height:$.height}))},Zo=b=>{ge(V=>{const $=V.find(ie=>ie.id===b);if(!$)return V;const G=V.map(ie=>ie.id===$.parentId?{...ie,children:ie.children.filter(oe=>oe!==b)}:ie),re=(ie,oe)=>{const _e=oe.find(X=>X.id===ie);if(!_e)return oe;let je=oe.filter(X=>X.id!==ie);return _e.children.forEach(X=>{je=re(X,je)}),je};return re(b,G)}),H===b&&Ee(null)},Ld=(b,V)=>{var oe;b.stopPropagation();const $=(oe=Ke.current)==null?void 0:oe.getBoundingClientRect();if(!$)return;const G=ae.find(_e=>_e.id===V);if(!G)return;const re=(b.clientX-$.left-We.x)/He,ie=(b.clientY-$.top-We.y)/He;xe.includes(V)||(me([V]),Ee(V)),jt(V),Mi({x:re,y:ie,offsetX:re-G.x,offsetY:ie-G.y})},lr=(b,V=null,$,G)=>{const re=Date.now().toString()+Math.random().toString(36).slice(2);let ie;if(V===null)ie=qt().value;else{const oe=ae.filter(_e=>_e.parentId===V);oe.length>0?ie=oe[0].gradient:ie=qt().value}return{id:re,parentId:V,text:b,x:$??nt.x-60,y:G??nt.y-30,width:120,height:60,children:[],gradient:ie}},nn=(b,V=null,$,G)=>{const re=lr(b,V,$,G);return ge(ie=>{const oe=[...ie,re];return V?oe.map(_e=>_e.id===V?{..._e,children:[..._e.children,re.id]}:_e):oe}),Ee(re.id),re.id},Is=b=>{const V=ae.find(re=>re.id===b);if(!V)return;const $=V.x+V.width+40,G=V.y;nn("Sibling",V.parentId,$,G)},Ss=b=>{const V=ae.find(re=>re.id===b);if(!V)return;const $=V.x,G=V.y+V.height+60;nn("Child",V.id,$,G)},$l=()=>{const b=ae.filter(X=>X.parentId).map(X=>{const we=ae.find(zi=>zi.id===X.parentId);if(!we)return null;const Qe=we.x+we.width/2,ht=we.y+we.height/2,zn=X.x+X.width/2,As=X.y+X.height/2;return{id:X.id,x1:Qe,y1:ht,x2:zn,y2:As,childGradient:X.gradient}}).filter(X=>X!==null);if(b.length===0)return null;const V=b.flatMap(X=>[X.x1,X.x2]),$=b.flatMap(X=>[X.y1,X.y2]),G=Math.min(...V)-20,re=Math.min(...$)-20,ie=Math.max(...V)+20,oe=Math.max(...$)+20,_e=(X,we,Qe,ht)=>{const zn=Qe-X,As=X+zn*.3,zi=we,Ye=Qe-zn*.3;return`M ${X} ${we} C ${As} ${zi}, ${Ye} ${ht}, ${Qe} ${ht}`},je=X=>({"bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500":{from:"#ef4444",via:"#eab308",to:"#a855f7"},"bg-gradient-to-r from-orange-400 via-red-500 to-pink-500":{from:"#fb923c",via:"#ef4444",to:"#ec4899"},"bg-gradient-to-r from-blue-400 via-cyan-500 to-teal-500":{from:"#60a5fa",via:"#06b6d4",to:"#14b8a6"},"bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600":{from:"#4ade80",via:"#10b981",to:"#0d9488"},"bg-gradient-to-r from-purple-400 via-violet-500 to-indigo-500":{from:"#a78bfa",via:"#8b5cf6",to:"#6366f1"},"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-600":{from:"#facc15",via:"#f97316",to:"#dc2626"},"bg-gradient-to-r from-emerald-300 via-cyan-400 to-blue-400":{from:"#6ee7b7",via:"#22d3ee",to:"#60a5fa"},"bg-gradient-to-r from-pink-400 via-rose-500 to-red-500":{from:"#f472b6",via:"#f43f5e",to:"#ef4444"},"bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-500":{from:"#6366f1",via:"#9333ea",to:"#ec4899"},"bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-500":{from:"#fbbf24",via:"#eab308",to:"#f97316"}})[X]||{from:"#6b7280",via:"#4b5563",to:"#374151"};return T.jsxs("svg",{className:"absolute pointer-events-none",style:{left:G,top:re,width:ie-G,height:oe-re,zIndex:1},children:[T.jsx("defs",{children:b.map(X=>{const we=je(X.childGradient);return T.jsxs("linearGradient",{id:`gradient-${X.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[T.jsx("stop",{offset:"0%",stopColor:we.from}),T.jsx("stop",{offset:"50%",stopColor:we.via}),T.jsx("stop",{offset:"100%",stopColor:we.to})]},`gradient-${X.id}`)})}),b.map(X=>{const we=_e(X.x1-G,X.y1-re,X.x2-G,X.y2-re);return T.jsx("path",{d:we,stroke:`url(#gradient-${X.id})`,strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},`connector-${X.id}`)})]})};Tk({setActiveTool:Ur,setTextBoxes:k,setShapes:_,setArrows:U,setSelectedBoxes:vt,setSelectedShapes:Ut,setSelectedArrows:Oe,lastMousePos:nt,selectedBoxes:nr,selectedShapes:rr,selectedArrows:Vn,textBoxes:I,shapes:w,arrows:L,activeTool:Vi,getRandomGradient:qt,activeMindMapNode:H,selectedMindMapNodes:xe,setSelectedMindMapNodes:me,setMindMapNodes:ge,addMindMapNode:nn,addSiblingNode:Is,addChildNode:Ss,handleMindMapNodeDelete:Zo,setSidebarOpen:f}),Os.useEffect(()=>{const b=setInterval(()=>{const V=Date.now();g($=>$.filter(G=>V-G.createdAt<4e3))},500);return()=>clearInterval(b)},[]);const Fe=b=>{k(I.filter(V=>V.id!==b))},Cs=(b,V)=>{k(I.map($=>$.id===b?{...$,gradient:V}:$))},ji=b=>{k(I.map(V=>{if(V.id!==b)return V;const $=!V.isBold,G=Ic(V.text,V.fontSize,{isBold:$,isItalic:V.isItalic});return{...V,isBold:$,width:G.width,height:G.height}}))},Ui=b=>{k(I.map(V=>{if(V.id!==b)return V;const $=!V.isItalic,G=Ic(V.text,V.fontSize,{isBold:V.isBold,isItalic:$});return{...V,isItalic:$,width:G.width,height:G.height}}))},Fd=b=>{k(I.map(V=>V.id===b?{...V,isUnderline:!V.isUnderline}:V))},Wl=(b,V)=>{k(I.map($=>$.id===b?{...$,color:V}:$))},jd=b=>{_(w.map(V=>V.id===b?{...V,isBold:!V.isBold}:V))},Ud=b=>{_(w.map(V=>V.id===b?{...V,isItalic:!V.isItalic}:V))},zd=b=>{_(w.map(V=>V.id===b?{...V,isUnderline:!V.isUnderline}:V))},Bd=(b,V)=>{_(w.map($=>$.id===b?{...$,textColor:V}:$))},Hr=b=>{k((b.textBoxes||[]).map($=>({rotation:0,...$}))),_(b.shapes||[]),N(b.images||[]),g(b.drawingPaths||[]),ge(b.mindMapNodes||[]);const V=(b.arrows||[]).map($=>({...$,gradient:$.gradient||qt().value,strokeStyle:$.strokeStyle||"solid"}));U(V),o(b.id||null),u(b.title||"New whiteboard"),vt([]),Ut([]),fn([]),Oe([]),me([]),Ee(null)},pn=()=>{k([]),_([]),N([]),g([]),ge([]),U([]),o(null),u("New whiteboard"),vt([]),Ut([]),fn([]),Oe([]),me([]),Ee(null)},Hl=async b=>{if(u(b),s&&t)try{await r(s,b),h(V=>V+1)}catch(V){console.error("Error updating whiteboard title:",V)}};return Os.useEffect(()=>{e||(t?(async()=>{if(!t||s)return;const V=await i(t);V.length>0?Hr(V[0]):pn()})():pn())},[t,e]),T.jsxs("div",{className:"min-h-screen bg-gray-50 relative overflow-hidden",children:[n&&T.jsxs("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:[T.jsx("strong",{className:"font-bold",children:"Authentication Error: "}),T.jsx("span",{className:"block sm:inline",children:n})]}),e&&t&&T.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded z-50",children:T.jsx("span",{className:"block sm:inline",children:"Authenticating..."})}),T.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:T.jsx("div",{className:"w-full h-full",style:{backgroundImage:`
              linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
              linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px)
            `,backgroundSize:"20px 20px"}})}),t&&T.jsx(kO,{onNewWhiteboard:pn,onLoadWhiteboard:Hr,currentWhiteboardId:s,refreshTrigger:c,open:m,onOpenChange:f}),T.jsx(GD,{currentWhiteboardTitle:l,onTitleChange:Hl,onShowAuthModal:()=>C(!0),saveStatus:qo}),T.jsx(KD,{activeTool:Vi,setActiveTool:Ur}),T.jsx("div",{ref:Ke,className:`relative w-full h-screen select-none pt-24 ${Ln?"cursor-grabbing":"cursor-crosshair"}`,onClick:Vl,onMouseDown:b=>Wy({e:b,whiteboardRef:Ke,pan:We,zoom:He,activeTool:Vi,setIsPanning:_s,setPanStart:zr,setMarquee:jr,setIsDrawing:M,setCurrentPath:S,setIsDrawingArrow:be,setCurrentArrow:ce,getRandomGradient:qt}),onMouseMove:b=>{var V,$,G;if($A({e:b,whiteboardRef:Ke,pan:We,zoom:He,isPanning:Ln,panStart:Bo,setPan:Pl,setPanStart:zr,isDrawing:D,currentPath:R,activeTool:Vi,setCurrentPath:S,isDrawingArrow:P,currentArrow:Le,setCurrentArrow:ce,draggingArrow:Ae,dragArrowStart:K,setArrows:U,selectedArrows:Vn,draggingImage:ve,dragImageStart:he,setImages:N,resizingBox:Br,resizeStart:Li,setTextBoxesResize:k,rotatingBox:Pd,rotateStart:bd,setTextBoxesRotate:k,resizingShape:Wr,setShapesResize:_,resizingImage:Wo,setImagesResize:N,setLastMousePos:vs,marquee:zt,setMarquee:jr}),tn.draggingElement&&tn.dragStartData){const re=(V=Ke.current)==null?void 0:V.getBoundingClientRect();if(!re)return;const ie=(b.clientX-re.left-We.x)/He,oe=(b.clientY-re.top-We.y)/He;$o(ie,oe,(_e,je,X)=>{switch(tn.dragType){case"textbox":k(we=>we.map(Qe=>{if(X[Qe.id]){const ht=X[Qe.id];return{...Qe,x:ht.x+_e,y:ht.y+je}}return Qe}));break;case"shape":_(we=>we.map(Qe=>{if(X[Qe.id]){const ht=X[Qe.id];return{...Qe,x:ht.x+_e,y:ht.y+je}}return Qe}));break;case"image":N(we=>we.map(Qe=>{if(X[Qe.id]){const ht=X[Qe.id];return{...Qe,x:ht.x+_e,y:ht.y+je}}return Qe}));break}})}if(Lr&&Oi){const re=b.clientX-Oi.x,ie=b.clientY-Oi.y,oe=Math.max(60,Oi.width+re),_e=Math.max(40,Oi.height+ie);ge(je=>je.map(X=>X.id===Lr?{...X,width:oe,height:_e}:X))}if(Ne&&tr){const re=($=Ke.current)==null?void 0:$.getBoundingClientRect();if(!re)return;const ie=(b.clientX-re.left-We.x)/He,oe=(b.clientY-re.top-We.y)/He,_e=ie-tr.x,je=oe-tr.y;ge(X=>X.map(we=>xe.includes(we.id)?{...we,x:we.x+_e,y:we.y+je}:we)),Mi({x:ie,y:oe,offsetX:tr.offsetX,offsetY:tr.offsetY})}if(sr){const re=(G=Ke.current)==null?void 0:G.getBoundingClientRect();if(!re)return;const ie=(b.clientX-re.left-We.x)/He,oe=(b.clientY-re.top-We.y)/He;U(_e=>_e.map(je=>je.id===sr.id?sr.handle==="start"?{...je,startX:ie,startY:oe}:{...je,endX:ie,endY:oe}:je))}},onMouseUp:b=>{const V=tn.hasDragged,$=tn.draggingElement,G=tn.dragType;Hy({isDrawing:D,currentPath:R,setDrawingPaths:g,setCurrentPath:S,setIsDrawing:M,isDrawingArrow:P,currentArrow:Le,setArrows:U,setCurrentArrow:ce,setIsDrawingArrow:be,setResizingBox:$r,setResizingShape:ir,setResizingImage:dt,setRotatingBox:jn,draggingImage:ve,setDraggingImage:pe,setDragImageStart:ne,draggingArrow:Ae,setDraggingArrow:j,setDragArrowStart:te,isPanning:Ln,setIsPanning:_s,setPanStart:zr,marquee:zt,whiteboardRef:Ke,textBoxes:I,shapes:w,arrows:L,mindMapNodes:ae,setSelectedBoxes:vt,setSelectedShapes:Ut,setSelectedArrows:Oe,setSelectedMindMapNodes:me,setMarquee:jr,endDragCallback:Fn}),!V&&$&&G&&(G==="shape"?b.ctrlKey||b.metaKey?Ut(ie=>ie.includes($)?ie.filter(oe=>oe!==$):[...ie,$]):(Ut([$]),vt([]),fn([]),Oe([]),me([])):G==="textbox"&&(b.ctrlKey||b.metaKey?vt(ie=>ie.includes($)?ie.filter(oe=>oe!==$):[...ie,$]):(vt([$]),Ut([]),fn([]),Oe([]),me([])))),Lr&&(ys(null),zo(null)),Ne&&(jt(null),Mi(null)),sr&&or(null)},onMouseLeave:()=>{Hy({isDrawing:D,currentPath:R,setDrawingPaths:g,setCurrentPath:S,setIsDrawing:M,isDrawingArrow:P,currentArrow:Le,setArrows:U,setCurrentArrow:ce,setIsDrawingArrow:be,setResizingBox:$r,setResizingShape:ir,setResizingImage:dt,setRotatingBox:jn,draggingImage:ve,setDraggingImage:pe,setDragImageStart:ne,draggingArrow:Ae,setDraggingArrow:j,setDragArrowStart:te,isPanning:Ln,setIsPanning:_s,setPanStart:zr,marquee:zt,whiteboardRef:Ke,textBoxes:I,shapes:w,arrows:L,mindMapNodes:ae,setSelectedBoxes:vt,setSelectedShapes:Ut,setSelectedArrows:Oe,setSelectedMindMapNodes:me,setMarquee:jr,endDragCallback:Fn}),Lr&&(ys(null),zo(null)),sr&&or(null)},onWheel:b=>bl(b,Ke),onContextMenu:b=>b.preventDefault(),style:{overflow:"hidden"},children:T.jsxs("div",{style:{transform:`translate(${We.x}px, ${We.y}px) scale(${He})`,transformOrigin:"0 0",width:"100%",height:"100%",position:"absolute",left:0,top:0,pointerEvents:"auto"},onMouseDown:b=>Wy({e:b,whiteboardRef:Ke,pan:We,zoom:He,activeTool:Vi,setIsPanning:_s,setPanStart:zr,setMarquee:jr,setIsDrawing:M,setCurrentPath:S,setIsDrawingArrow:be,setCurrentArrow:ce,getRandomGradient:qt}),children:[zt&&T.jsx("div",{className:"absolute border-2 border-blue-400 bg-blue-200 bg-opacity-20 pointer-events-none z-30",style:{left:Math.min(zt.startX,zt.endX),top:Math.min(zt.startY,zt.endY),width:Math.abs(zt.endX-zt.startX),height:Math.abs(zt.endY-zt.startY)}}),$l(),ae.map(b=>T.jsx(Ek,{node:b,isActive:H===b.id,isSelected:xe.includes(b.id),onSelect:Od,onTextChange:Vd,onResizeStart:Bl,onDelete:Zo,onDragStart:Ld},b.id)),T.jsx(YA,{drawingPaths:v,currentPath:R,currentArrow:Le,gradients:bh}),A.map(b=>T.jsx(QA,{id:b.id,x:b.x,y:b.y,src:b.src,width:b.width,height:b.height,selected:Fr.includes(b.id),onClick:(V,$)=>Ko(V,$),onMouseDown:(V,$)=>{Ln||Br||Wr||Wo||tn.draggingElement||Ml(V,$)},onResizeStart:Ol},b.id)),w.map(b=>T.jsx(JA,{shape:b,selected:rr.includes(b.id),onClick:V=>{V.stopPropagation()},onMouseDown:(V,$)=>{var _e;if(V.button!==0||Ln||Wr||Br)return;V.stopPropagation();const G=(_e=Ke.current)==null?void 0:_e.getBoundingClientRect();if(!G)return;const re=(V.clientX-G.left-We.x)/He,ie=(V.clientY-G.top-We.y)/He,oe=rr.includes($)?rr:[$];ws($,"shape",re,ie,oe,w)},onTextChange:Ll,onTextBlur:Md,onTextDoubleClick:Xo,onResizeStart:Dl},b.id)),L.map(b=>T.jsx(ZA,{arrow:b,selected:Vn.includes(b.id),onClick:(V,$)=>Qo(V,$),onMouseDown:(V,$)=>{var _e;if(V.button!==0||Ln||Wr||Br||sr)return;V.stopPropagation();const G=(_e=Ke.current)==null?void 0:_e.getBoundingClientRect();if(!G)return;const re=(V.clientX-G.left-We.x)/He,ie=(V.clientY-G.top-We.y)/He;Vn.includes($)||(Oe([$]),vt([]),Ut([]),fn([]),me([])),j($);const oe={};Vn.forEach(je=>{const X=L.find(we=>we.id===je);X&&(oe[je]={startX:X.startX,startY:X.startY,endX:X.endX,endY:X.endY})}),te({mouseX:re,mouseY:ie,arrowPositions:oe})},onResizeStart:Go},b.id)),I.map(b=>T.jsx(XA,{id:b.id,x:b.x,y:b.y,width:b.width,height:b.height,rotation:b.rotation,text:b.text,gradient:b.gradient,isEditing:b.isEditing,fontSize:b.fontSize,selected:nr.includes(b.id)&&!b.isEditing,isBold:b.isBold,isItalic:b.isItalic,isUnderline:b.isUnderline,color:b.color,onTextChange:Fi,onTextBlur:ar,onTextClick:(V,$)=>{$.stopPropagation()},onTextDoubleClick:Yo,onMouseDown:(V,$)=>{var _e;if(V.button!==0||Ln||Br||Wr)return;V.stopPropagation();const G=(_e=Ke.current)==null?void 0:_e.getBoundingClientRect();if(!G)return;const re=(V.clientX-G.left-We.x)/He,ie=(V.clientY-G.top-We.y)/He,oe=nr.includes($)?nr:[$];ws($,"textbox",re,ie,oe,I)},onResizeStart:Un,onRotateStart:Nl},b.id)),rr.length===1&&(()=>{const b=w.find(V=>V.id===rr[0]);return b?T.jsx(mu,{x:b.x,y:b.y,width:b.width,elementType:"shape",textStyle:{isBold:b.isBold,isItalic:b.isItalic,isUnderline:b.isUnderline,color:b.textColor||"#000000"},onToggleBold:()=>jd(b.id),onToggleItalic:()=>Ud(b.id),onToggleUnderline:()=>zd(b.id),onColorChange:V=>Bd(b.id,V),onChangeGradient:()=>jl(b.id),onDelete:()=>Fl(b.id)},`shape-toolbar-${b.id}`):null})(),nr.length===1&&(()=>{const b=I.find(V=>V.id===nr[0]);return!b||b.isEditing?null:T.jsx(mu,{x:b.x,y:b.y,width:b.width,elementType:"textbox",textStyle:{isBold:b.isBold,isItalic:b.isItalic,isUnderline:b.isUnderline,color:b.color||"#000000"},onToggleBold:()=>ji(b.id),onToggleItalic:()=>Ui(b.id),onToggleUnderline:()=>Fd(b.id),onColorChange:V=>Wl(b.id,V),onChangeGradient:()=>{const V=qt();Cs(b.id,V.value)},onDelete:()=>Fe(b.id)},`textbox-toolbar-${b.id}`)})(),Fr.length===1&&(()=>{const b=A.find(V=>V.id===Fr[0]);return b?T.jsx(mu,{x:b.x,y:b.y,width:b.width,elementType:"image",onDelete:()=>Dd(b.id)},`image-toolbar-${b.id}`):null})(),Vn.length===1&&(()=>{const b=L.find(re=>re.id===Vn[0]);if(!b)return null;const V=Math.min(b.startX,b.endX),$=Math.min(b.startY,b.endY),G=Math.abs(b.endX-b.startX)||100;return T.jsx(mu,{x:V,y:$,width:G,elementType:"arrow",arrowStyle:{strokeStyle:b.strokeStyle,gradient:b.gradient},onToggleStrokeStyle:()=>Ul(b.id),onChangeArrowGradient:()=>zl(b.id),onDelete:()=>Jo(b.id)},`arrow-toolbar-${b.id}`)})(),I.length===0&&w.length===0&&A.length===0&&v.length===0&&ae.length===0&&L.length===0&&T.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:T.jsx("div",{className:"text-center",children:T.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-600 bg-clip-text text-transparent",children:[T.jsx(lE,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),T.jsx("p",{className:"text-xl font-semibold mb-2",children:"Use the toolbar to add elements"}),T.jsx("p",{className:"text-gray-500",children:"Select a tool and click to add text or shapes"})]})})})]})}),y&&T.jsx(xO,{onClose:()=>C(!1)})]})}sE(document.getElementById("root")).render(T.jsx(x.StrictMode,{children:T.jsx(RO,{})}));
